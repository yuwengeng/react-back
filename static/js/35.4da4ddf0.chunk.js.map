{"version":3,"sources":["../node_modules/echarts/lib/component/tooltip.js","../node_modules/echarts/lib/component/title.js","../node_modules/echarts/lib/component/legend.js","../node_modules/echarts/lib/component/gridSimple.js","../node_modules/echarts/lib/component/axisPointer/modelHelper.js","../node_modules/echarts/lib/coord/cartesian/Grid.js","../node_modules/echarts/lib/visual/symbol.js","../node_modules/echarts/lib/layout/points.js","../node_modules/echarts/lib/coord/cartesian/AxisModel.js","../node_modules/echarts/lib/chart/bar/BaseBarSeries.js","../node_modules/echarts/lib/chart/bar/helper.js","../node_modules/echarts/lib/chart/helper/labelHelper.js","../node_modules/echarts/lib/chart/helper/createClipPathFromCoordSys.js","../node_modules/echarts/lib/component/axis/AxisBuilder.js","../node_modules/echarts/lib/component/axis/AxisView.js","../node_modules/echarts/lib/coord/cartesian/cartesianAxisHelper.js","../node_modules/echarts/lib/component/axisPointer/findPointFromSeries.js","../node_modules/echarts/lib/component/axisPointer/globalListener.js","../node_modules/echarts/lib/component/axisPointer/viewHelper.js","../node_modules/echarts/lib/chart/helper/SymbolDraw.js","../node_modules/echarts/lib/chart/helper/Symbol.js","../node_modules/echarts/lib/chart/line/helper.js","../node_modules/screenfull/dist/screenfull.js","../node_modules/echarts/lib/chart/bar.js","../node_modules/echarts/lib/coord/cartesian/Cartesian2D.js","../node_modules/echarts/lib/coord/cartesian/Cartesian.js","../node_modules/echarts/lib/coord/cartesian/Axis2D.js","../node_modules/echarts/lib/coord/cartesian/GridModel.js","../node_modules/echarts/lib/coord/axisModelCreator.js","../node_modules/echarts/lib/coord/axisDefault.js","../node_modules/echarts/lib/chart/bar/BarSeries.js","../node_modules/echarts/lib/chart/bar/BarView.js","../node_modules/echarts/lib/chart/bar/barItemStyle.js","../node_modules/echarts/lib/component/axis.js","../node_modules/echarts/lib/component/axis/CartesianAxisView.js","../node_modules/echarts/lib/component/axisPointer.js","../node_modules/echarts/lib/component/axisPointer/axisTrigger.js","../node_modules/echarts/lib/component/axisPointer/AxisPointerModel.js","../node_modules/echarts/lib/component/axisPointer/AxisPointerView.js","../node_modules/echarts/lib/component/axisPointer/CartesianAxisPointer.js","../node_modules/echarts/lib/component/axisPointer/BaseAxisPointer.js","../node_modules/echarts/lib/component/tooltip/TooltipModel.js","../node_modules/echarts/lib/component/tooltip/TooltipView.js","../node_modules/echarts/lib/component/tooltip/TooltipContent.js","../node_modules/echarts/lib/component/tooltip/TooltipRichContent.js","../node_modules/echarts/lib/component/legend/LegendModel.js","../node_modules/echarts/lib/component/legend/legendAction.js","../node_modules/echarts/lib/component/legend/LegendView.js","../node_modules/echarts/lib/component/helper/listComponent.js","../node_modules/echarts/lib/component/legend/legendFilter.js","../node_modules/echarts/lib/chart/pie.js","../node_modules/echarts/lib/chart/pie/PieSeries.js","../node_modules/echarts/lib/chart/helper/createListSimply.js","../node_modules/echarts/lib/component/helper/selectableMixin.js","../node_modules/echarts/lib/chart/pie/PieView.js","../node_modules/echarts/lib/action/createDataSelectAction.js","../node_modules/echarts/lib/visual/dataColor.js","../node_modules/echarts/lib/chart/pie/pieLayout.js","../node_modules/echarts/lib/chart/pie/labelLayout.js","../node_modules/echarts/lib/processor/dataFilter.js","../node_modules/echarts/lib/chart/line.js","../node_modules/echarts/lib/chart/line/LineSeries.js","../node_modules/echarts/lib/chart/line/LineView.js","../node_modules/echarts/lib/chart/line/lineAnimationDiff.js","../node_modules/echarts/lib/chart/line/poly.js","../node_modules/echarts/lib/processor/dataSample.js","../node_modules/echarts/lib/chart/scatter.js","../node_modules/echarts/lib/chart/scatter/ScatterSeries.js","../node_modules/echarts/lib/chart/scatter/ScatterView.js","../node_modules/echarts/lib/chart/helper/LargeSymbolDraw.js","../node_modules/echarts/lib/chart/pictorialBar.js","../node_modules/echarts/lib/chart/bar/PictorialBarSeries.js","../node_modules/echarts/lib/chart/bar/PictorialBarView.js","../node_modules/antd/es/row/style/css.js","../node_modules/antd/es/col/style/css.js","../node_modules/antd/es/row/index.js","../node_modules/antd/es/col/index.js"],"names":["echarts","registerAction","type","event","update","zrUtil","graphic","getLayoutRect","extendComponentModel","layoutMode","ignoreSize","defaultOption","zlevel","z","show","text","target","subtext","subtarget","left","top","backgroundColor","borderColor","borderWidth","padding","itemGap","textStyle","fontSize","fontWeight","color","subtextStyle","extendComponentView","render","titleModel","ecModel","api","this","group","removeAll","get","textStyleModel","getModel","subtextStyleModel","textAlign","textVerticalAlign","retrieve2","textEl","Text","style","setTextStyle","textFill","getTextColor","disableBox","z2","textRect","getBoundingRect","subText","subTextEl","y","height","link","sublink","triggerEvent","silent","on","window","open","eventData","componentType","componentIndex","add","groupRect","layoutOption","getBoxLayoutParams","width","layoutRect","getWidth","getHeight","x","attr","alignStyle","setStyle","margin","getItemStyle","fill","rect","Rect","shape","r","subPixelOptimize","legendFilter","Component","registerProcessor","PRIORITY","PROCESSOR","SERIES_FILTER","registerSubTypeDefaulter","gridModel","coordinateSystem","getRect","defaults","registerPreprocessor","option","xAxis","yAxis","grid","Model","each","curry","checkPropInLink","linkPropValue","axisPropValue","isArray","indexOf","getAxisInfo","axisModel","coordSysAxesInfo","getComponent","axesInfo","makeKey","isHandleTrigger","axisPointerModel","model","id","exports","collect","result","seriesInvolved","coordSysMap","globalTooltipModel","globalAxisPointerModel","linksOption","linkGroups","getCoordinateSystems","coordSys","axisPointerEnabled","coordSysKey","axesInfoInCoordSys","baseTooltipModel","getAxes","saveTooltipAxisInfo","getTooltipAxes","triggerAxis","cross","tooltipAxes","baseAxes","otherAxes","fromTooltip","triggerTooltip","axis","axisPointerShow","snap","tooltipAxisPointerModel","volatileOption","field","clone","labelOption","label","tooltipAxisPointerLabelShow","crossStyle","lineStyle","makeAxisPointerModel","key","involveSeries","axisInfo","useHandle","seriesModels","groupIndex","dim","i","length","linkOption","name","getLinkGroupIndex","linkGroup","mapper","collectAxesInfo","eachSeries","seriesModel","seriesTooltipTrigger","seriesTooltipShow","getAxis","push","seriesDataCount","getData","count","collectSeriesInfo","fixValue","scale","status","value","parse","extent","getExtent","slice","reverse","isBlank","getAxisPointerModel","__DEV__","_util","isObject","map","retrieve","_axisHelper","createScaleByModel","ifAxisCrossZero","niceScaleExtent","estimateLabelUnionRect","Cartesian2D","Axis2D","CoordinateSystem","getStackedDimension","isAxisUsedInTheGrid","getCoordSysModel","Grid","_coordsMap","_coordsList","_axesMap","_axesList","_initCartesian","gridProto","prototype","fixAxisOnZero","axesMap","otherAxisDim","onZeroRecords","getAxesOnZeroOf","otherAxisOnZeroOf","onZero","onZeroAxisIndex","canOnZeroToAxis","idx","hasOwnProperty","getOnZeroRecordKey","index","_rect","_updateScale","resize","ignoreContainLabel","gridRect","axesList","adjustAxes","isHorizontal","inverse","setExtent","coordBase","axisExtent","axisExtentSum","toGlobalCoord","coord","toLocalCoord","updateAxisTransform","labelUnionRect","position","axisType","axisIndex","axesMapOnDim","getCartesian","xAxisIndex","yAxisIndex","coordList","getCartesians","convertToPixel","finder","_findConvertTarget","cartesian","dataToPoint","dataToCoord","convertFromPixel","pointToData","coordToData","xAxisModel","getReferringComponents","yAxisModel","coordsList","containPoint","point","axisPositionUsed","right","bottom","axesCount","eachComponent","createAxisCreator","axisPosition","isCategory","onBand","addAxis","unionExtent","data","mapDimension","unionExtentFromData","Infinity","isCartesian2D","axesModels","findAxesModels","baseAxis","getBaseAxis","otherAxis","getOtherAxis","axesTypes","create","grids","dimensions","register","_default","module","isFunction","seriesType","defaultSymbolType","legendSymbol","performRawSeries","reset","symbolType","symbolSize","keepAspect","hasSymbolTypeCallback","hasSymbolSizeCallback","hasCallback","seriesSymbol","seriesSymbolSize","setVisual","symbol","symbolKeepAspect","isSeriesFiltered","dataEach","hasItemOption","rawValue","getRawValue","params","getDataParams","setItemVisual","itemModel","getItemModel","itemSymbolType","getShallow","itemSymbolSize","itemSymbolKeepAspect","createRenderPlanner","isDimensionStacked","plan","isLargeRender","pipelineContext","large","dims","dimLen","stackResultDim","getCalculationInfo","progress","segCount","end","start","points","Float32Array","offset","tmpIn","tmpOut","isNaN","NaN","setItemLayout","setLayout","ComponentModel","axisModelCreator","axisModelCommonMixin","AxisModel","extend","init","superApply","arguments","resetRange","mergeOption","restoreData","queryComponents","mainType","gridIndex","gridId","getAxisType","axisDim","merge","extraOption","SeriesModel","createListFromArray","getInitialData","getSource","getMarkerPosition","pt","clampData","getLayout","size","legendHoverLink","barMinHeight","barMinAngle","largeThreshold","progressive","progressiveChunkMode","itemStyle","emphasis","getDefaultLabel","fixPosition","labelPositionOutside","textPosition","setLabel","normalStyle","hoverStyle","dataIndex","labelModel","hoverLabelModel","setLabelStyle","labelFetcher","labelDataIndex","defaultText","isRectText","autoColor","retrieveRawValue","labelDims","len","vals","val","join","round","createGridClipPath","hasAnimation","getArea","lineWidth","clipPath","initProps","createPolarClipPath","polar","sectorArea","Sector","cx","cy","r0","startAngle","endAngle","clockwise","createClipPath","formatUtil","_number","isRadianAroundZero","remRadian","createSymbol","matrixUtil","v2ApplyTransform","applyTransform","shouldShowAllLabels","PI","Math","AxisBuilder","opt","labelOffset","nameDirection","tickDirection","labelDirection","Group","dumbGroup","rotation","updateTransform","_transform","transform","_dumbGroup","constructor","hasBuilder","builders","call","getGroup","axisLine","matrix","pt1","pt2","lineCap","getLineStyle","Line","anid","x1","y1","x2","y2","strokeContainThreshold","arrows","arrowSize","arrowOffset","symbolWidth","symbolHeight","rotate","sqrt","stroke","pos","cos","sin","axisTickLabel","tickEls","axisBuilder","tickModel","lineStyleModel","tickLen","ticksCoords","getTicksCoords","tickCoord","tickEl","tickValue","buildAxisTick","labelEls","axisLabelShow","labelMargin","labels","getViewLabels","labelRotation","labelRotate","labelLayout","innerTextLayout","rawCategoryData","getCategories","isLabelSilent","labelItem","formattedLabel","rawLabel","itemLabelModel","textColor","makeAxisEventDataBase","targetType","decomposeTransform","buildAxisLabel","showMinLabel","showMaxLabel","firstLabel","nextLabel","lastLabel","prevLabel","firstTick","nextTick","lastTick","prevTick","ignoreEl","isTwoLabelOverlapped","fixMinMaxLabelShow","axisName","axisNameAvailableWidth","nameLocation","gap","gapSignal","isNameLocationCenter","nameRotation","textRotate","rotationDiff","onLeft","endTextLayout","abs","isFinite","textFont","getFont","truncateOpt","ellipsis","maxWidth","nameTruncateMaxWidth","truncatedText","truncateText","minChar","placeholder","tooltipOpt","formatterParams","$vars","__fullText","__truncatedText","tooltip","content","formatter","axisRotation","textRotation","direction","el","ignore","current","next","firstRect","nextRect","mRotationBack","identity","mul","getLocalTransform","intersect","axisPointerModelHelper","AxisView","_axisPointer","axisPointerClass","payload","_updateAxisPointer","updateAxisPointer","force","remove","axisPointer","dispose","disposeAxisPointer","axisView","forceRender","Clazz","getAxisPointerClass","axisPointerClazz","registerAxisPointerClass","clazz","layout","rawAxisPosition","rectBound","axisOffset","posBound","onZeroCoord","max","min","labelInside","modelUtil","seriesIndex","getSeriesByIndex","queryDataIndex","getItemGraphicEl","getTooltipPosition","getValues","env","inner","makeInner","onLeave","record","e","dispatchAction","handler","doEnter","currTrigger","node","zr","getZr","records","initialized","useHandler","eventType","cb","dis","pendings","showTip","hideTip","pendingList","makeDispatchAction","actuallyPayload","showLen","hideLen","dispatchTooltipFinally","initGlobalListeners","unregister","textContain","axisHelper","buildLabelElOption","elOption","labelPos","getValueLabel","precision","paddings","normalizeCssArray","font","align","verticalAlign","viewWidth","viewHeight","confineInContainer","bgColor","textPadding","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","seriesDataIndices","getLabel","getAxisRawValue","axisDimension","seriesData","idxItem","series","dataIndexInside","dataParams","isString","replace","getTransformedPosition","layoutInfo","translate","buildElStyle","axisPointerType","styleModel","getAreaStyle","buildCartesianSingleLabelElOption","textLayout","makeLineShape","p1","p2","xDimIndex","makeRectShape","xy","wh","makeSectorShape","SymbolClz","SymbolDraw","symbolCtor","_symbolCtor","symbolDrawProto","symbolNeedsDraw","isIgnore","clipShape","contain","getItemVisual","normalizeUpdateOpt","makeSeriesScope","hostModel","hoverItemStyle","symbolRotate","symbolOffset","hoverAnimation","cursorStyle","updateData","oldData","_data","SymbolCtor","seriesScope","diff","newIdx","getItemLayout","symbolEl","setItemGraphicEl","oldIdx","updateProps","fadeOut","execute","isPersistent","updateLayout","eachItemGraphicEl","incrementalPrepareUpdate","_seriesScope","incrementalUpdate","taskParams","updateIncrementalAndHover","isGroup","incremental","useHoverLayer","traverse","enableAnimation","parsePercent","symbolProto","getSymbolSize","Array","getScale","driftSymbol","dx","dy","parent","drift","_createSymbol","symbolPath","culling","_symbolType","stopSymbolAnimation","toLastFrame","childAt","stopAnimation","getSymbolPath","highlight","trigger","downplay","setZ","setDraggable","draggable","cursor","isInit","_updateCommon","fadeIn","opacity","_seriesModel","normalStyleAccessPath","emphasisStyleAccessPath","normalLabelAccessPath","emphasisLabelAccessPath","highDownOnUpdate","fromState","toState","__symbolOriginalScale","ratio","emphasisOpt","animateTo","useStyle","strokeNoScale","elStyle","setColor","symbolInnerColor","liftZ","z2Origin","__z2Origin","useNameLabel","getName","isAnimationEnabled","setHoverStyle","keepLabel","inherits","prepareDataCoordInfo","valueOrigin","stacked","valueAxis","valueStart","getValueStart","baseAxisDim","valueAxisDim","valueDim","baseDim","baseDataOffset","coordDim","dataDimsForPoint","stackedOverDimension","getStackedOnPoint","dataCoordInfo","stackedData","document","isCommonjs","fn","fnMap","l","ret","eventNameMap","change","fullscreenchange","error","fullscreenerror","screenfull","request","element","Promise","resolve","reject","onFullScreenEntered","off","bind","documentElement","requestFullscreen","catch","exit","isFullscreen","onFullScreenExit","exitFullscreen","toggle","onchange","callback","onerror","eventName","addEventListener","removeEventListener","raw","Object","defineProperties","Boolean","fullscreenElement","enumerable","isEnabled","fullscreenEnabled","_barGrid","largeLayout","registerLayout","VISUAL","LAYOUT","PROGRESSIVE_LAYOUT","registerVisual","BoundingRect","Cartesian","getAxesByScale","axisX","axisY","containData","reserved","out","xScale","yScale","xAxisExtent","yAxisExtent","xExtent","getGlobalExtent","yExtent","dimAxisMapper","_axes","_dimList","scaleType","toLowerCase","filter","_dataCoordConvert","input","method","dimList","output","Axis","coordExtent","asc","clamp","dependencies","containLabel","axisDefault","_layout","getLayoutParams","mergeLayoutParam","OrdinalMeta","AXIS_TYPES","BaseAxisModelClass","axisTypeDefaulter","extraDefaultOption","mergeDefaultAndTheme","inputPositionParams","themeModel","getTheme","getDefaultOption","optionUpdated","__ordinalMeta","createByAxisModel","rawData","categories","getOrdinalMeta","mergeAll","nameRotate","nameTruncate","nameTextStyle","nameGap","axisTick","inside","axisLabel","splitLine","splitArea","areaStyle","categoryAxis","boundaryGap","deduplication","alignWithLabel","interval","splitNumber","timeAxis","logAxis","logBase","brushSelector","getProgressive","getProgressiveThreshold","progressiveThreshold","clip","barItemStyle","Path","throttle","BAR_BORDER_WIDTH_QUERY","_eventPos","extendChartView","_updateDrawMode","coordinateSystemType","_isLargeDraw","_renderLarge","_renderNormal","incrementalPrepareRender","_clear","incrementalRender","_incrementalRenderLarge","isLargeDraw","isHorizontalOrRadial","animationModel","needsClip","coordSysClipArea","expandWidth","getClipArea","removeClipPath","hasValue","elementCreator","updateStyle","newIndex","oldIndex","removeRect","removeSector","createLarge","setClipPath","noop","mathMax","mathMin","cartesian2d","coordSysBoundingRect","signWidth","signHeight","clipped","isUpdate","animateProperty","animateTarget","isRadial","sector","fixedLineWidth","rawLayout","getLineWidth","signX","signY","isPolar","itemStyleModel","getBarItemStyle","setShape","LargePath","buildPath","ctx","startPoint","__startPoint","baseDimIdx","__baseDimIdx","moveTo","lineTo","__largeDataIndices","__barWidth","getVisual","setLargeStyle","largePathUpdateDataIndex","largePath","valueDimIdx","largeDataIndices","barWidthHalf","startValueVal","pointerBaseVal","pointerValueVal","baseLowerBound","baseUpperBound","ii","barBaseVal","barValueVal","largePathFindDataIndex","offsetX","offsetY","_getBarItemStyle","makeStyleMapper","excludes","getBorderLineDash","lineDash","cartesianAxisHelper","axisBuilderAttrs","selfBuilderAttrs","CartesianAxisView","oldAxisGroup","_axisGroup","groupTransition","superCall","_splitAreaColors","_splitLine","splitLineModel","lineColors","lineCount","colorIndex","_splitArea","splitAreaModel","areaStyleModel","areaColors","areaColorsLen","lastSplitAreaColors","newSplitAreaColors","createHashMap","cIndex","prev","set","axisTrigger","STATISTIC","modelHelper","findPointFromSeries","processOnAxis","newValue","updaters","dontSnap","outputFinder","payloadInfo","snapToValue","payloadBatch","minDist","Number","MAX_VALUE","minDiff","seriesNestestValue","dataIndices","dataDim","getAxisTooltipData","nestestValue","indicesOfNearest","dist","getRawIndex","buildPayloadsBySeries","showPointer","showTooltip","showValueMap","dataByCoordSys","coordSysModel","coordSysItem","coordSysId","coordSysIndex","coordSysType","coordSysMainType","dataByAxis","list","axisId","valueLabelOpt","makeMapperParam","item","illegalPoint","isIllegalPoint","inputAxesInfo","shouldHide","coordSysContainsPoint","inputAxisInfo","findInputAxisInfo","linkTriggers","tarAxisInfo","tarKey","srcAxisInfo","srcKey","srcValItem","outputAxesInfo","valItem","updateModelActually","sampleItem","escapeConnect","tooltipOption","dispatchTooltipActually","lastHighlights","newHighlights","batchItem","toHighlight","toDownplay","batch","dispatchHighDownActually","triggerOn","animation","animationDurationUpdate","shadowStyle","handle","icon","globalListener","AxisPointerView","_model","BaseAxisPointer","viewHelper","CartesianAxisPointer","makeElOption","otherExtent","pixelValue","pointerOption","pointerShapeBuilder","graphicKey","pointer","getHandleTransform","updateHandleTransform","delta","dimIndex","currPosition","cursorOtherValue","cursorPoint","line","getAxisDimIndex","shadow","bandWidth","getBandWidth","span","clazzUtil","eventTool","throttleUtil","moveAnimation","props","propsEqual","lastProps","newProps","equals","lastProp","updateLabelShowHide","labelEl","getHandleTransProps","trans","updateMandatoryProps","_group","_lastGraphicKey","_handle","_dragging","_lastValue","_lastStatus","_payloadInfo","animationThreshold","_axisModel","_axisPointerModel","_api","hide","clear","_moveAnimation","determineAnimation","doUpdateProps","updatePointerEl","updateLabelEl","createPointerEl","createLabelEl","_renderHandle","isCategoryAxis","useSnap","pointerEl","handleModel","createIcon","onmousemove","stop","onmousedown","_onHandleDragMove","ondragend","_onHandleDragEnd","handleSize","createOrUpdate","_moveHandleToValue","_doDispatchAxisPointer","doClear","buildLabel","enableClassExtend","showContent","alwaysShowContent","displayMode","renderMode","confine","showDelay","hideDelay","transitionDuration","enterable","borderRadius","extraCssText","animationEasingUpdate","TooltipContent","TooltipRichContent","numberUtil","layoutUtil","axisPointerViewHelper","getTooltipRenderMode","proxyRect","tooltipContent","_renderMode","getDom","_newLine","_tooltipContent","tooltipModel","_tooltipModel","_ecModel","_lastDataByCoordSys","_alwaysShowContent","setEnterable","_initGlobalListener","_keepShow","_tryShow","_hide","_lastX","_lastY","self","clearTimeout","_refreshUpdateTimeout","setTimeout","isDisposed","manuallyShowTip","from","uid","_ticket","_manuallyAxisShowTip","pointInfo","findHover","manuallyHideTip","hideLater","buildTooltipModel","_showAxisTooltip","_showSeriesItemTooltip","_showComponentItemTooltip","_showOrMove","delay","_showTimout","singleDefaultHTML","singleParamsList","singleTooltipModel","newLine","markers","itemCoordSys","axisValue","seriesDefaultHTML","valueLabel","axisValueLabel","html","seriesTooltip","formatTooltip","newMarkers","firstLine","encodeHTML","positionExpr","_updateContentNotChangedOnAxis","_updatePosition","_showTooltipContent","random","undefined","dataModel","dataType","tooltipTrigger","defaultHtml","asyncTicket","subTooltipModel","formatTpl","cbTicket","setContent","contentSize","getSize","vAlign","viewSize","domWidth","domHeight","rectWidth","rectHeight","calcTooltipPosition","gapH","gapV","getOuterSize","refixTooltipPosition","isCenterAlign","confineTooltipPosition","lastCoordSys","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisDataByAxis","lastItem","indexAxis","thisItem","lastIndices","newIndices","lastIdxItem","j","newIdxItem","modelCascade","resultModel","pop","isInstance","zrColor","eventUtil","toCamelCase","vendors","assembleCssText","cssText","duration","transitionText","vendorPrefix","assembleTransition","canvasSupported","toHex","borderName","camelCase","assembleFont","container","wxa","createElement","_zr","_x","_y","appendChild","_container","_show","_hideTimeout","onmouseenter","_enterable","_inContent","normalizeEvent","dispatch","onmouseleave","_hideDelay","stl","currentStyle","defaultView","getComputedStyle","domStyle","display","innerHTML","pointerEvents","clientWidth","clientHeight","viewportRootOffset","painter","getViewportRootOffset","offsetLeft","offsetTop","time","isShow","parseInt","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","markerRich","startId","endId","substr","textWidth","textHeight","textBorderRadius","textBackgroundColor","textOffset","rich","textLineHeight","bounding","isNameSpecified","langSelector","legend","selector","defaultSelectorOption","all","title","LegendModel","parentModel","selected","_updateSelector","_updateData","legendData","hasSelected","isSelected","select","potentialData","availableNames","eachRawSeries","isPotential","seriesName","legendDataProvider","names","mapArray","concat","_availableNames","dataItem","unSelect","toggleSelected","allSelect","inverseSelect","getOrient","orient","itemWidth","itemHeight","inactiveColor","inactiveBorderColor","selectedMode","selectorLabel","fontFamily","selectorPosition","selectorItemGap","selectorButtonGap","legendSelectActionHandler","methodName","selectedMap","isToggleSelect","legendModel","isItemSelected","makeBackground","newlineDisabled","_contentGroup","_backgroundEl","_selectorGroup","_isFirstRender","getContentGroup","getSelectorGroup","isFirstRender","resetInner","itemAlign","renderInner","positionInfo","viewportSize","maxSize","mainRect","layoutInner","contentGroup","legendDrawnMap","selectMode","excludeSeriesId","getSeriesByName","legendSymbolType","_createItem","dispatchSelectAction","dispatchHighlightAction","dispatchDownplayAction","indexOfName","newline","_createSelector","selectorGroup","selectorItem","labelText","onclick","emphasisLabelModel","createSelectorButton","legendModelItemStyle","itemGroup","itemIcon","legendGlobalTooltipModel","setSymbolStyle","legendSymbolCenter","textX","hitRect","invisible","legendIndex","eachChild","child","__legendDataIndex","box","contentRect","contentPos","selectorRect","selectorPos","orientIdx","hw","yx","dataName","storage","getDisplayList","layoutBox","positionElement","componentModel","boxLayoutParams","legendModels","findComponents","filterSeries","createDataSelectAction","dataColor","pieLayout","dataFilter","createListSimply","getPercentWithPrecision","dataSelectableMixin","retrieveRawAttr","PieSeries","extendSeriesModel","getRawData","updateSelectedMap","_createSelectableList","_defaultLabelLine","newOption","targetList","valueList","percent","defaultEmphasis","labelLineNormalOpt","labelLine","labelLineEmphasisOpt","center","radius","minAngle","minShowLabelAngle","selectedOffset","hoverOffset","avoidLabelOverlap","percentPrecision","stillShowZeroSum","length2","smooth","animationType","animationTypeUpdate","animationEasing","mixin","createDimensions","List","nameList","coordDimensions","source","dimensionsInfo","initData","_targetList","_selectTargetMap","reduce","targetMap","ChartView","updateDataSelected","seriesId","toggleItemSelected","midAngle","animate","when","PiePiece","polyline","Polyline","piePieceProto","firstCreate","sectorShape","visualColor","lineJoin","withAnimation","_updateLabel","hoverIgnore","normalIgnore","targetLineShape","linePoints","targetTextStyle","origin","labelHoverModel","labelLineModel","labelLineHoverModel","useInsideStyle","sectorGroup","_sectorGroup","onSectorClick","piePiece","s","_createClipPath","itemLayout","actionInfos","actionInfo","subType","query","getTargetSeries","paletteScope","seiresModelMap","eachSeriesByType","__paletteScope","dataAll","idxMap","rawIdx","filteredIdx","singleDataColor","singleDataBorderColor","getColorFromPalette","linearMap","PI2","RADIAN","validDataCount","sum","getSum","unitRadian","roseType","getDataExtent","restAngle","valueSumLargerThanMinAngle","currentAngle","dir","angle","adjustSingleSide","shiftDown","shiftUp","changeX","isDownList","lastDeltaX","deltaY","len2","deltaX","sort","a","b","lastY","upList","downList","isPositionCenter","labelLayoutList","hasLabelRotate","minShowLabelRadian","labelPosition","labelLineLen","labelLineLen2","textY","isLabelInside","x3","getFormattedLabel","leftList","rightList","avoidOverlap","filterSelf","visualSymbol","layoutPoints","dataSample","step","smoothMonotone","showSymbol","showAllSymbol","connectNulls","sampling","hoverLayerThreshold","lineAnimationDiff","_poly","Polygon","_helper","_createClipPathFromCoordSys","isPointsSame","points1","points2","getSmooth","turnPointsIntoStep","stepTurnAt","baseIndex","stepPoints","nextPt","stepPt","middle","stepPt2","getIsIgnoreFunc","isAuto","availSize","dataLen","canShowAllSymbolForCategory","categoryDataDim","labelMap","createLineClipPath","rectShape","expandSize","lineGroup","symbolDraw","_symbolDraw","_lineGroup","isCoordSysPolar","prevCoordSys","_coordSys","_polyline","polygon","_polygon","isAreaChart","isEmpty","stackedOnPoints","getStackedOnPoints","isIgnoreFunc","__temp","clipShapeForSymbol","r1","_step","_newPolygon","_stackedOnPoints","_points","_updateAnimation","_newPolyline","visualMetaList","visualMeta","dimension","dimName","dimInfo","getDimensionInfo","colorStops","stops","stopLen","outerColors","minCoord","maxCoord","coordSpan","unshift","gradient","LinearGradient","getVisualGradient","stackedOnSeries","stackedOnSmooth","_valueOrigin","stackedOnCurrent","stackedOnNext","__points","updatedDataInfo","diffStatus","cmd","idx1","ptIdx","animators","during","newData","oldStackedOnPoints","newStackedOnPoints","oldCoordSys","newCoordSys","oldValueOrigin","newValueOrigin","diffResult","diffData","currPoints","nextPoints","currStackedPoints","nextStackedPoints","sortedIndices","rawIndices","newDataOldCoordInfo","oldDataNewCoordInfo","diffItem","pointAdded","currentPt","rawIndex","sortedCurrPoints","sortedNextPoints","sortedCurrStackedPoints","sortedNextStackedPoints","sortedStatus","vec2","fixClipWithShadow","vec2Min","vec2Max","scaleAndAdd","v2Copy","copy","v","cp0","cp1","isPointNull","p","drawSegment","segLen","allLen","smoothMin","smoothMax","drawMono","apply","drawNonMono","prevIdx","k","prevP","ctrlLen","bezierCurveTo","nextIdx","nextP","ratioNextSeg","lenPrevSeg","lenNextSeg","sub","getBoundingBox","smoothConstraint","ptMin","ptMax","brush","bbox","stackedOnBBox","closePath","samplers","average","frame","nearest","indexSampler","modifyOutputEnd","sampler","rate","setData","downSample","LargeSymbolDraw","pointsLayout","_updateSymbolDraw","_getClipShape","_finished","dirty","res","clipArea","IncrementalDisplayable","LargeSymbolPath","extendShape","symbolProxy","softClipShape","path","symbolProxyShape","getContext","afterBrush","setTransform","fillRect","restoreTransform","findDataIndex","w","h","x0","y0","largeSymbolProto","_incremental","rectHover","_setCommon","startIndex","endIndex","byteOffset","buffer","_clearIncremental","addDisplayable","isIncremental","extrudeShadow","clearDisplaybles","PictorialBarSeries","symbolPosition","symbolMargin","symbolRepeat","symbolRepeatDirection","symbolClip","symbolBoundingData","symbolPatternSize","barGap","stack","isNumeric","LAYOUT_ATTRS","posDesc","pathForLineWidth","Circle","getSymbolMeta","symbolMeta","boundingLength","zeroPx","pxSignIdx","symbolBoundingExtent","convertToCoordOnAxis","coordSysExtent","repeatCutLength","pxSign","prepareBarLength","categoryDim","categorySize","symbolScale","prepareSymbolSize","valueLineWidth","getLineScale","prepareLineWidth","unitLength","pathLen","absBoundingLength","hasEndGap","lastIndexOf","uLenWithMargin","endFix","repeatSpecified","repeatTimes","toIntTimes","sizeFix","pathPosition","bundlePosition","barRectShape","ecSize","prepareLayoutInfo","createPath","createOrUpdateRepeatSymbols","bar","bundle","__pictorialBundle","unit","eachPath","__pictorialAnimationIndex","__pictorialRepeatTimes","updateAttr","makeTarget","updateHoverAnimation","onMouseOver","onMouseOut","createOrUpdateSingleSymbol","mainPath","__pictorialMainPath","createOrUpdateBarRect","barRect","__pictorialBarRect","createOrUpdateClip","__pictorialClipPath","getAnimationDelayParams","createBar","__pictorialShapeStr","getShapeStr","__pictorialSymbolMeta","removeBar","labelRect","pathes","context","children","immediateAttrs","animationAttrs","updateCommon","barRectHoverStyle","barPositionOutside","times","roundedTimes","ceil","coordSysRect","pictorialShapeStr","updateBar"],"mappings":"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","file":"static/js/35.4da4ddf0.chunk.js","sourcesContent":["/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../echarts\");\n\nrequire(\"./axisPointer\");\n\nrequire(\"./tooltip/TooltipModel\");\n\nrequire(\"./tooltip/TooltipView\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME Better way to pack data in graphic element\n\n/**\n * @action\n * @property {string} type\n * @property {number} seriesIndex\n * @property {number} dataIndex\n * @property {number} [x]\n * @property {number} [y]\n */\n\n\necharts.registerAction({\n  type: 'showTip',\n  event: 'showTip',\n  update: 'tooltip:manuallyShowTip'\n}, // noop\nfunction () {});\necharts.registerAction({\n  type: 'hideTip',\n  event: 'hideTip',\n  update: 'tooltip:manuallyHideTip'\n}, // noop\nfunction () {});","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar echarts = require(\"../echarts\");\n\nvar graphic = require(\"../util/graphic\");\n\nvar _layout = require(\"../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Model\n\necharts.extendComponentModel({\n  type: 'title',\n  layoutMode: {\n    type: 'box',\n    ignoreSize: true\n  },\n  defaultOption: {\n    // \n    zlevel: 0,\n    // \n    z: 6,\n    show: true,\n    text: '',\n    // \n    // link: null,\n    // self | blank\n    target: 'blank',\n    subtext: '',\n    // \n    // sublink: null,\n    // self | blank\n    subtarget: 'blank',\n    // 'center'  'left'  'right'\n    //  {number}xpx\n    left: 0,\n    // 'top'  'bottom'  'center'\n    //  {number}ypx\n    top: 0,\n    // \n    // 'auto' | 'left' | 'right' | 'center'\n    //  left \n    // textAlign: null\n    //\n    // \n    // 'auto' | 'top' | 'bottom' | 'middle'\n    //  top \n    // textVerticalAlign: null\n    // textBaseline: null // The same as textVerticalAlign.\n    backgroundColor: 'rgba(0,0,0,0)',\n    // \n    borderColor: '#ccc',\n    // px0\n    borderWidth: 0,\n    // px5\n    // css\n    padding: 5,\n    // px10\n    itemGap: 10,\n    textStyle: {\n      fontSize: 18,\n      fontWeight: 'bolder',\n      color: '#333'\n    },\n    subtextStyle: {\n      color: '#aaa'\n    }\n  }\n}); // View\n\necharts.extendComponentView({\n  type: 'title',\n  render: function render(titleModel, ecModel, api) {\n    this.group.removeAll();\n\n    if (!titleModel.get('show')) {\n      return;\n    }\n\n    var group = this.group;\n    var textStyleModel = titleModel.getModel('textStyle');\n    var subtextStyleModel = titleModel.getModel('subtextStyle');\n    var textAlign = titleModel.get('textAlign');\n    var textVerticalAlign = zrUtil.retrieve2(titleModel.get('textBaseline'), titleModel.get('textVerticalAlign'));\n    var textEl = new graphic.Text({\n      style: graphic.setTextStyle({}, textStyleModel, {\n        text: titleModel.get('text'),\n        textFill: textStyleModel.getTextColor()\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var textRect = textEl.getBoundingRect();\n    var subText = titleModel.get('subtext');\n    var subTextEl = new graphic.Text({\n      style: graphic.setTextStyle({}, subtextStyleModel, {\n        text: subText,\n        textFill: subtextStyleModel.getTextColor(),\n        y: textRect.height + titleModel.get('itemGap'),\n        textVerticalAlign: 'top'\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var link = titleModel.get('link');\n    var sublink = titleModel.get('sublink');\n    var triggerEvent = titleModel.get('triggerEvent', true);\n    textEl.silent = !link && !triggerEvent;\n    subTextEl.silent = !sublink && !triggerEvent;\n\n    if (link) {\n      textEl.on('click', function () {\n        window.open(link, '_' + titleModel.get('target'));\n      });\n    }\n\n    if (sublink) {\n      subTextEl.on('click', function () {\n        window.open(sublink, '_' + titleModel.get('subtarget'));\n      });\n    }\n\n    textEl.eventData = subTextEl.eventData = triggerEvent ? {\n      componentType: 'title',\n      componentIndex: titleModel.componentIndex\n    } : null;\n    group.add(textEl);\n    subText && group.add(subTextEl); // If no subText, but add subTextEl, there will be an empty line.\n\n    var groupRect = group.getBoundingRect();\n    var layoutOption = titleModel.getBoxLayoutParams();\n    layoutOption.width = groupRect.width;\n    layoutOption.height = groupRect.height;\n    var layoutRect = getLayoutRect(layoutOption, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }, titleModel.get('padding')); // Adjust text align based on position\n\n    if (!textAlign) {\n      // Align left if title is on the left. center and right is same\n      textAlign = titleModel.get('left') || titleModel.get('right');\n\n      if (textAlign === 'middle') {\n        textAlign = 'center';\n      } // Adjust layout by text align\n\n\n      if (textAlign === 'right') {\n        layoutRect.x += layoutRect.width;\n      } else if (textAlign === 'center') {\n        layoutRect.x += layoutRect.width / 2;\n      }\n    }\n\n    if (!textVerticalAlign) {\n      textVerticalAlign = titleModel.get('top') || titleModel.get('bottom');\n\n      if (textVerticalAlign === 'center') {\n        textVerticalAlign = 'middle';\n      }\n\n      if (textVerticalAlign === 'bottom') {\n        layoutRect.y += layoutRect.height;\n      } else if (textVerticalAlign === 'middle') {\n        layoutRect.y += layoutRect.height / 2;\n      }\n\n      textVerticalAlign = textVerticalAlign || 'top';\n    }\n\n    group.attr('position', [layoutRect.x, layoutRect.y]);\n    var alignStyle = {\n      textAlign: textAlign,\n      textVerticalAlign: textVerticalAlign\n    };\n    textEl.setStyle(alignStyle);\n    subTextEl.setStyle(alignStyle); // Render background\n    // Get groupRect again because textAlign has been changed\n\n    groupRect = group.getBoundingRect();\n    var padding = layoutRect.margin;\n    var style = titleModel.getItemStyle(['color', 'opacity']);\n    style.fill = titleModel.get('backgroundColor');\n    var rect = new graphic.Rect({\n      shape: {\n        x: groupRect.x - padding[3],\n        y: groupRect.y - padding[0],\n        width: groupRect.width + padding[1] + padding[3],\n        height: groupRect.height + padding[0] + padding[2],\n        r: titleModel.get('borderRadius')\n      },\n      style: style,\n      subPixelOptimize: true,\n      silent: true\n    });\n    group.add(rect);\n  }\n});","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../echarts\");\n\nrequire(\"./legend/LegendModel\");\n\nrequire(\"./legend/legendAction\");\n\nrequire(\"./legend/LegendView\");\n\nvar legendFilter = require(\"./legend/legendFilter\");\n\nvar Component = require(\"../model/Component\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Do not contain scrollable legend, for sake of file size.\n// Series Filter\n\n\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.SERIES_FILTER, legendFilter);\nComponent.registerSubTypeDefaulter('legend', function () {\n  // Default 'plain' when no type specified.\n  return 'plain';\n});","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../util/graphic\");\n\nrequire(\"../coord/cartesian/Grid\");\n\nrequire(\"./axis\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Grid view\n\n\necharts.extendComponentView({\n  type: 'grid',\n  render: function render(gridModel, ecModel) {\n    this.group.removeAll();\n\n    if (gridModel.get('show')) {\n      this.group.add(new graphic.Rect({\n        shape: gridModel.coordinateSystem.getRect(),\n        style: zrUtil.defaults({\n          fill: gridModel.get('backgroundColor')\n        }, gridModel.getItemStyle()),\n        silent: true,\n        z2: -1\n      }));\n    }\n  }\n});\necharts.registerPreprocessor(function (option) {\n  // Only create grid when need\n  if (option.xAxis && option.yAxis && !option.grid) {\n    option.grid = {};\n  }\n});","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../../model/Model\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar each = zrUtil.each;\nvar curry = zrUtil.curry; // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n// allAxesInfo should be updated when setOption performed.\n\nfunction collect(ecModel, api) {\n  var result = {\n    /**\n     * key: makeKey(axis.model)\n     * value: {\n     *      axis,\n     *      coordSys,\n     *      axisPointerModel,\n     *      triggerTooltip,\n     *      involveSeries,\n     *      snap,\n     *      seriesModels,\n     *      seriesDataCount\n     * }\n     */\n    axesInfo: {},\n    seriesInvolved: false,\n\n    /**\n     * key: makeKey(coordSys.model)\n     * value: Object: key makeKey(axis.model), value: axisInfo\n     */\n    coordSysAxesInfo: {},\n    coordSysMap: {}\n  };\n  collectAxesInfo(result, ecModel, api); // Check seriesInvolved for performance, in case too many series in some chart.\n\n  result.seriesInvolved && collectSeriesInfo(result, ecModel);\n  return result;\n}\n\nfunction collectAxesInfo(result, ecModel, api) {\n  var globalTooltipModel = ecModel.getComponent('tooltip');\n  var globalAxisPointerModel = ecModel.getComponent('axisPointer'); // links can only be set on global.\n\n  var linksOption = globalAxisPointerModel.get('link', true) || [];\n  var linkGroups = []; // Collect axes info.\n\n  each(api.getCoordinateSystems(), function (coordSys) {\n    // Some coordinate system do not support axes, like geo.\n    if (!coordSys.axisPointerEnabled) {\n      return;\n    }\n\n    var coordSysKey = makeKey(coordSys.model);\n    var axesInfoInCoordSys = result.coordSysAxesInfo[coordSysKey] = {};\n    result.coordSysMap[coordSysKey] = coordSys; // Set tooltip (like 'cross') is a convienent way to show axisPointer\n    // for user. So we enable seting tooltip on coordSys model.\n\n    var coordSysModel = coordSys.model;\n    var baseTooltipModel = coordSysModel.getModel('tooltip', globalTooltipModel);\n    each(coordSys.getAxes(), curry(saveTooltipAxisInfo, false, null)); // If axis tooltip used, choose tooltip axis for each coordSys.\n    // Notice this case: coordSys is `grid` but not `cartesian2D` here.\n\n    if (coordSys.getTooltipAxes && globalTooltipModel // If tooltip.showContent is set as false, tooltip will not\n    // show but axisPointer will show as normal.\n    && baseTooltipModel.get('show')) {\n      // Compatible with previous logic. But series.tooltip.trigger: 'axis'\n      // or series.data[n].tooltip.trigger: 'axis' are not support any more.\n      var triggerAxis = baseTooltipModel.get('trigger') === 'axis';\n      var cross = baseTooltipModel.get('axisPointer.type') === 'cross';\n      var tooltipAxes = coordSys.getTooltipAxes(baseTooltipModel.get('axisPointer.axis'));\n\n      if (triggerAxis || cross) {\n        each(tooltipAxes.baseAxes, curry(saveTooltipAxisInfo, cross ? 'cross' : true, triggerAxis));\n      }\n\n      if (cross) {\n        each(tooltipAxes.otherAxes, curry(saveTooltipAxisInfo, 'cross', false));\n      }\n    } // fromTooltip: true | false | 'cross'\n    // triggerTooltip: true | false | null\n\n\n    function saveTooltipAxisInfo(fromTooltip, triggerTooltip, axis) {\n      var axisPointerModel = axis.model.getModel('axisPointer', globalAxisPointerModel);\n      var axisPointerShow = axisPointerModel.get('show');\n\n      if (!axisPointerShow || axisPointerShow === 'auto' && !fromTooltip && !isHandleTrigger(axisPointerModel)) {\n        return;\n      }\n\n      if (triggerTooltip == null) {\n        triggerTooltip = axisPointerModel.get('triggerTooltip');\n      }\n\n      axisPointerModel = fromTooltip ? makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) : axisPointerModel;\n      var snap = axisPointerModel.get('snap');\n      var key = makeKey(axis.model);\n      var involveSeries = triggerTooltip || snap || axis.type === 'category'; // If result.axesInfo[key] exist, override it (tooltip has higher priority).\n\n      var axisInfo = result.axesInfo[key] = {\n        key: key,\n        axis: axis,\n        coordSys: coordSys,\n        axisPointerModel: axisPointerModel,\n        triggerTooltip: triggerTooltip,\n        involveSeries: involveSeries,\n        snap: snap,\n        useHandle: isHandleTrigger(axisPointerModel),\n        seriesModels: []\n      };\n      axesInfoInCoordSys[key] = axisInfo;\n      result.seriesInvolved |= involveSeries;\n      var groupIndex = getLinkGroupIndex(linksOption, axis);\n\n      if (groupIndex != null) {\n        var linkGroup = linkGroups[groupIndex] || (linkGroups[groupIndex] = {\n          axesInfo: {}\n        });\n        linkGroup.axesInfo[key] = axisInfo;\n        linkGroup.mapper = linksOption[groupIndex].mapper;\n        axisInfo.linkGroup = linkGroup;\n      }\n    }\n  });\n}\n\nfunction makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) {\n  var tooltipAxisPointerModel = baseTooltipModel.getModel('axisPointer');\n  var volatileOption = {};\n  each(['type', 'snap', 'lineStyle', 'shadowStyle', 'label', 'animation', 'animationDurationUpdate', 'animationEasingUpdate', 'z'], function (field) {\n    volatileOption[field] = zrUtil.clone(tooltipAxisPointerModel.get(field));\n  }); // category axis do not auto snap, otherwise some tick that do not\n  // has value can not be hovered. value/time/log axis default snap if\n  // triggered from tooltip and trigger tooltip.\n\n  volatileOption.snap = axis.type !== 'category' && !!triggerTooltip; // Compatibel with previous behavior, tooltip axis do not show label by default.\n  // Only these properties can be overrided from tooltip to axisPointer.\n\n  if (tooltipAxisPointerModel.get('type') === 'cross') {\n    volatileOption.type = 'line';\n  }\n\n  var labelOption = volatileOption.label || (volatileOption.label = {}); // Follow the convention, do not show label when triggered by tooltip by default.\n\n  labelOption.show == null && (labelOption.show = false);\n\n  if (fromTooltip === 'cross') {\n    // When 'cross', both axes show labels.\n    var tooltipAxisPointerLabelShow = tooltipAxisPointerModel.get('label.show');\n    labelOption.show = tooltipAxisPointerLabelShow != null ? tooltipAxisPointerLabelShow : true; // If triggerTooltip, this is a base axis, which should better not use cross style\n    // (cross style is dashed by default)\n\n    if (!triggerTooltip) {\n      var crossStyle = volatileOption.lineStyle = tooltipAxisPointerModel.get('crossStyle');\n      crossStyle && zrUtil.defaults(labelOption, crossStyle.textStyle);\n    }\n  }\n\n  return axis.model.getModel('axisPointer', new Model(volatileOption, globalAxisPointerModel, ecModel));\n}\n\nfunction collectSeriesInfo(result, ecModel) {\n  // Prepare data for axis trigger\n  ecModel.eachSeries(function (seriesModel) {\n    // Notice this case: this coordSys is `cartesian2D` but not `grid`.\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesTooltipTrigger = seriesModel.get('tooltip.trigger', true);\n    var seriesTooltipShow = seriesModel.get('tooltip.show', true);\n\n    if (!coordSys || seriesTooltipTrigger === 'none' || seriesTooltipTrigger === false || seriesTooltipTrigger === 'item' || seriesTooltipShow === false || seriesModel.get('axisPointer.show', true) === false) {\n      return;\n    }\n\n    each(result.coordSysAxesInfo[makeKey(coordSys.model)], function (axisInfo) {\n      var axis = axisInfo.axis;\n\n      if (coordSys.getAxis(axis.dim) === axis) {\n        axisInfo.seriesModels.push(seriesModel);\n        axisInfo.seriesDataCount == null && (axisInfo.seriesDataCount = 0);\n        axisInfo.seriesDataCount += seriesModel.getData().count();\n      }\n    });\n  }, this);\n}\n/**\n * For example:\n * {\n *     axisPointer: {\n *         links: [{\n *             xAxisIndex: [2, 4],\n *             yAxisIndex: 'all'\n *         }, {\n *             xAxisId: ['a5', 'a7'],\n *             xAxisName: 'xxx'\n *         }]\n *     }\n * }\n */\n\n\nfunction getLinkGroupIndex(linksOption, axis) {\n  var axisModel = axis.model;\n  var dim = axis.dim;\n\n  for (var i = 0; i < linksOption.length; i++) {\n    var linkOption = linksOption[i] || {};\n\n    if (checkPropInLink(linkOption[dim + 'AxisId'], axisModel.id) || checkPropInLink(linkOption[dim + 'AxisIndex'], axisModel.componentIndex) || checkPropInLink(linkOption[dim + 'AxisName'], axisModel.name)) {\n      return i;\n    }\n  }\n}\n\nfunction checkPropInLink(linkPropValue, axisPropValue) {\n  return linkPropValue === 'all' || zrUtil.isArray(linkPropValue) && zrUtil.indexOf(linkPropValue, axisPropValue) >= 0 || linkPropValue === axisPropValue;\n}\n\nfunction fixValue(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n\n  if (!axisInfo) {\n    return;\n  }\n\n  var axisPointerModel = axisInfo.axisPointerModel;\n  var scale = axisInfo.axis.scale;\n  var option = axisPointerModel.option;\n  var status = axisPointerModel.get('status');\n  var value = axisPointerModel.get('value'); // Parse init value for category and time axis.\n\n  if (value != null) {\n    value = scale.parse(value);\n  }\n\n  var useHandle = isHandleTrigger(axisPointerModel); // If `handle` used, `axisPointer` will always be displayed, so value\n  // and status should be initialized.\n\n  if (status == null) {\n    option.status = useHandle ? 'show' : 'hide';\n  }\n\n  var extent = scale.getExtent().slice();\n  extent[0] > extent[1] && extent.reverse();\n\n  if ( // Pick a value on axis when initializing.\n  value == null // If both `handle` and `dataZoom` are used, value may be out of axis extent,\n  // where we should re-pick a value to keep `handle` displaying normally.\n  || value > extent[1]) {\n    // Make handle displayed on the end of the axis when init, which looks better.\n    value = extent[1];\n  }\n\n  if (value < extent[0]) {\n    value = extent[0];\n  }\n\n  option.value = value;\n\n  if (useHandle) {\n    option.status = axisInfo.axis.scale.isBlank() ? 'hide' : 'show';\n  }\n}\n\nfunction getAxisInfo(axisModel) {\n  var coordSysAxesInfo = (axisModel.ecModel.getComponent('axisPointer') || {}).coordSysAxesInfo;\n  return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];\n}\n\nfunction getAxisPointerModel(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  return axisInfo && axisInfo.axisPointerModel;\n}\n\nfunction isHandleTrigger(axisPointerModel) {\n  return !!axisPointerModel.get('handle.show');\n}\n/**\n * @param {module:echarts/model/Model} model\n * @return {string} unique key\n */\n\n\nfunction makeKey(model) {\n  return model.type + '||' + model.id;\n}\n\nexports.collect = collect;\nexports.fixValue = fixValue;\nexports.getAxisInfo = getAxisInfo;\nexports.getAxisPointerModel = getAxisPointerModel;\nexports.makeKey = makeKey;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isObject = _util.isObject;\nvar each = _util.each;\nvar map = _util.map;\nvar indexOf = _util.indexOf;\nvar retrieve = _util.retrieve;\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\n\nvar _axisHelper = require(\"../../coord/axisHelper\");\n\nvar createScaleByModel = _axisHelper.createScaleByModel;\nvar ifAxisCrossZero = _axisHelper.ifAxisCrossZero;\nvar niceScaleExtent = _axisHelper.niceScaleExtent;\nvar estimateLabelUnionRect = _axisHelper.estimateLabelUnionRect;\n\nvar Cartesian2D = require(\"./Cartesian2D\");\n\nvar Axis2D = require(\"./Axis2D\");\n\nvar CoordinateSystem = require(\"../../CoordinateSystem\");\n\nvar _dataStackHelper = require(\"../../data/helper/dataStackHelper\");\n\nvar getStackedDimension = _dataStackHelper.getStackedDimension;\n\nrequire(\"./GridModel\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Grid is a region which contains at most 4 cartesian systems\n *\n * TODO Default cartesian\n */\n// Depends on GridModel, AxisModel, which performs preprocess.\n\n/**\n * Check if the axis is used in the specified grid\n * @inner\n */\n\n\nfunction isAxisUsedInTheGrid(axisModel, gridModel, ecModel) {\n  return axisModel.getCoordSysModel() === gridModel;\n}\n\nfunction Grid(gridModel, ecModel, api) {\n  /**\n   * @type {Object.<string, module:echarts/coord/cartesian/Cartesian2D>}\n   * @private\n   */\n  this._coordsMap = {};\n  /**\n   * @type {Array.<module:echarts/coord/cartesian/Cartesian>}\n   * @private\n   */\n\n  this._coordsList = [];\n  /**\n   * @type {Object.<string, Array.<module:echarts/coord/cartesian/Axis2D>>}\n   * @private\n   */\n\n  this._axesMap = {};\n  /**\n   * @type {Array.<module:echarts/coord/cartesian/Axis2D>}\n   * @private\n   */\n\n  this._axesList = [];\n\n  this._initCartesian(gridModel, ecModel, api);\n\n  this.model = gridModel;\n}\n\nvar gridProto = Grid.prototype;\ngridProto.type = 'grid';\ngridProto.axisPointerEnabled = true;\n\ngridProto.getRect = function () {\n  return this._rect;\n};\n\ngridProto.update = function (ecModel, api) {\n  var axesMap = this._axesMap;\n\n  this._updateScale(ecModel, this.model);\n\n  each(axesMap.x, function (xAxis) {\n    niceScaleExtent(xAxis.scale, xAxis.model);\n  });\n  each(axesMap.y, function (yAxis) {\n    niceScaleExtent(yAxis.scale, yAxis.model);\n  }); // Key: axisDim_axisIndex, value: boolean, whether onZero target.\n\n  var onZeroRecords = {};\n  each(axesMap.x, function (xAxis) {\n    fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\n  });\n  each(axesMap.y, function (yAxis) {\n    fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\n  }); // Resize again if containLabel is enabled\n  // FIXME It may cause getting wrong grid size in data processing stage\n\n  this.resize(this.model, api);\n};\n\nfunction fixAxisOnZero(axesMap, otherAxisDim, axis, onZeroRecords) {\n  axis.getAxesOnZeroOf = function () {\n    // TODO: onZero of multiple axes.\n    return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\n  }; // onZero can not be enabled in these two situations:\n  // 1. When any other axis is a category axis.\n  // 2. When no axis is cross 0 point.\n\n\n  var otherAxes = axesMap[otherAxisDim];\n  var otherAxisOnZeroOf;\n  var axisModel = axis.model;\n  var onZero = axisModel.get('axisLine.onZero');\n  var onZeroAxisIndex = axisModel.get('axisLine.onZeroAxisIndex');\n\n  if (!onZero) {\n    return;\n  } // If target axis is specified.\n\n\n  if (onZeroAxisIndex != null) {\n    if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\n      otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\n    }\n  } else {\n    // Find the first available other axis.\n    for (var idx in otherAxes) {\n      if (otherAxes.hasOwnProperty(idx) && canOnZeroToAxis(otherAxes[idx]) // Consider that two Y axes on one value axis,\n      // if both onZero, the two Y axes overlap.\n      && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\n        otherAxisOnZeroOf = otherAxes[idx];\n        break;\n      }\n    }\n  }\n\n  if (otherAxisOnZeroOf) {\n    onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\n  }\n\n  function getOnZeroRecordKey(axis) {\n    return axis.dim + '_' + axis.index;\n  }\n}\n\nfunction canOnZeroToAxis(axis) {\n  return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\n}\n/**\n * Resize the grid\n * @param {module:echarts/coord/cartesian/GridModel} gridModel\n * @param {module:echarts/ExtensionAPI} api\n */\n\n\ngridProto.resize = function (gridModel, api, ignoreContainLabel) {\n  var gridRect = getLayoutRect(gridModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n  this._rect = gridRect;\n  var axesList = this._axesList;\n  adjustAxes(); // Minus label size\n\n  if (!ignoreContainLabel && gridModel.get('containLabel')) {\n    each(axesList, function (axis) {\n      if (!axis.model.get('axisLabel.inside')) {\n        var labelUnionRect = estimateLabelUnionRect(axis);\n\n        if (labelUnionRect) {\n          var dim = axis.isHorizontal() ? 'height' : 'width';\n          var margin = axis.model.get('axisLabel.margin');\n          gridRect[dim] -= labelUnionRect[dim] + margin;\n\n          if (axis.position === 'top') {\n            gridRect.y += labelUnionRect.height + margin;\n          } else if (axis.position === 'left') {\n            gridRect.x += labelUnionRect.width + margin;\n          }\n        }\n      }\n    });\n    adjustAxes();\n  }\n\n  function adjustAxes() {\n    each(axesList, function (axis) {\n      var isHorizontal = axis.isHorizontal();\n      var extent = isHorizontal ? [0, gridRect.width] : [0, gridRect.height];\n      var idx = axis.inverse ? 1 : 0;\n      axis.setExtent(extent[idx], extent[1 - idx]);\n      updateAxisTransform(axis, isHorizontal ? gridRect.x : gridRect.y);\n    });\n  }\n};\n/**\n * @param {string} axisType\n * @param {number} [axisIndex]\n */\n\n\ngridProto.getAxis = function (axisType, axisIndex) {\n  var axesMapOnDim = this._axesMap[axisType];\n\n  if (axesMapOnDim != null) {\n    if (axisIndex == null) {\n      // Find first axis\n      for (var name in axesMapOnDim) {\n        if (axesMapOnDim.hasOwnProperty(name)) {\n          return axesMapOnDim[name];\n        }\n      }\n    }\n\n    return axesMapOnDim[axisIndex];\n  }\n};\n/**\n * @return {Array.<module:echarts/coord/Axis>}\n */\n\n\ngridProto.getAxes = function () {\n  return this._axesList.slice();\n};\n/**\n * Usage:\n *      grid.getCartesian(xAxisIndex, yAxisIndex);\n *      grid.getCartesian(xAxisIndex);\n *      grid.getCartesian(null, yAxisIndex);\n *      grid.getCartesian({xAxisIndex: ..., yAxisIndex: ...});\n *\n * @param {number|Object} [xAxisIndex]\n * @param {number} [yAxisIndex]\n */\n\n\ngridProto.getCartesian = function (xAxisIndex, yAxisIndex) {\n  if (xAxisIndex != null && yAxisIndex != null) {\n    var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n    return this._coordsMap[key];\n  }\n\n  if (isObject(xAxisIndex)) {\n    yAxisIndex = xAxisIndex.yAxisIndex;\n    xAxisIndex = xAxisIndex.xAxisIndex;\n  } // When only xAxisIndex or yAxisIndex given, find its first cartesian.\n\n\n  for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\n    if (coordList[i].getAxis('x').index === xAxisIndex || coordList[i].getAxis('y').index === yAxisIndex) {\n      return coordList[i];\n    }\n  }\n};\n\ngridProto.getCartesians = function () {\n  return this._coordsList.slice();\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.convertToPixel = function (ecModel, finder, value) {\n  var target = this._findConvertTarget(ecModel, finder);\n\n  return target.cartesian ? target.cartesian.dataToPoint(value) : target.axis ? target.axis.toGlobalCoord(target.axis.dataToCoord(value)) : null;\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.convertFromPixel = function (ecModel, finder, value) {\n  var target = this._findConvertTarget(ecModel, finder);\n\n  return target.cartesian ? target.cartesian.pointToData(value) : target.axis ? target.axis.coordToData(target.axis.toLocalCoord(value)) : null;\n};\n/**\n * @inner\n */\n\n\ngridProto._findConvertTarget = function (ecModel, finder) {\n  var seriesModel = finder.seriesModel;\n  var xAxisModel = finder.xAxisModel || seriesModel && seriesModel.getReferringComponents('xAxis')[0];\n  var yAxisModel = finder.yAxisModel || seriesModel && seriesModel.getReferringComponents('yAxis')[0];\n  var gridModel = finder.gridModel;\n  var coordsList = this._coordsList;\n  var cartesian;\n  var axis;\n\n  if (seriesModel) {\n    cartesian = seriesModel.coordinateSystem;\n    indexOf(coordsList, cartesian) < 0 && (cartesian = null);\n  } else if (xAxisModel && yAxisModel) {\n    cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n  } else if (xAxisModel) {\n    axis = this.getAxis('x', xAxisModel.componentIndex);\n  } else if (yAxisModel) {\n    axis = this.getAxis('y', yAxisModel.componentIndex);\n  } // Lowest priority.\n  else if (gridModel) {\n      var grid = gridModel.coordinateSystem;\n\n      if (grid === this) {\n        cartesian = this._coordsList[0];\n      }\n    }\n\n  return {\n    cartesian: cartesian,\n    axis: axis\n  };\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.containPoint = function (point) {\n  var coord = this._coordsList[0];\n\n  if (coord) {\n    return coord.containPoint(point);\n  }\n};\n/**\n * Initialize cartesian coordinate systems\n * @private\n */\n\n\ngridProto._initCartesian = function (gridModel, ecModel, api) {\n  var axisPositionUsed = {\n    left: false,\n    right: false,\n    top: false,\n    bottom: false\n  };\n  var axesMap = {\n    x: {},\n    y: {}\n  };\n  var axesCount = {\n    x: 0,\n    y: 0\n  }; /// Create axis\n\n  ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\n  ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\n\n  if (!axesCount.x || !axesCount.y) {\n    // Roll back when there no either x or y axis\n    this._axesMap = {};\n    this._axesList = [];\n    return;\n  }\n\n  this._axesMap = axesMap; /// Create cartesian2d\n\n  each(axesMap.x, function (xAxis, xAxisIndex) {\n    each(axesMap.y, function (yAxis, yAxisIndex) {\n      var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n      var cartesian = new Cartesian2D(key);\n      cartesian.grid = this;\n      cartesian.model = gridModel;\n      this._coordsMap[key] = cartesian;\n\n      this._coordsList.push(cartesian);\n\n      cartesian.addAxis(xAxis);\n      cartesian.addAxis(yAxis);\n    }, this);\n  }, this);\n\n  function createAxisCreator(axisType) {\n    return function (axisModel, idx) {\n      if (!isAxisUsedInTheGrid(axisModel, gridModel, ecModel)) {\n        return;\n      }\n\n      var axisPosition = axisModel.get('position');\n\n      if (axisType === 'x') {\n        // Fix position\n        if (axisPosition !== 'top' && axisPosition !== 'bottom') {\n          // Default bottom of X\n          axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\n        }\n      } else {\n        // Fix position\n        if (axisPosition !== 'left' && axisPosition !== 'right') {\n          // Default left of Y\n          axisPosition = axisPositionUsed.left ? 'right' : 'left';\n        }\n      }\n\n      axisPositionUsed[axisPosition] = true;\n      var axis = new Axis2D(axisType, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\n      var isCategory = axis.type === 'category';\n      axis.onBand = isCategory && axisModel.get('boundaryGap');\n      axis.inverse = axisModel.get('inverse'); // Inject axis into axisModel\n\n      axisModel.axis = axis; // Inject axisModel into axis\n\n      axis.model = axisModel; // Inject grid info axis\n\n      axis.grid = this; // Index of axis, can be used as key\n\n      axis.index = idx;\n\n      this._axesList.push(axis);\n\n      axesMap[axisType][idx] = axis;\n      axesCount[axisType]++;\n    };\n  }\n};\n/**\n * Update cartesian properties from series\n * @param  {module:echarts/model/Option} option\n * @private\n */\n\n\ngridProto._updateScale = function (ecModel, gridModel) {\n  // Reset scale\n  each(this._axesList, function (axis) {\n    axis.scale.setExtent(Infinity, -Infinity);\n  });\n  ecModel.eachSeries(function (seriesModel) {\n    if (isCartesian2D(seriesModel)) {\n      var axesModels = findAxesModels(seriesModel, ecModel);\n      var xAxisModel = axesModels[0];\n      var yAxisModel = axesModels[1];\n\n      if (!isAxisUsedInTheGrid(xAxisModel, gridModel, ecModel) || !isAxisUsedInTheGrid(yAxisModel, gridModel, ecModel)) {\n        return;\n      }\n\n      var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n      var data = seriesModel.getData();\n      var xAxis = cartesian.getAxis('x');\n      var yAxis = cartesian.getAxis('y');\n\n      if (data.type === 'list') {\n        unionExtent(data, xAxis, seriesModel);\n        unionExtent(data, yAxis, seriesModel);\n      }\n    }\n  }, this);\n\n  function unionExtent(data, axis, seriesModel) {\n    each(data.mapDimension(axis.dim, true), function (dim) {\n      axis.scale.unionExtentFromData( // For example, the extent of the orginal dimension\n      // is [0.1, 0.5], the extent of the `stackResultDimension`\n      // is [7, 9], the final extent should not include [0.1, 0.5].\n      data, getStackedDimension(data, dim));\n    });\n  }\n};\n/**\n * @param {string} [dim] 'x' or 'y' or 'auto' or null/undefined\n * @return {Object} {baseAxes: [], otherAxes: []}\n */\n\n\ngridProto.getTooltipAxes = function (dim) {\n  var baseAxes = [];\n  var otherAxes = [];\n  each(this.getCartesians(), function (cartesian) {\n    var baseAxis = dim != null && dim !== 'auto' ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\n    var otherAxis = cartesian.getOtherAxis(baseAxis);\n    indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\n    indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\n  });\n  return {\n    baseAxes: baseAxes,\n    otherAxes: otherAxes\n  };\n};\n/**\n * @inner\n */\n\n\nfunction updateAxisTransform(axis, coordBase) {\n  var axisExtent = axis.getExtent();\n  var axisExtentSum = axisExtent[0] + axisExtent[1]; // Fast transform\n\n  axis.toGlobalCoord = axis.dim === 'x' ? function (coord) {\n    return coord + coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n  axis.toLocalCoord = axis.dim === 'x' ? function (coord) {\n    return coord - coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n}\n\nvar axesTypes = ['xAxis', 'yAxis'];\n/**\n * @inner\n */\n\nfunction findAxesModels(seriesModel, ecModel) {\n  return map(axesTypes, function (axisType) {\n    var axisModel = seriesModel.getReferringComponents(axisType)[0];\n    return axisModel;\n  });\n}\n/**\n * @inner\n */\n\n\nfunction isCartesian2D(seriesModel) {\n  return seriesModel.get('coordinateSystem') === 'cartesian2d';\n}\n\nGrid.create = function (ecModel, api) {\n  var grids = [];\n  ecModel.eachComponent('grid', function (gridModel, idx) {\n    var grid = new Grid(gridModel, ecModel, api);\n    grid.name = 'grid_' + idx; // dataSampling requires axis extent, so resize\n    // should be performed in create stage.\n\n    grid.resize(gridModel, api, true);\n    gridModel.coordinateSystem = grid;\n    grids.push(grid);\n  }); // Inject the coordinateSystems into seriesModel\n\n  ecModel.eachSeries(function (seriesModel) {\n    if (!isCartesian2D(seriesModel)) {\n      return;\n    }\n\n    var axesModels = findAxesModels(seriesModel, ecModel);\n    var xAxisModel = axesModels[0];\n    var yAxisModel = axesModels[1];\n    var gridModel = xAxisModel.getCoordSysModel();\n    var grid = gridModel.coordinateSystem;\n    seriesModel.coordinateSystem = grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n  });\n  return grids;\n}; // For deciding which dimensions to use when creating list data\n\n\nGrid.dimensions = Grid.prototype.dimensions = Cartesian2D.prototype.dimensions;\nCoordinateSystem.register('cartesian2d', Grid);\nvar _default = Grid;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isFunction = _util.isFunction;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nfunction _default(seriesType, defaultSymbolType, legendSymbol) {\n  // Encoding visual for all series include which is filtered for legend drawing\n  return {\n    seriesType: seriesType,\n    // For legend.\n    performRawSeries: true,\n    reset: function reset(seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var symbolType = seriesModel.get('symbol');\n      var symbolSize = seriesModel.get('symbolSize');\n      var keepAspect = seriesModel.get('symbolKeepAspect');\n      var hasSymbolTypeCallback = isFunction(symbolType);\n      var hasSymbolSizeCallback = isFunction(symbolSize);\n      var hasCallback = hasSymbolTypeCallback || hasSymbolSizeCallback;\n      var seriesSymbol = !hasSymbolTypeCallback && symbolType ? symbolType : defaultSymbolType;\n      var seriesSymbolSize = !hasSymbolSizeCallback ? symbolSize : null;\n      data.setVisual({\n        legendSymbol: legendSymbol || seriesSymbol,\n        // If seting callback functions on `symbol` or `symbolSize`, for simplicity and avoiding\n        // to bring trouble, we do not pick a reuslt from one of its calling on data item here,\n        // but just use the default value. Callback on `symbol` or `symbolSize` is convenient in\n        // some cases but generally it is not recommanded.\n        symbol: seriesSymbol,\n        symbolSize: seriesSymbolSize,\n        symbolKeepAspect: keepAspect\n      }); // Only visible series has each data be visual encoded\n\n      if (ecModel.isSeriesFiltered(seriesModel)) {\n        return;\n      }\n\n      function dataEach(data, idx) {\n        if (hasCallback) {\n          var rawValue = seriesModel.getRawValue(idx);\n          var params = seriesModel.getDataParams(idx);\n          hasSymbolTypeCallback && data.setItemVisual(idx, 'symbol', symbolType(rawValue, params));\n          hasSymbolSizeCallback && data.setItemVisual(idx, 'symbolSize', symbolSize(rawValue, params));\n        }\n\n        if (data.hasItemOption) {\n          var itemModel = data.getItemModel(idx);\n          var itemSymbolType = itemModel.getShallow('symbol', true);\n          var itemSymbolSize = itemModel.getShallow('symbolSize', true);\n          var itemSymbolKeepAspect = itemModel.getShallow('symbolKeepAspect', true); // If has item symbol\n\n          if (itemSymbolType != null) {\n            data.setItemVisual(idx, 'symbol', itemSymbolType);\n          }\n\n          if (itemSymbolSize != null) {\n            // PENDING Transform symbolSize ?\n            data.setItemVisual(idx, 'symbolSize', itemSymbolSize);\n          }\n\n          if (itemSymbolKeepAspect != null) {\n            data.setItemVisual(idx, 'symbolKeepAspect', itemSymbolKeepAspect);\n          }\n        }\n      }\n\n      return {\n        dataEach: data.hasItemOption || hasCallback ? dataEach : null\n      };\n    }\n  };\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _util = require(\"zrender/lib/core/util\");\n\nvar map = _util.map;\n\nvar createRenderPlanner = require(\"../chart/helper/createRenderPlanner\");\n\nvar _dataStackHelper = require(\"../data/helper/dataStackHelper\");\n\nvar isDimensionStacked = _dataStackHelper.isDimensionStacked;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Float32Array */\n\nfunction _default(seriesType) {\n  return {\n    seriesType: seriesType,\n    plan: createRenderPlanner(),\n    reset: function reset(seriesModel) {\n      var data = seriesModel.getData();\n      var coordSys = seriesModel.coordinateSystem;\n      var pipelineContext = seriesModel.pipelineContext;\n      var isLargeRender = pipelineContext.large;\n\n      if (!coordSys) {\n        return;\n      }\n\n      var dims = map(coordSys.dimensions, function (dim) {\n        return data.mapDimension(dim);\n      }).slice(0, 2);\n      var dimLen = dims.length;\n      var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n      if (isDimensionStacked(data, dims[0]\n      /*, dims[1]*/\n      )) {\n        dims[0] = stackResultDim;\n      }\n\n      if (isDimensionStacked(data, dims[1]\n      /*, dims[0]*/\n      )) {\n        dims[1] = stackResultDim;\n      }\n\n      function progress(params, data) {\n        var segCount = params.end - params.start;\n        var points = isLargeRender && new Float32Array(segCount * dimLen);\n\n        for (var i = params.start, offset = 0, tmpIn = [], tmpOut = []; i < params.end; i++) {\n          var point;\n\n          if (dimLen === 1) {\n            var x = data.get(dims[0], i);\n            point = !isNaN(x) && coordSys.dataToPoint(x, null, tmpOut);\n          } else {\n            var x = tmpIn[0] = data.get(dims[0], i);\n            var y = tmpIn[1] = data.get(dims[1], i); // Also {Array.<number>}, not undefined to avoid if...else... statement\n\n            point = !isNaN(x) && !isNaN(y) && coordSys.dataToPoint(tmpIn, null, tmpOut);\n          }\n\n          if (isLargeRender) {\n            points[offset++] = point ? point[0] : NaN;\n            points[offset++] = point ? point[1] : NaN;\n          } else {\n            data.setItemLayout(i, point && point.slice() || [NaN, NaN]);\n          }\n        }\n\n        isLargeRender && data.setLayout('symbolPoints', points);\n      }\n\n      return dimLen && {\n        progress: progress\n      };\n    }\n  };\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar ComponentModel = require(\"../../model/Component\");\n\nvar axisModelCreator = require(\"../axisModelCreator\");\n\nvar axisModelCommonMixin = require(\"../axisModelCommonMixin\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar AxisModel = ComponentModel.extend({\n  type: 'cartesian2dAxis',\n\n  /**\n   * @type {module:echarts/coord/cartesian/Axis2D}\n   */\n  axis: null,\n\n  /**\n   * @override\n   */\n  init: function init() {\n    AxisModel.superApply(this, 'init', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   */\n  mergeOption: function mergeOption() {\n    AxisModel.superApply(this, 'mergeOption', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   */\n  restoreData: function restoreData() {\n    AxisModel.superApply(this, 'restoreData', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   * @return {module:echarts/model/Component}\n   */\n  getCoordSysModel: function getCoordSysModel() {\n    return this.ecModel.queryComponents({\n      mainType: 'grid',\n      index: this.option.gridIndex,\n      id: this.option.gridId\n    })[0];\n  }\n});\n\nfunction getAxisType(axisDim, option) {\n  // Default axis with data is category axis\n  return option.type || (option.data ? 'category' : 'value');\n}\n\nzrUtil.merge(AxisModel.prototype, axisModelCommonMixin);\nvar extraOption = {\n  // gridIndex: 0,\n  // gridId: '',\n  // Offset is for multiple axis on the same position\n  offset: 0\n};\naxisModelCreator('x', AxisModel, getAxisType, extraOption);\naxisModelCreator('y', AxisModel, getAxisType, extraOption);\nvar _default = AxisModel;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar SeriesModel = require(\"../../model/Series\");\n\nvar createListFromArray = require(\"../helper/createListFromArray\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar _default = SeriesModel.extend({\n  type: 'series.__base_bar__',\n  getInitialData: function getInitialData(option, ecModel) {\n    return createListFromArray(this.getSource(), this);\n  },\n  getMarkerPosition: function getMarkerPosition(value) {\n    var coordSys = this.coordinateSystem;\n\n    if (coordSys) {\n      // PENDING if clamp ?\n      var pt = coordSys.dataToPoint(coordSys.clampData(value));\n      var data = this.getData();\n      var offset = data.getLayout('offset');\n      var size = data.getLayout('size');\n      var offsetIndex = coordSys.getBaseAxis().isHorizontal() ? 0 : 1;\n      pt[offsetIndex] += offset + size / 2;\n      return pt;\n    }\n\n    return [NaN, NaN];\n  },\n  defaultOption: {\n    zlevel: 0,\n    // \n    z: 2,\n    // \n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // stack: null\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // 0\n    barMinHeight: 0,\n    // 0\n    barMinAngle: 0,\n    // cursor: null,\n    large: false,\n    largeThreshold: 400,\n    progressive: 3e3,\n    progressiveChunkMode: 'mod',\n    // barMaxWidth: null,\n    // \n    // barWidth: null,\n    // 30%\n    // barGap: '30%',\n    // 20%\n    // barCategoryGap: '20%',\n    // label: {\n    //      show: false\n    // },\n    itemStyle: {},\n    emphasis: {}\n  }\n});\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar graphic = require(\"../../util/graphic\");\n\nvar _labelHelper = require(\"../helper/labelHelper\");\n\nvar getDefaultLabel = _labelHelper.getDefaultLabel;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nfunction setLabel(normalStyle, hoverStyle, itemModel, color, seriesModel, dataIndex, labelPositionOutside) {\n  var labelModel = itemModel.getModel('label');\n  var hoverLabelModel = itemModel.getModel('emphasis.label');\n  graphic.setLabelStyle(normalStyle, hoverStyle, labelModel, hoverLabelModel, {\n    labelFetcher: seriesModel,\n    labelDataIndex: dataIndex,\n    defaultText: getDefaultLabel(seriesModel.getData(), dataIndex),\n    isRectText: true,\n    autoColor: color\n  });\n  fixPosition(normalStyle);\n  fixPosition(hoverStyle);\n}\n\nfunction fixPosition(style, labelPositionOutside) {\n  if (style.textPosition === 'outside') {\n    style.textPosition = labelPositionOutside;\n  }\n}\n\nexports.setLabel = setLabel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _dataProvider = require(\"../../data/helper/dataProvider\");\n\nvar retrieveRawValue = _dataProvider.retrieveRawValue;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/data/List} data\n * @param {number} dataIndex\n * @return {string} label string. Not null/undefined\n */\n\nfunction getDefaultLabel(data, dataIndex) {\n  var labelDims = data.mapDimension('defaultedLabel', true);\n  var len = labelDims.length; // Simple optimization (in lots of cases, label dims length is 1)\n\n  if (len === 1) {\n    return retrieveRawValue(data, dataIndex, labelDims[0]);\n  } else if (len) {\n    var vals = [];\n\n    for (var i = 0; i < labelDims.length; i++) {\n      var val = retrieveRawValue(data, dataIndex, labelDims[i]);\n      vals.push(val);\n    }\n\n    return vals.join(' ');\n  }\n}\n\nexports.getDefaultLabel = getDefaultLabel;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar graphic = require(\"../../util/graphic\");\n\nvar _number = require(\"../../util/number\");\n\nvar round = _number.round;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nfunction createGridClipPath(cartesian, hasAnimation, seriesModel) {\n  var rect = cartesian.getArea();\n  var isHorizontal = cartesian.getBaseAxis().isHorizontal();\n  var x = rect.x;\n  var y = rect.y;\n  var width = rect.width;\n  var height = rect.height;\n  var lineWidth = seriesModel.get('lineStyle.width') || 2; // Expand the clip path a bit to avoid the border is clipped and looks thinner\n\n  x -= lineWidth / 2;\n  y -= lineWidth / 2;\n  width += lineWidth;\n  height += lineWidth;\n  var clipPath = new graphic.Rect({\n    shape: {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    }\n  });\n\n  if (hasAnimation) {\n    clipPath.shape[isHorizontal ? 'width' : 'height'] = 0;\n    graphic.initProps(clipPath, {\n      shape: {\n        width: width,\n        height: height\n      }\n    }, seriesModel);\n  }\n\n  return clipPath;\n}\n\nfunction createPolarClipPath(polar, hasAnimation, seriesModel) {\n  var sectorArea = polar.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n\n  var clipPath = new graphic.Sector({\n    shape: {\n      cx: round(polar.cx, 1),\n      cy: round(polar.cy, 1),\n      r0: round(sectorArea.r0, 1),\n      r: round(sectorArea.r, 1),\n      startAngle: sectorArea.startAngle,\n      endAngle: sectorArea.endAngle,\n      clockwise: sectorArea.clockwise\n    }\n  });\n\n  if (hasAnimation) {\n    clipPath.shape.endAngle = sectorArea.startAngle;\n    graphic.initProps(clipPath, {\n      shape: {\n        endAngle: sectorArea.endAngle\n      }\n    }, seriesModel);\n  }\n\n  return clipPath;\n}\n\nfunction createClipPath(coordSys, hasAnimation, seriesModel) {\n  if (!coordSys) {\n    return null;\n  } else if (coordSys.type === 'polar') {\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  } else if (coordSys.type === 'cartesian2d') {\n    return createGridClipPath(coordSys, hasAnimation, seriesModel);\n  }\n\n  return null;\n}\n\nexports.createGridClipPath = createGridClipPath;\nexports.createPolarClipPath = createPolarClipPath;\nexports.createClipPath = createClipPath;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _util = require(\"zrender/lib/core/util\");\n\nvar retrieve = _util.retrieve;\nvar defaults = _util.defaults;\nvar extend = _util.extend;\nvar each = _util.each;\n\nvar formatUtil = require(\"../../util/format\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar Model = require(\"../../model/Model\");\n\nvar _number = require(\"../../util/number\");\n\nvar isRadianAroundZero = _number.isRadianAroundZero;\nvar remRadian = _number.remRadian;\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar matrixUtil = require(\"zrender/lib/core/matrix\");\n\nvar _vector = require(\"zrender/lib/core/vector\");\n\nvar v2ApplyTransform = _vector.applyTransform;\n\nvar _axisHelper = require(\"../../coord/axisHelper\");\n\nvar shouldShowAllLabels = _axisHelper.shouldShowAllLabels;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar PI = Math.PI;\n/**\n * A final axis is translated and rotated from a \"standard axis\".\n * So opt.position and opt.rotation is required.\n *\n * A standard axis is and axis from [0, 0] to [0, axisExtent[1]],\n * for example: (0, 0) ------------> (0, 50)\n *\n * nameDirection or tickDirection or labelDirection is 1 means tick\n * or label is below the standard axis, whereas is -1 means above\n * the standard axis. labelOffset means offset between label and axis,\n * which is useful when 'onZero', where axisLabel is in the grid and\n * label in outside grid.\n *\n * Tips: like always,\n * positive rotation represents anticlockwise, and negative rotation\n * represents clockwise.\n * The direction of position coordinate is the same as the direction\n * of screen coordinate.\n *\n * Do not need to consider axis 'inverse', which is auto processed by\n * axis extent.\n *\n * @param {module:zrender/container/Group} group\n * @param {Object} axisModel\n * @param {Object} opt Standard axis parameters.\n * @param {Array.<number>} opt.position [x, y]\n * @param {number} opt.rotation by radian\n * @param {number} [opt.nameDirection=1] 1 or -1 Used when nameLocation is 'middle' or 'center'.\n * @param {number} [opt.tickDirection=1] 1 or -1\n * @param {number} [opt.labelDirection=1] 1 or -1\n * @param {number} [opt.labelOffset=0] Usefull when onZero.\n * @param {string} [opt.axisLabelShow] default get from axisModel.\n * @param {string} [opt.axisName] default get from axisModel.\n * @param {number} [opt.axisNameAvailableWidth]\n * @param {number} [opt.labelRotate] by degree, default get from axisModel.\n * @param {number} [opt.strokeContainThreshold] Default label interval when label\n * @param {number} [opt.nameTruncateMaxWidth]\n */\n\nvar AxisBuilder = function AxisBuilder(axisModel, opt) {\n  /**\n   * @readOnly\n   */\n  this.opt = opt;\n  /**\n   * @readOnly\n   */\n\n  this.axisModel = axisModel; // Default value\n\n  defaults(opt, {\n    labelOffset: 0,\n    nameDirection: 1,\n    tickDirection: 1,\n    labelDirection: 1,\n    silent: true\n  });\n  /**\n   * @readOnly\n   */\n\n  this.group = new graphic.Group(); // FIXME Not use a seperate text group?\n\n  var dumbGroup = new graphic.Group({\n    position: opt.position.slice(),\n    rotation: opt.rotation\n  }); // this.group.add(dumbGroup);\n  // this._dumbGroup = dumbGroup;\n\n  dumbGroup.updateTransform();\n  this._transform = dumbGroup.transform;\n  this._dumbGroup = dumbGroup;\n};\n\nAxisBuilder.prototype = {\n  constructor: AxisBuilder,\n  hasBuilder: function hasBuilder(name) {\n    return !!builders[name];\n  },\n  add: function add(name) {\n    builders[name].call(this);\n  },\n  getGroup: function getGroup() {\n    return this.group;\n  }\n};\nvar builders = {\n  /**\n   * @private\n   */\n  axisLine: function axisLine() {\n    var opt = this.opt;\n    var axisModel = this.axisModel;\n\n    if (!axisModel.get('axisLine.show')) {\n      return;\n    }\n\n    var extent = this.axisModel.axis.getExtent();\n    var matrix = this._transform;\n    var pt1 = [extent[0], 0];\n    var pt2 = [extent[1], 0];\n\n    if (matrix) {\n      v2ApplyTransform(pt1, pt1, matrix);\n      v2ApplyTransform(pt2, pt2, matrix);\n    }\n\n    var lineStyle = extend({\n      lineCap: 'round'\n    }, axisModel.getModel('axisLine.lineStyle').getLineStyle());\n    this.group.add(new graphic.Line({\n      // Id for animation\n      anid: 'line',\n      subPixelOptimize: true,\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: lineStyle,\n      strokeContainThreshold: opt.strokeContainThreshold || 5,\n      silent: true,\n      z2: 1\n    }));\n    var arrows = axisModel.get('axisLine.symbol');\n    var arrowSize = axisModel.get('axisLine.symbolSize');\n    var arrowOffset = axisModel.get('axisLine.symbolOffset') || 0;\n\n    if (typeof arrowOffset === 'number') {\n      arrowOffset = [arrowOffset, arrowOffset];\n    }\n\n    if (arrows != null) {\n      if (typeof arrows === 'string') {\n        // Use the same arrow for start and end point\n        arrows = [arrows, arrows];\n      }\n\n      if (typeof arrowSize === 'string' || typeof arrowSize === 'number') {\n        // Use the same size for width and height\n        arrowSize = [arrowSize, arrowSize];\n      }\n\n      var symbolWidth = arrowSize[0];\n      var symbolHeight = arrowSize[1];\n      each([{\n        rotate: opt.rotation + Math.PI / 2,\n        offset: arrowOffset[0],\n        r: 0\n      }, {\n        rotate: opt.rotation - Math.PI / 2,\n        offset: arrowOffset[1],\n        r: Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0]) + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1]))\n      }], function (point, index) {\n        if (arrows[index] !== 'none' && arrows[index] != null) {\n          var symbol = createSymbol(arrows[index], -symbolWidth / 2, -symbolHeight / 2, symbolWidth, symbolHeight, lineStyle.stroke, true); // Calculate arrow position with offset\n\n          var r = point.r + point.offset;\n          var pos = [pt1[0] + r * Math.cos(opt.rotation), pt1[1] - r * Math.sin(opt.rotation)];\n          symbol.attr({\n            rotation: point.rotate,\n            position: pos,\n            silent: true,\n            z2: 11\n          });\n          this.group.add(symbol);\n        }\n      }, this);\n    }\n  },\n\n  /**\n   * @private\n   */\n  axisTickLabel: function axisTickLabel() {\n    var axisModel = this.axisModel;\n    var opt = this.opt;\n    var tickEls = buildAxisTick(this, axisModel, opt);\n    var labelEls = buildAxisLabel(this, axisModel, opt);\n    fixMinMaxLabelShow(axisModel, labelEls, tickEls);\n  },\n\n  /**\n   * @private\n   */\n  axisName: function axisName() {\n    var opt = this.opt;\n    var axisModel = this.axisModel;\n    var name = retrieve(opt.axisName, axisModel.get('name'));\n\n    if (!name) {\n      return;\n    }\n\n    var nameLocation = axisModel.get('nameLocation');\n    var nameDirection = opt.nameDirection;\n    var textStyleModel = axisModel.getModel('nameTextStyle');\n    var gap = axisModel.get('nameGap') || 0;\n    var extent = this.axisModel.axis.getExtent();\n    var gapSignal = extent[0] > extent[1] ? -1 : 1;\n    var pos = [nameLocation === 'start' ? extent[0] - gapSignal * gap : nameLocation === 'end' ? extent[1] + gapSignal * gap : (extent[0] + extent[1]) / 2, // 'middle'\n    // Reuse labelOffset.\n    isNameLocationCenter(nameLocation) ? opt.labelOffset + nameDirection * gap : 0];\n    var labelLayout;\n    var nameRotation = axisModel.get('nameRotate');\n\n    if (nameRotation != null) {\n      nameRotation = nameRotation * PI / 180; // To radian.\n    }\n\n    var axisNameAvailableWidth;\n\n    if (isNameLocationCenter(nameLocation)) {\n      labelLayout = innerTextLayout(opt.rotation, nameRotation != null ? nameRotation : opt.rotation, // Adapt to axis.\n      nameDirection);\n    } else {\n      labelLayout = endTextLayout(opt, nameLocation, nameRotation || 0, extent);\n      axisNameAvailableWidth = opt.axisNameAvailableWidth;\n\n      if (axisNameAvailableWidth != null) {\n        axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));\n        !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);\n      }\n    }\n\n    var textFont = textStyleModel.getFont();\n    var truncateOpt = axisModel.get('nameTruncate', true) || {};\n    var ellipsis = truncateOpt.ellipsis;\n    var maxWidth = retrieve(opt.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth); // FIXME\n    // truncate rich text? (consider performance)\n\n    var truncatedText = ellipsis != null && maxWidth != null ? formatUtil.truncateText(name, maxWidth, textFont, ellipsis, {\n      minChar: 2,\n      placeholder: truncateOpt.placeholder\n    }) : name;\n    var tooltipOpt = axisModel.get('tooltip', true);\n    var mainType = axisModel.mainType;\n    var formatterParams = {\n      componentType: mainType,\n      name: name,\n      $vars: ['name']\n    };\n    formatterParams[mainType + 'Index'] = axisModel.componentIndex;\n    var textEl = new graphic.Text({\n      // Id for animation\n      anid: 'name',\n      __fullText: name,\n      __truncatedText: truncatedText,\n      position: pos,\n      rotation: labelLayout.rotation,\n      silent: isLabelSilent(axisModel),\n      z2: 1,\n      tooltip: tooltipOpt && tooltipOpt.show ? extend({\n        content: name,\n        formatter: function formatter() {\n          return name;\n        },\n        formatterParams: formatterParams\n      }, tooltipOpt) : null\n    });\n    graphic.setTextStyle(textEl.style, textStyleModel, {\n      text: truncatedText,\n      textFont: textFont,\n      textFill: textStyleModel.getTextColor() || axisModel.get('axisLine.lineStyle.color'),\n      textAlign: textStyleModel.get('align') || labelLayout.textAlign,\n      textVerticalAlign: textStyleModel.get('verticalAlign') || labelLayout.textVerticalAlign\n    });\n\n    if (axisModel.get('triggerEvent')) {\n      textEl.eventData = makeAxisEventDataBase(axisModel);\n      textEl.eventData.targetType = 'axisName';\n      textEl.eventData.name = name;\n    } // FIXME\n\n\n    this._dumbGroup.add(textEl);\n\n    textEl.updateTransform();\n    this.group.add(textEl);\n    textEl.decomposeTransform();\n  }\n};\n\nvar makeAxisEventDataBase = AxisBuilder.makeAxisEventDataBase = function (axisModel) {\n  var eventData = {\n    componentType: axisModel.mainType,\n    componentIndex: axisModel.componentIndex\n  };\n  eventData[axisModel.mainType + 'Index'] = axisModel.componentIndex;\n  return eventData;\n};\n/**\n * @public\n * @static\n * @param {Object} opt\n * @param {number} axisRotation in radian\n * @param {number} textRotation in radian\n * @param {number} direction\n * @return {Object} {\n *  rotation, // according to axis\n *  textAlign,\n *  textVerticalAlign\n * }\n */\n\n\nvar innerTextLayout = AxisBuilder.innerTextLayout = function (axisRotation, textRotation, direction) {\n  var rotationDiff = remRadian(textRotation - axisRotation);\n  var textAlign;\n  var textVerticalAlign;\n\n  if (isRadianAroundZero(rotationDiff)) {\n    // Label is parallel with axis line.\n    textVerticalAlign = direction > 0 ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI)) {\n    // Label is inverse parallel with axis line.\n    textVerticalAlign = direction > 0 ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff > 0 && rotationDiff < PI) {\n      textAlign = direction > 0 ? 'right' : 'left';\n    } else {\n      textAlign = direction > 0 ? 'left' : 'right';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n};\n\nfunction endTextLayout(opt, textPosition, textRotate, extent) {\n  var rotationDiff = remRadian(textRotate - opt.rotation);\n  var textAlign;\n  var textVerticalAlign;\n  var inverse = extent[0] > extent[1];\n  var onLeft = textPosition === 'start' && !inverse || textPosition !== 'start' && inverse;\n\n  if (isRadianAroundZero(rotationDiff - PI / 2)) {\n    textVerticalAlign = onLeft ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI * 1.5)) {\n    textVerticalAlign = onLeft ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff < PI * 1.5 && rotationDiff > PI / 2) {\n      textAlign = onLeft ? 'left' : 'right';\n    } else {\n      textAlign = onLeft ? 'right' : 'left';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n}\n\nvar isLabelSilent = AxisBuilder.isLabelSilent = function (axisModel) {\n  var tooltipOpt = axisModel.get('tooltip');\n  return axisModel.get('silent') // Consider mouse cursor, add these restrictions.\n  || !(axisModel.get('triggerEvent') || tooltipOpt && tooltipOpt.show);\n};\n\nfunction fixMinMaxLabelShow(axisModel, labelEls, tickEls) {\n  if (shouldShowAllLabels(axisModel.axis)) {\n    return;\n  } // If min or max are user set, we need to check\n  // If the tick on min(max) are overlap on their neighbour tick\n  // If they are overlapped, we need to hide the min(max) tick label\n\n\n  var showMinLabel = axisModel.get('axisLabel.showMinLabel');\n  var showMaxLabel = axisModel.get('axisLabel.showMaxLabel'); // FIXME\n  // Have not consider onBand yet, where tick els is more than label els.\n\n  labelEls = labelEls || [];\n  tickEls = tickEls || [];\n  var firstLabel = labelEls[0];\n  var nextLabel = labelEls[1];\n  var lastLabel = labelEls[labelEls.length - 1];\n  var prevLabel = labelEls[labelEls.length - 2];\n  var firstTick = tickEls[0];\n  var nextTick = tickEls[1];\n  var lastTick = tickEls[tickEls.length - 1];\n  var prevTick = tickEls[tickEls.length - 2];\n\n  if (showMinLabel === false) {\n    ignoreEl(firstLabel);\n    ignoreEl(firstTick);\n  } else if (isTwoLabelOverlapped(firstLabel, nextLabel)) {\n    if (showMinLabel) {\n      ignoreEl(nextLabel);\n      ignoreEl(nextTick);\n    } else {\n      ignoreEl(firstLabel);\n      ignoreEl(firstTick);\n    }\n  }\n\n  if (showMaxLabel === false) {\n    ignoreEl(lastLabel);\n    ignoreEl(lastTick);\n  } else if (isTwoLabelOverlapped(prevLabel, lastLabel)) {\n    if (showMaxLabel) {\n      ignoreEl(prevLabel);\n      ignoreEl(prevTick);\n    } else {\n      ignoreEl(lastLabel);\n      ignoreEl(lastTick);\n    }\n  }\n}\n\nfunction ignoreEl(el) {\n  el && (el.ignore = true);\n}\n\nfunction isTwoLabelOverlapped(current, next, labelLayout) {\n  // current and next has the same rotation.\n  var firstRect = current && current.getBoundingRect().clone();\n  var nextRect = next && next.getBoundingRect().clone();\n\n  if (!firstRect || !nextRect) {\n    return;\n  } // When checking intersect of two rotated labels, we use mRotationBack\n  // to avoid that boundingRect is enlarge when using `boundingRect.applyTransform`.\n\n\n  var mRotationBack = matrixUtil.identity([]);\n  matrixUtil.rotate(mRotationBack, mRotationBack, -current.rotation);\n  firstRect.applyTransform(matrixUtil.mul([], mRotationBack, current.getLocalTransform()));\n  nextRect.applyTransform(matrixUtil.mul([], mRotationBack, next.getLocalTransform()));\n  return firstRect.intersect(nextRect);\n}\n\nfunction isNameLocationCenter(nameLocation) {\n  return nameLocation === 'middle' || nameLocation === 'center';\n}\n\nfunction buildAxisTick(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n\n  if (!axisModel.get('axisTick.show') || axis.scale.isBlank()) {\n    return;\n  }\n\n  var tickModel = axisModel.getModel('axisTick');\n  var lineStyleModel = tickModel.getModel('lineStyle');\n  var tickLen = tickModel.get('length');\n  var ticksCoords = axis.getTicksCoords();\n  var pt1 = [];\n  var pt2 = [];\n  var matrix = axisBuilder._transform;\n  var tickEls = [];\n\n  for (var i = 0; i < ticksCoords.length; i++) {\n    var tickCoord = ticksCoords[i].coord;\n    pt1[0] = tickCoord;\n    pt1[1] = 0;\n    pt2[0] = tickCoord;\n    pt2[1] = opt.tickDirection * tickLen;\n\n    if (matrix) {\n      v2ApplyTransform(pt1, pt1, matrix);\n      v2ApplyTransform(pt2, pt2, matrix);\n    } // Tick line, Not use group transform to have better line draw\n\n\n    var tickEl = new graphic.Line({\n      // Id for animation\n      anid: 'tick_' + ticksCoords[i].tickValue,\n      subPixelOptimize: true,\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: defaults(lineStyleModel.getLineStyle(), {\n        stroke: axisModel.get('axisLine.lineStyle.color')\n      }),\n      z2: 2,\n      silent: true\n    });\n    axisBuilder.group.add(tickEl);\n    tickEls.push(tickEl);\n  }\n\n  return tickEls;\n}\n\nfunction buildAxisLabel(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n  var show = retrieve(opt.axisLabelShow, axisModel.get('axisLabel.show'));\n\n  if (!show || axis.scale.isBlank()) {\n    return;\n  }\n\n  var labelModel = axisModel.getModel('axisLabel');\n  var labelMargin = labelModel.get('margin');\n  var labels = axis.getViewLabels(); // Special label rotate.\n\n  var labelRotation = (retrieve(opt.labelRotate, labelModel.get('rotate')) || 0) * PI / 180;\n  var labelLayout = innerTextLayout(opt.rotation, labelRotation, opt.labelDirection);\n  var rawCategoryData = axisModel.getCategories && axisModel.getCategories(true);\n  var labelEls = [];\n  var silent = isLabelSilent(axisModel);\n  var triggerEvent = axisModel.get('triggerEvent');\n  each(labels, function (labelItem, index) {\n    var tickValue = labelItem.tickValue;\n    var formattedLabel = labelItem.formattedLabel;\n    var rawLabel = labelItem.rawLabel;\n    var itemLabelModel = labelModel;\n\n    if (rawCategoryData && rawCategoryData[tickValue] && rawCategoryData[tickValue].textStyle) {\n      itemLabelModel = new Model(rawCategoryData[tickValue].textStyle, labelModel, axisModel.ecModel);\n    }\n\n    var textColor = itemLabelModel.getTextColor() || axisModel.get('axisLine.lineStyle.color');\n    var tickCoord = axis.dataToCoord(tickValue);\n    var pos = [tickCoord, opt.labelOffset + opt.labelDirection * labelMargin];\n    var textEl = new graphic.Text({\n      // Id for animation\n      anid: 'label_' + tickValue,\n      position: pos,\n      rotation: labelLayout.rotation,\n      silent: silent,\n      z2: 10\n    });\n    graphic.setTextStyle(textEl.style, itemLabelModel, {\n      text: formattedLabel,\n      textAlign: itemLabelModel.getShallow('align', true) || labelLayout.textAlign,\n      textVerticalAlign: itemLabelModel.getShallow('verticalAlign', true) || itemLabelModel.getShallow('baseline', true) || labelLayout.textVerticalAlign,\n      textFill: typeof textColor === 'function' ? textColor( // (1) In category axis with data zoom, tick is not the original\n      // index of axis.data. So tick should not be exposed to user\n      // in category axis.\n      // (2) Compatible with previous version, which always use formatted label as\n      // input. But in interval scale the formatted label is like '223,445', which\n      // maked user repalce ','. So we modify it to return original val but remain\n      // it as 'string' to avoid error in replacing.\n      axis.type === 'category' ? rawLabel : axis.type === 'value' ? tickValue + '' : tickValue, index) : textColor\n    }); // Pack data for mouse event\n\n    if (triggerEvent) {\n      textEl.eventData = makeAxisEventDataBase(axisModel);\n      textEl.eventData.targetType = 'axisLabel';\n      textEl.eventData.value = rawLabel;\n    } // FIXME\n\n\n    axisBuilder._dumbGroup.add(textEl);\n\n    textEl.updateTransform();\n    labelEls.push(textEl);\n    axisBuilder.group.add(textEl);\n    textEl.decomposeTransform();\n  });\n  return labelEls;\n}\n\nvar _default = AxisBuilder;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar axisPointerModelHelper = require(\"../axisPointer/modelHelper\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Base class of AxisView.\n */\n\n\nvar AxisView = echarts.extendComponentView({\n  type: 'axis',\n\n  /**\n   * @private\n   */\n  _axisPointer: null,\n\n  /**\n   * @protected\n   * @type {string}\n   */\n  axisPointerClass: null,\n\n  /**\n   * @override\n   */\n  render: function render(axisModel, ecModel, api, payload) {\n    // FIXME\n    // This process should proformed after coordinate systems updated\n    // (axis scale updated), and should be performed each time update.\n    // So put it here temporarily, although it is not appropriate to\n    // put a model-writing procedure in `view`.\n    this.axisPointerClass && axisPointerModelHelper.fixValue(axisModel);\n    AxisView.superApply(this, 'render', arguments);\n\n    _updateAxisPointer(this, axisModel, ecModel, api, payload, true);\n  },\n\n  /**\n   * Action handler.\n   * @public\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/model/Global} ecModel\n   * @param {module:echarts/ExtensionAPI} api\n   * @param {Object} payload\n   */\n  updateAxisPointer: function updateAxisPointer(axisModel, ecModel, api, payload, force) {\n    _updateAxisPointer(this, axisModel, ecModel, api, payload, false);\n  },\n\n  /**\n   * @override\n   */\n  remove: function remove(ecModel, api) {\n    var axisPointer = this._axisPointer;\n    axisPointer && axisPointer.remove(api);\n    AxisView.superApply(this, 'remove', arguments);\n  },\n\n  /**\n   * @override\n   */\n  dispose: function dispose(ecModel, api) {\n    disposeAxisPointer(this, api);\n    AxisView.superApply(this, 'dispose', arguments);\n  }\n});\n\nfunction _updateAxisPointer(axisView, axisModel, ecModel, api, payload, forceRender) {\n  var Clazz = AxisView.getAxisPointerClass(axisView.axisPointerClass);\n\n  if (!Clazz) {\n    return;\n  }\n\n  var axisPointerModel = axisPointerModelHelper.getAxisPointerModel(axisModel);\n  axisPointerModel ? (axisView._axisPointer || (axisView._axisPointer = new Clazz())).render(axisModel, axisPointerModel, api, forceRender) : disposeAxisPointer(axisView, api);\n}\n\nfunction disposeAxisPointer(axisView, ecModel, api) {\n  var axisPointer = axisView._axisPointer;\n  axisPointer && axisPointer.dispose(ecModel, api);\n  axisView._axisPointer = null;\n}\n\nvar axisPointerClazz = [];\n\nAxisView.registerAxisPointerClass = function (type, clazz) {\n  axisPointerClazz[type] = clazz;\n};\n\nAxisView.getAxisPointerClass = function (type) {\n  return type && axisPointerClazz[type];\n};\n\nvar _default = AxisView;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Can only be called after coordinate system creation stage.\n * (Can be called before coordinate system update stage).\n *\n * @param {Object} opt {labelInside}\n * @return {Object} {\n *  position, rotation, labelDirection, labelOffset,\n *  tickDirection, labelRotate, z2\n * }\n */\n\n\nfunction layout(gridModel, axisModel, opt) {\n  opt = opt || {};\n  var grid = gridModel.coordinateSystem;\n  var axis = axisModel.axis;\n  var layout = {};\n  var otherAxisOnZeroOf = axis.getAxesOnZeroOf()[0];\n  var rawAxisPosition = axis.position;\n  var axisPosition = otherAxisOnZeroOf ? 'onZero' : rawAxisPosition;\n  var axisDim = axis.dim;\n  var rect = grid.getRect();\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var idx = {\n    left: 0,\n    right: 1,\n    top: 0,\n    bottom: 1,\n    onZero: 2\n  };\n  var axisOffset = axisModel.get('offset') || 0;\n  var posBound = axisDim === 'x' ? [rectBound[2] - axisOffset, rectBound[3] + axisOffset] : [rectBound[0] - axisOffset, rectBound[1] + axisOffset];\n\n  if (otherAxisOnZeroOf) {\n    var onZeroCoord = otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));\n    posBound[idx.onZero] = Math.max(Math.min(onZeroCoord, posBound[1]), posBound[0]);\n  } // Axis position\n\n\n  layout.position = [axisDim === 'y' ? posBound[idx[axisPosition]] : rectBound[0], axisDim === 'x' ? posBound[idx[axisPosition]] : rectBound[3]]; // Axis rotation\n\n  layout.rotation = Math.PI / 2 * (axisDim === 'x' ? 0 : 1); // Tick and label direction, x y is axisDim\n\n  var dirMap = {\n    top: -1,\n    bottom: 1,\n    left: -1,\n    right: 1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = dirMap[rawAxisPosition];\n  layout.labelOffset = otherAxisOnZeroOf ? posBound[idx[rawAxisPosition]] - posBound[idx.onZero] : 0;\n\n  if (axisModel.get('axisTick.inside')) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get('axisLabel.inside'))) {\n    layout.labelDirection = -layout.labelDirection;\n  } // Special label rotation\n\n\n  var labelRotate = axisModel.get('axisLabel.rotate');\n  layout.labelRotate = axisPosition === 'top' ? -labelRotate : labelRotate; // Over splitLine and splitArea\n\n  layout.z2 = 1;\n  return layout;\n}\n\nexports.layout = layout;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {Object} finder contains {seriesIndex, dataIndex, dataIndexInside}\n * @param {module:echarts/model/Global} ecModel\n * @return {Object} {point: [x, y], el: ...} point Will not be null.\n */\n\n\nfunction _default(finder, ecModel) {\n  var point = [];\n  var seriesIndex = finder.seriesIndex;\n  var seriesModel;\n\n  if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\n    return {\n      point: []\n    };\n  }\n\n  var data = seriesModel.getData();\n  var dataIndex = modelUtil.queryDataIndex(data, finder);\n\n  if (dataIndex == null || dataIndex < 0 || zrUtil.isArray(dataIndex)) {\n    return {\n      point: []\n    };\n  }\n\n  var el = data.getItemGraphicEl(dataIndex);\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (seriesModel.getTooltipPosition) {\n    point = seriesModel.getTooltipPosition(dataIndex) || [];\n  } else if (coordSys && coordSys.dataToPoint) {\n    point = coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n      return data.mapDimension(dim);\n    }), dataIndex, true)) || [];\n  } else if (el) {\n    // Use graphic bounding rect\n    var rect = el.getBoundingRect().clone();\n    rect.applyTransform(el.transform);\n    point = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  }\n\n  return {\n    point: point,\n    el: el\n  };\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar inner = makeInner();\nvar each = zrUtil.each;\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n * @param {Function} handler\n *      param: {string} currTrigger\n *      param: {Array.<number>} point\n */\n\nfunction register(key, api, handler) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  inner(zr).records || (inner(zr).records = {});\n  initGlobalListeners(zr, api);\n  var record = inner(zr).records[key] || (inner(zr).records[key] = {});\n  record.handler = handler;\n}\n\nfunction initGlobalListeners(zr, api) {\n  if (inner(zr).initialized) {\n    return;\n  }\n\n  inner(zr).initialized = true;\n  useHandler('click', zrUtil.curry(doEnter, 'click'));\n  useHandler('mousemove', zrUtil.curry(doEnter, 'mousemove')); // useHandler('mouseout', onLeave);\n\n  useHandler('globalout', onLeave);\n\n  function useHandler(eventType, cb) {\n    zr.on(eventType, function (e) {\n      var dis = makeDispatchAction(api);\n      each(inner(zr).records, function (record) {\n        record && cb(record, e, dis.dispatchAction);\n      });\n      dispatchTooltipFinally(dis.pendings, api);\n    });\n  }\n}\n\nfunction dispatchTooltipFinally(pendings, api) {\n  var showLen = pendings.showTip.length;\n  var hideLen = pendings.hideTip.length;\n  var actuallyPayload;\n\n  if (showLen) {\n    actuallyPayload = pendings.showTip[showLen - 1];\n  } else if (hideLen) {\n    actuallyPayload = pendings.hideTip[hideLen - 1];\n  }\n\n  if (actuallyPayload) {\n    actuallyPayload.dispatchAction = null;\n    api.dispatchAction(actuallyPayload);\n  }\n}\n\nfunction onLeave(record, e, dispatchAction) {\n  record.handler('leave', null, dispatchAction);\n}\n\nfunction doEnter(currTrigger, record, e, dispatchAction) {\n  record.handler(currTrigger, e, dispatchAction);\n}\n\nfunction makeDispatchAction(api) {\n  var pendings = {\n    showTip: [],\n    hideTip: []\n  }; // FIXME\n  // better approach?\n  // 'showTip' and 'hideTip' can be triggered by axisPointer and tooltip,\n  // which may be conflict, (axisPointer call showTip but tooltip call hideTip);\n  // So we have to add \"final stage\" to merge those dispatched actions.\n\n  var dispatchAction = function dispatchAction(payload) {\n    var pendingList = pendings[payload.type];\n\n    if (pendingList) {\n      pendingList.push(payload);\n    } else {\n      payload.dispatchAction = dispatchAction;\n      api.dispatchAction(payload);\n    }\n  };\n\n  return {\n    dispatchAction: dispatchAction,\n    pendings: pendings\n  };\n}\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n */\n\n\nfunction unregister(key, api) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  var record = (inner(zr).records || {})[key];\n\n  if (record) {\n    inner(zr).records[key] = null;\n  }\n}\n\nexports.register = register;\nexports.unregister = unregister;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar AxisBuilder = require(\"../axis/AxisBuilder\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/model/Model} axisPointerModel\n */\n\n\nfunction buildElStyle(axisPointerModel) {\n  var axisPointerType = axisPointerModel.get('type');\n  var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\n  var style;\n\n  if (axisPointerType === 'line') {\n    style = styleModel.getLineStyle();\n    style.fill = null;\n  } else if (axisPointerType === 'shadow') {\n    style = styleModel.getAreaStyle();\n    style.stroke = null;\n  }\n\n  return style;\n}\n/**\n * @param {Function} labelPos {align, verticalAlign, position}\n */\n\n\nfunction buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\n  var value = axisPointerModel.get('value');\n  var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\n    precision: axisPointerModel.get('label.precision'),\n    formatter: axisPointerModel.get('label.formatter')\n  });\n  var labelModel = axisPointerModel.getModel('label');\n  var paddings = formatUtil.normalizeCssArray(labelModel.get('padding') || 0);\n  var font = labelModel.getFont();\n  var textRect = textContain.getBoundingRect(text, font);\n  var position = labelPos.position;\n  var width = textRect.width + paddings[1] + paddings[3];\n  var height = textRect.height + paddings[0] + paddings[2]; // Adjust by align.\n\n  var align = labelPos.align;\n  align === 'right' && (position[0] -= width);\n  align === 'center' && (position[0] -= width / 2);\n  var verticalAlign = labelPos.verticalAlign;\n  verticalAlign === 'bottom' && (position[1] -= height);\n  verticalAlign === 'middle' && (position[1] -= height / 2); // Not overflow ec container\n\n  confineInContainer(position, width, height, api);\n  var bgColor = labelModel.get('backgroundColor');\n\n  if (!bgColor || bgColor === 'auto') {\n    bgColor = axisModel.get('axisLine.lineStyle.color');\n  }\n\n  elOption.label = {\n    shape: {\n      x: 0,\n      y: 0,\n      width: width,\n      height: height,\n      r: labelModel.get('borderRadius')\n    },\n    position: position.slice(),\n    // TODO: rich\n    style: {\n      text: text,\n      textFont: font,\n      textFill: labelModel.getTextColor(),\n      textPosition: 'inside',\n      textPadding: paddings,\n      fill: bgColor,\n      stroke: labelModel.get('borderColor') || 'transparent',\n      lineWidth: labelModel.get('borderWidth') || 0,\n      shadowBlur: labelModel.get('shadowBlur'),\n      shadowColor: labelModel.get('shadowColor'),\n      shadowOffsetX: labelModel.get('shadowOffsetX'),\n      shadowOffsetY: labelModel.get('shadowOffsetY')\n    },\n    // Lable should be over axisPointer.\n    z2: 10\n  };\n} // Do not overflow ec container\n\n\nfunction confineInContainer(position, width, height, api) {\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  position[0] = Math.min(position[0] + width, viewWidth) - width;\n  position[1] = Math.min(position[1] + height, viewHeight) - height;\n  position[0] = Math.max(position[0], 0);\n  position[1] = Math.max(position[1], 0);\n}\n/**\n * @param {number} value\n * @param {module:echarts/coord/Axis} axis\n * @param {module:echarts/model/Global} ecModel\n * @param {Object} opt\n * @param {Array.<Object>} seriesDataIndices\n * @param {number|string} opt.precision 'auto' or a number\n * @param {string|Function} opt.formatter label formatter\n */\n\n\nfunction getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\n  value = axis.scale.parse(value);\n  var text = axis.scale.getLabel( // If `precision` is set, width can be fixed (like '12.00500'), which\n  // helps to debounce when when moving label.\n  value, {\n    precision: opt.precision\n  });\n  var formatter = opt.formatter;\n\n  if (formatter) {\n    var params = {\n      value: axisHelper.getAxisRawValue(axis, value),\n      axisDimension: axis.dim,\n      axisIndex: axis.index,\n      seriesData: []\n    };\n    zrUtil.each(seriesDataIndices, function (idxItem) {\n      var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n      var dataIndex = idxItem.dataIndexInside;\n      var dataParams = series && series.getDataParams(dataIndex);\n      dataParams && params.seriesData.push(dataParams);\n    });\n\n    if (zrUtil.isString(formatter)) {\n      text = formatter.replace('{value}', text);\n    } else if (zrUtil.isFunction(formatter)) {\n      text = formatter(params);\n    }\n  }\n\n  return text;\n}\n/**\n * @param {module:echarts/coord/Axis} axis\n * @param {number} value\n * @param {Object} layoutInfo {\n *  rotation, position, labelOffset, labelDirection, labelMargin\n * }\n */\n\n\nfunction getTransformedPosition(axis, value, layoutInfo) {\n  var transform = matrix.create();\n  matrix.rotate(transform, transform, layoutInfo.rotation);\n  matrix.translate(transform, transform, layoutInfo.position);\n  return graphic.applyTransform([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);\n}\n\nfunction buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\n  var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\n  layoutInfo.labelMargin = axisPointerModel.get('label.margin');\n  buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\n    position: getTransformedPosition(axisModel.axis, value, layoutInfo),\n    align: textLayout.textAlign,\n    verticalAlign: textLayout.textVerticalAlign\n  });\n}\n/**\n * @param {Array.<number>} p1\n * @param {Array.<number>} p2\n * @param {number} [xDimIndex=0] or 1\n */\n\n\nfunction makeLineShape(p1, p2, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x1: p1[xDimIndex],\n    y1: p1[1 - xDimIndex],\n    x2: p2[xDimIndex],\n    y2: p2[1 - xDimIndex]\n  };\n}\n/**\n * @param {Array.<number>} xy\n * @param {Array.<number>} wh\n * @param {number} [xDimIndex=0] or 1\n */\n\n\nfunction makeRectShape(xy, wh, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x: xy[xDimIndex],\n    y: xy[1 - xDimIndex],\n    width: wh[xDimIndex],\n    height: wh[1 - xDimIndex]\n  };\n}\n\nfunction makeSectorShape(cx, cy, r0, r, startAngle, endAngle) {\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r,\n    startAngle: startAngle,\n    endAngle: endAngle,\n    clockwise: true\n  };\n}\n\nexports.buildElStyle = buildElStyle;\nexports.buildLabelElOption = buildLabelElOption;\nexports.getValueLabel = getValueLabel;\nexports.getTransformedPosition = getTransformedPosition;\nexports.buildCartesianSingleLabelElOption = buildCartesianSingleLabelElOption;\nexports.makeLineShape = makeLineShape;\nexports.makeRectShape = makeRectShape;\nexports.makeSectorShape = makeSectorShape;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar graphic = require(\"../../util/graphic\");\n\nvar SymbolClz = require(\"./Symbol\");\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isObject = _util.isObject;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @module echarts/chart/helper/SymbolDraw\n */\n\n/**\n * @constructor\n * @alias module:echarts/chart/helper/SymbolDraw\n * @param {module:zrender/graphic/Group} [symbolCtor]\n */\n\nfunction SymbolDraw(symbolCtor) {\n  this.group = new graphic.Group();\n  this._symbolCtor = symbolCtor || SymbolClz;\n}\n\nvar symbolDrawProto = SymbolDraw.prototype;\n\nfunction symbolNeedsDraw(data, point, idx, opt) {\n  return point && !isNaN(point[0]) && !isNaN(point[1]) && !(opt.isIgnore && opt.isIgnore(idx)) // We do not set clipShape on group, because it will cut part of\n  // the symbol element shape. We use the same clip shape here as\n  // the line clip.\n  && !(opt.clipShape && !opt.clipShape.contain(point[0], point[1])) && data.getItemVisual(idx, 'symbol') !== 'none';\n}\n/**\n * Update symbols draw by new data\n * @param {module:echarts/data/List} data\n * @param {Object} [opt] Or isIgnore\n * @param {Function} [opt.isIgnore]\n * @param {Object} [opt.clipShape]\n */\n\n\nsymbolDrawProto.updateData = function (data, opt) {\n  opt = normalizeUpdateOpt(opt);\n  var group = this.group;\n  var seriesModel = data.hostModel;\n  var oldData = this._data;\n  var SymbolCtor = this._symbolCtor;\n  var seriesScope = makeSeriesScope(data); // There is no oldLineData only when first rendering or switching from\n  // stream mode to normal mode, where previous elements should be removed.\n\n  if (!oldData) {\n    group.removeAll();\n  }\n\n  data.diff(oldData).add(function (newIdx) {\n    var point = data.getItemLayout(newIdx);\n\n    if (symbolNeedsDraw(data, point, newIdx, opt)) {\n      var symbolEl = new SymbolCtor(data, newIdx, seriesScope);\n      symbolEl.attr('position', point);\n      data.setItemGraphicEl(newIdx, symbolEl);\n      group.add(symbolEl);\n    }\n  }).update(function (newIdx, oldIdx) {\n    var symbolEl = oldData.getItemGraphicEl(oldIdx);\n    var point = data.getItemLayout(newIdx);\n\n    if (!symbolNeedsDraw(data, point, newIdx, opt)) {\n      group.remove(symbolEl);\n      return;\n    }\n\n    if (!symbolEl) {\n      symbolEl = new SymbolCtor(data, newIdx);\n      symbolEl.attr('position', point);\n    } else {\n      symbolEl.updateData(data, newIdx, seriesScope);\n      graphic.updateProps(symbolEl, {\n        position: point\n      }, seriesModel);\n    } // Add back\n\n\n    group.add(symbolEl);\n    data.setItemGraphicEl(newIdx, symbolEl);\n  }).remove(function (oldIdx) {\n    var el = oldData.getItemGraphicEl(oldIdx);\n    el && el.fadeOut(function () {\n      group.remove(el);\n    });\n  }).execute();\n  this._data = data;\n};\n\nsymbolDrawProto.isPersistent = function () {\n  return true;\n};\n\nsymbolDrawProto.updateLayout = function () {\n  var data = this._data;\n\n  if (data) {\n    // Not use animation\n    data.eachItemGraphicEl(function (el, idx) {\n      var point = data.getItemLayout(idx);\n      el.attr('position', point);\n    });\n  }\n};\n\nsymbolDrawProto.incrementalPrepareUpdate = function (data) {\n  this._seriesScope = makeSeriesScope(data);\n  this._data = null;\n  this.group.removeAll();\n};\n/**\n * Update symbols draw by new data\n * @param {module:echarts/data/List} data\n * @param {Object} [opt] Or isIgnore\n * @param {Function} [opt.isIgnore]\n * @param {Object} [opt.clipShape]\n */\n\n\nsymbolDrawProto.incrementalUpdate = function (taskParams, data, opt) {\n  opt = normalizeUpdateOpt(opt);\n\n  function updateIncrementalAndHover(el) {\n    if (!el.isGroup) {\n      el.incremental = el.useHoverLayer = true;\n    }\n  }\n\n  for (var idx = taskParams.start; idx < taskParams.end; idx++) {\n    var point = data.getItemLayout(idx);\n\n    if (symbolNeedsDraw(data, point, idx, opt)) {\n      var el = new this._symbolCtor(data, idx, this._seriesScope);\n      el.traverse(updateIncrementalAndHover);\n      el.attr('position', point);\n      this.group.add(el);\n      data.setItemGraphicEl(idx, el);\n    }\n  }\n};\n\nfunction normalizeUpdateOpt(opt) {\n  if (opt != null && !isObject(opt)) {\n    opt = {\n      isIgnore: opt\n    };\n  }\n\n  return opt || {};\n}\n\nsymbolDrawProto.remove = function (enableAnimation) {\n  var group = this.group;\n  var data = this._data; // Incremental model do not have this._data.\n\n  if (data && enableAnimation) {\n    data.eachItemGraphicEl(function (el) {\n      el.fadeOut(function () {\n        group.remove(el);\n      });\n    });\n  } else {\n    group.removeAll();\n  }\n};\n\nfunction makeSeriesScope(data) {\n  var seriesModel = data.hostModel;\n  return {\n    itemStyle: seriesModel.getModel('itemStyle').getItemStyle(['color']),\n    hoverItemStyle: seriesModel.getModel('emphasis.itemStyle').getItemStyle(),\n    symbolRotate: seriesModel.get('symbolRotate'),\n    symbolOffset: seriesModel.get('symbolOffset'),\n    hoverAnimation: seriesModel.get('hoverAnimation'),\n    labelModel: seriesModel.getModel('label'),\n    hoverLabelModel: seriesModel.getModel('emphasis.label'),\n    cursorStyle: seriesModel.get('cursor')\n  };\n}\n\nvar _default = SymbolDraw;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\nvar _labelHelper = require(\"./labelHelper\");\n\nvar getDefaultLabel = _labelHelper.getDefaultLabel;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @module echarts/chart/helper/Symbol\n */\n\n/**\n * @constructor\n * @alias {module:echarts/chart/helper/Symbol}\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @extends {module:zrender/graphic/Group}\n */\n\nfunction SymbolClz(data, idx, seriesScope) {\n  graphic.Group.call(this);\n  this.updateData(data, idx, seriesScope);\n}\n\nvar symbolProto = SymbolClz.prototype;\n/**\n * @public\n * @static\n * @param {module:echarts/data/List} data\n * @param {number} dataIndex\n * @return {Array.<number>} [width, height]\n */\n\nvar getSymbolSize = SymbolClz.getSymbolSize = function (data, idx) {\n  var symbolSize = data.getItemVisual(idx, 'symbolSize');\n  return symbolSize instanceof Array ? symbolSize.slice() : [+symbolSize, +symbolSize];\n};\n\nfunction getScale(symbolSize) {\n  return [symbolSize[0] / 2, symbolSize[1] / 2];\n}\n\nfunction driftSymbol(dx, dy) {\n  this.parent.drift(dx, dy);\n}\n\nsymbolProto._createSymbol = function (symbolType, data, idx, symbolSize, keepAspect) {\n  // Remove paths created before\n  this.removeAll();\n  var color = data.getItemVisual(idx, 'color'); // var symbolPath = createSymbol(\n  //     symbolType, -0.5, -0.5, 1, 1, color\n  // );\n  // If width/height are set too small (e.g., set to 1) on ios10\n  // and macOS Sierra, a circle stroke become a rect, no matter what\n  // the scale is set. So we set width/height as 2. See #4150.\n\n  var symbolPath = createSymbol(symbolType, -1, -1, 2, 2, color, keepAspect);\n  symbolPath.attr({\n    z2: 100,\n    culling: true,\n    scale: getScale(symbolSize)\n  }); // Rewrite drift method\n\n  symbolPath.drift = driftSymbol;\n  this._symbolType = symbolType;\n  this.add(symbolPath);\n};\n/**\n * Stop animation\n * @param {boolean} toLastFrame\n */\n\n\nsymbolProto.stopSymbolAnimation = function (toLastFrame) {\n  this.childAt(0).stopAnimation(toLastFrame);\n};\n/**\n * FIXME:\n * Caution: This method breaks the encapsulation of this module,\n * but it indeed brings convenience. So do not use the method\n * unless you detailedly know all the implements of `Symbol`,\n * especially animation.\n *\n * Get symbol path element.\n */\n\n\nsymbolProto.getSymbolPath = function () {\n  return this.childAt(0);\n};\n/**\n * Get scale(aka, current symbol size).\n * Including the change caused by animation\n */\n\n\nsymbolProto.getScale = function () {\n  return this.childAt(0).scale;\n};\n/**\n * Highlight symbol\n */\n\n\nsymbolProto.highlight = function () {\n  this.childAt(0).trigger('emphasis');\n};\n/**\n * Downplay symbol\n */\n\n\nsymbolProto.downplay = function () {\n  this.childAt(0).trigger('normal');\n};\n/**\n * @param {number} zlevel\n * @param {number} z\n */\n\n\nsymbolProto.setZ = function (zlevel, z) {\n  var symbolPath = this.childAt(0);\n  symbolPath.zlevel = zlevel;\n  symbolPath.z = z;\n};\n\nsymbolProto.setDraggable = function (draggable) {\n  var symbolPath = this.childAt(0);\n  symbolPath.draggable = draggable;\n  symbolPath.cursor = draggable ? 'move' : symbolPath.cursor;\n};\n/**\n * Update symbol properties\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @param {Object} [seriesScope]\n * @param {Object} [seriesScope.itemStyle]\n * @param {Object} [seriesScope.hoverItemStyle]\n * @param {Object} [seriesScope.symbolRotate]\n * @param {Object} [seriesScope.symbolOffset]\n * @param {module:echarts/model/Model} [seriesScope.labelModel]\n * @param {module:echarts/model/Model} [seriesScope.hoverLabelModel]\n * @param {boolean} [seriesScope.hoverAnimation]\n * @param {Object} [seriesScope.cursorStyle]\n * @param {module:echarts/model/Model} [seriesScope.itemModel]\n * @param {string} [seriesScope.symbolInnerColor]\n * @param {Object} [seriesScope.fadeIn=false]\n */\n\n\nsymbolProto.updateData = function (data, idx, seriesScope) {\n  this.silent = false;\n  var symbolType = data.getItemVisual(idx, 'symbol') || 'circle';\n  var seriesModel = data.hostModel;\n  var symbolSize = getSymbolSize(data, idx);\n  var isInit = symbolType !== this._symbolType;\n\n  if (isInit) {\n    var keepAspect = data.getItemVisual(idx, 'symbolKeepAspect');\n\n    this._createSymbol(symbolType, data, idx, symbolSize, keepAspect);\n  } else {\n    var symbolPath = this.childAt(0);\n    symbolPath.silent = false;\n    graphic.updateProps(symbolPath, {\n      scale: getScale(symbolSize)\n    }, seriesModel, idx);\n  }\n\n  this._updateCommon(data, idx, symbolSize, seriesScope);\n\n  if (isInit) {\n    var symbolPath = this.childAt(0);\n    var fadeIn = seriesScope && seriesScope.fadeIn;\n    var target = {\n      scale: symbolPath.scale.slice()\n    };\n    fadeIn && (target.style = {\n      opacity: symbolPath.style.opacity\n    });\n    symbolPath.scale = [0, 0];\n    fadeIn && (symbolPath.style.opacity = 0);\n    graphic.initProps(symbolPath, target, seriesModel, idx);\n  }\n\n  this._seriesModel = seriesModel;\n}; // Update common properties\n\n\nvar normalStyleAccessPath = ['itemStyle'];\nvar emphasisStyleAccessPath = ['emphasis', 'itemStyle'];\nvar normalLabelAccessPath = ['label'];\nvar emphasisLabelAccessPath = ['emphasis', 'label'];\n/**\n * @param {module:echarts/data/List} data\n * @param {number} idx\n * @param {Array.<number>} symbolSize\n * @param {Object} [seriesScope]\n */\n\nsymbolProto._updateCommon = function (data, idx, symbolSize, seriesScope) {\n  var symbolPath = this.childAt(0);\n  var seriesModel = data.hostModel;\n  var color = data.getItemVisual(idx, 'color'); // Reset style\n\n  if (symbolPath.type !== 'image') {\n    symbolPath.useStyle({\n      strokeNoScale: true\n    });\n  }\n\n  var itemStyle = seriesScope && seriesScope.itemStyle;\n  var hoverItemStyle = seriesScope && seriesScope.hoverItemStyle;\n  var symbolRotate = seriesScope && seriesScope.symbolRotate;\n  var symbolOffset = seriesScope && seriesScope.symbolOffset;\n  var labelModel = seriesScope && seriesScope.labelModel;\n  var hoverLabelModel = seriesScope && seriesScope.hoverLabelModel;\n  var hoverAnimation = seriesScope && seriesScope.hoverAnimation;\n  var cursorStyle = seriesScope && seriesScope.cursorStyle;\n\n  if (!seriesScope || data.hasItemOption) {\n    var itemModel = seriesScope && seriesScope.itemModel ? seriesScope.itemModel : data.getItemModel(idx); // Color must be excluded.\n    // Because symbol provide setColor individually to set fill and stroke\n\n    itemStyle = itemModel.getModel(normalStyleAccessPath).getItemStyle(['color']);\n    hoverItemStyle = itemModel.getModel(emphasisStyleAccessPath).getItemStyle();\n    symbolRotate = itemModel.getShallow('symbolRotate');\n    symbolOffset = itemModel.getShallow('symbolOffset');\n    labelModel = itemModel.getModel(normalLabelAccessPath);\n    hoverLabelModel = itemModel.getModel(emphasisLabelAccessPath);\n    hoverAnimation = itemModel.getShallow('hoverAnimation');\n    cursorStyle = itemModel.getShallow('cursor');\n  } else {\n    hoverItemStyle = zrUtil.extend({}, hoverItemStyle);\n  }\n\n  var elStyle = symbolPath.style;\n  symbolPath.attr('rotation', (symbolRotate || 0) * Math.PI / 180 || 0);\n\n  if (symbolOffset) {\n    symbolPath.attr('position', [parsePercent(symbolOffset[0], symbolSize[0]), parsePercent(symbolOffset[1], symbolSize[1])]);\n  }\n\n  cursorStyle && symbolPath.attr('cursor', cursorStyle); // PENDING setColor before setStyle!!!\n\n  symbolPath.setColor(color, seriesScope && seriesScope.symbolInnerColor);\n  symbolPath.setStyle(itemStyle);\n  var opacity = data.getItemVisual(idx, 'opacity');\n\n  if (opacity != null) {\n    elStyle.opacity = opacity;\n  }\n\n  var liftZ = data.getItemVisual(idx, 'liftZ');\n  var z2Origin = symbolPath.__z2Origin;\n\n  if (liftZ != null) {\n    if (z2Origin == null) {\n      symbolPath.__z2Origin = symbolPath.z2;\n      symbolPath.z2 += liftZ;\n    }\n  } else if (z2Origin != null) {\n    symbolPath.z2 = z2Origin;\n    symbolPath.__z2Origin = null;\n  }\n\n  var useNameLabel = seriesScope && seriesScope.useNameLabel;\n  graphic.setLabelStyle(elStyle, hoverItemStyle, labelModel, hoverLabelModel, {\n    labelFetcher: seriesModel,\n    labelDataIndex: idx,\n    defaultText: getLabelDefaultText,\n    isRectText: true,\n    autoColor: color\n  }); // Do not execute util needed.\n\n  function getLabelDefaultText(idx, opt) {\n    return useNameLabel ? data.getName(idx) : getDefaultLabel(data, idx);\n  }\n\n  symbolPath.__symbolOriginalScale = getScale(symbolSize);\n  symbolPath.hoverStyle = hoverItemStyle;\n  symbolPath.highDownOnUpdate = hoverAnimation && seriesModel.isAnimationEnabled() ? highDownOnUpdate : null;\n  graphic.setHoverStyle(symbolPath);\n};\n\nfunction highDownOnUpdate(fromState, toState) {\n  // Do not support this hover animation util some scenario required.\n  // Animation can only be supported in hover layer when using `el.incremetal`.\n  if (this.incremental || this.useHoverLayer) {\n    return;\n  }\n\n  if (toState === 'emphasis') {\n    var scale = this.__symbolOriginalScale;\n    var ratio = scale[1] / scale[0];\n    var emphasisOpt = {\n      scale: [Math.max(scale[0] * 1.1, scale[0] + 3), Math.max(scale[1] * 1.1, scale[1] + 3 * ratio)]\n    }; // FIXME\n    // modify it after support stop specified animation.\n    // toState === fromState\n    //     ? (this.stopAnimation(), this.attr(emphasisOpt))\n\n    this.animateTo(emphasisOpt, 400, 'elasticOut');\n  } else if (toState === 'normal') {\n    this.animateTo({\n      scale: this.__symbolOriginalScale\n    }, 400, 'elasticOut');\n  }\n}\n/**\n * @param {Function} cb\n * @param {Object} [opt]\n * @param {Object} [opt.keepLabel=true]\n */\n\n\nsymbolProto.fadeOut = function (cb, opt) {\n  var symbolPath = this.childAt(0); // Avoid mistaken hover when fading out\n\n  this.silent = symbolPath.silent = true; // Not show text when animating\n\n  !(opt && opt.keepLabel) && (symbolPath.style.text = null);\n  graphic.updateProps(symbolPath, {\n    style: {\n      opacity: 0\n    },\n    scale: [0, 0]\n  }, this._seriesModel, this.dataIndex, cb);\n};\n\nzrUtil.inherits(SymbolClz, graphic.Group);\nvar _default = SymbolClz;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _dataStackHelper = require(\"../../data/helper/dataStackHelper\");\n\nvar isDimensionStacked = _dataStackHelper.isDimensionStacked;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar map = _util.map;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {Object} coordSys\n * @param {module:echarts/data/List} data\n * @param {string} valueOrigin lineSeries.option.areaStyle.origin\n */\n\nfunction prepareDataCoordInfo(coordSys, data, valueOrigin) {\n  var baseAxis = coordSys.getBaseAxis();\n  var valueAxis = coordSys.getOtherAxis(baseAxis);\n  var valueStart = getValueStart(valueAxis, valueOrigin);\n  var baseAxisDim = baseAxis.dim;\n  var valueAxisDim = valueAxis.dim;\n  var valueDim = data.mapDimension(valueAxisDim);\n  var baseDim = data.mapDimension(baseAxisDim);\n  var baseDataOffset = valueAxisDim === 'x' || valueAxisDim === 'radius' ? 1 : 0;\n  var dims = map(coordSys.dimensions, function (coordDim) {\n    return data.mapDimension(coordDim);\n  });\n  var stacked;\n  var stackResultDim = data.getCalculationInfo('stackResultDimension');\n\n  if (stacked |= isDimensionStacked(data, dims[0]\n  /*, dims[1]*/\n  )) {\n    // jshint ignore:line\n    dims[0] = stackResultDim;\n  }\n\n  if (stacked |= isDimensionStacked(data, dims[1]\n  /*, dims[0]*/\n  )) {\n    // jshint ignore:line\n    dims[1] = stackResultDim;\n  }\n\n  return {\n    dataDimsForPoint: dims,\n    valueStart: valueStart,\n    valueAxisDim: valueAxisDim,\n    baseAxisDim: baseAxisDim,\n    stacked: !!stacked,\n    valueDim: valueDim,\n    baseDim: baseDim,\n    baseDataOffset: baseDataOffset,\n    stackedOverDimension: data.getCalculationInfo('stackedOverDimension')\n  };\n}\n\nfunction getValueStart(valueAxis, valueOrigin) {\n  var valueStart = 0;\n  var extent = valueAxis.scale.getExtent();\n\n  if (valueOrigin === 'start') {\n    valueStart = extent[0];\n  } else if (valueOrigin === 'end') {\n    valueStart = extent[1];\n  } // auto\n  else {\n      // Both positive\n      if (extent[0] > 0) {\n        valueStart = extent[0];\n      } // Both negative\n      else if (extent[1] < 0) {\n          valueStart = extent[1];\n        } // If is one positive, and one negative, onZero shall be true\n\n    }\n\n  return valueStart;\n}\n\nfunction getStackedOnPoint(dataCoordInfo, coordSys, data, idx) {\n  var value = NaN;\n\n  if (dataCoordInfo.stacked) {\n    value = data.get(data.getCalculationInfo('stackedOverDimension'), idx);\n  }\n\n  if (isNaN(value)) {\n    value = dataCoordInfo.valueStart;\n  }\n\n  var baseDataOffset = dataCoordInfo.baseDataOffset;\n  var stackedData = [];\n  stackedData[baseDataOffset] = data.get(dataCoordInfo.baseDim, idx);\n  stackedData[1 - baseDataOffset] = value;\n  return coordSys.dataToPoint(stackedData);\n}\n\nexports.prepareDataCoordInfo = prepareDataCoordInfo;\nexports.getStackedOnPoint = getStackedOnPoint;","/*!\n* screenfull\n* v5.0.0 - 2019-09-09\n* (c) Sindre Sorhus; MIT License\n*/\n(function () {\n  'use strict';\n\n  var document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\n  var isCommonjs = typeof module !== 'undefined' && module.exports;\n\n  var fn = function () {\n    var val;\n    var fnMap = [['requestFullscreen', 'exitFullscreen', 'fullscreenElement', 'fullscreenEnabled', 'fullscreenchange', 'fullscreenerror'], // New WebKit\n    ['webkitRequestFullscreen', 'webkitExitFullscreen', 'webkitFullscreenElement', 'webkitFullscreenEnabled', 'webkitfullscreenchange', 'webkitfullscreenerror'], // Old WebKit\n    ['webkitRequestFullScreen', 'webkitCancelFullScreen', 'webkitCurrentFullScreenElement', 'webkitCancelFullScreen', 'webkitfullscreenchange', 'webkitfullscreenerror'], ['mozRequestFullScreen', 'mozCancelFullScreen', 'mozFullScreenElement', 'mozFullScreenEnabled', 'mozfullscreenchange', 'mozfullscreenerror'], ['msRequestFullscreen', 'msExitFullscreen', 'msFullscreenElement', 'msFullscreenEnabled', 'MSFullscreenChange', 'MSFullscreenError']];\n    var i = 0;\n    var l = fnMap.length;\n    var ret = {};\n\n    for (; i < l; i++) {\n      val = fnMap[i];\n\n      if (val && val[1] in document) {\n        for (i = 0; i < val.length; i++) {\n          ret[fnMap[0][i]] = val[i];\n        }\n\n        return ret;\n      }\n    }\n\n    return false;\n  }();\n\n  var eventNameMap = {\n    change: fn.fullscreenchange,\n    error: fn.fullscreenerror\n  };\n  var screenfull = {\n    request: function request(element) {\n      return new Promise(function (resolve, reject) {\n        var onFullScreenEntered = function () {\n          this.off('change', onFullScreenEntered);\n          resolve();\n        }.bind(this);\n\n        this.on('change', onFullScreenEntered);\n        element = element || document.documentElement;\n        Promise.resolve(element[fn.requestFullscreen]()).catch(reject);\n      }.bind(this));\n    },\n    exit: function exit() {\n      return new Promise(function (resolve, reject) {\n        if (!this.isFullscreen) {\n          resolve();\n          return;\n        }\n\n        var onFullScreenExit = function () {\n          this.off('change', onFullScreenExit);\n          resolve();\n        }.bind(this);\n\n        this.on('change', onFullScreenExit);\n        Promise.resolve(document[fn.exitFullscreen]()).catch(reject);\n      }.bind(this));\n    },\n    toggle: function toggle(element) {\n      return this.isFullscreen ? this.exit() : this.request(element);\n    },\n    onchange: function onchange(callback) {\n      this.on('change', callback);\n    },\n    onerror: function onerror(callback) {\n      this.on('error', callback);\n    },\n    on: function on(event, callback) {\n      var eventName = eventNameMap[event];\n\n      if (eventName) {\n        document.addEventListener(eventName, callback, false);\n      }\n    },\n    off: function off(event, callback) {\n      var eventName = eventNameMap[event];\n\n      if (eventName) {\n        document.removeEventListener(eventName, callback, false);\n      }\n    },\n    raw: fn\n  };\n\n  if (!fn) {\n    if (isCommonjs) {\n      module.exports = {\n        isEnabled: false\n      };\n    } else {\n      window.screenfull = {\n        isEnabled: false\n      };\n    }\n\n    return;\n  }\n\n  Object.defineProperties(screenfull, {\n    isFullscreen: {\n      get: function get() {\n        return Boolean(document[fn.fullscreenElement]);\n      }\n    },\n    element: {\n      enumerable: true,\n      get: function get() {\n        return document[fn.fullscreenElement];\n      }\n    },\n    isEnabled: {\n      enumerable: true,\n      get: function get() {\n        // Coerce to boolean in case of old WebKit\n        return Boolean(document[fn.fullscreenEnabled]);\n      }\n    }\n  });\n\n  if (isCommonjs) {\n    module.exports = screenfull;\n  } else {\n    window.screenfull = screenfull;\n  }\n})();","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _barGrid = require(\"../layout/barGrid\");\n\nvar layout = _barGrid.layout;\nvar largeLayout = _barGrid.largeLayout;\n\nrequire(\"../coord/cartesian/Grid\");\n\nrequire(\"./bar/BarSeries\");\n\nrequire(\"./bar/BarView\");\n\nrequire(\"../component/gridSimple\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// In case developer forget to include grid component\n\n\necharts.registerLayout(echarts.PRIORITY.VISUAL.LAYOUT, zrUtil.curry(layout, 'bar')); // Use higher prority to avoid to be blocked by other overall layout, which do not\n// only exist in this module, but probably also exist in other modules, like `barPolar`.\n\necharts.registerLayout(echarts.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, largeLayout);\necharts.registerVisual({\n  seriesType: 'bar',\n  reset: function reset(seriesModel) {\n    // Visual coding for legend\n    seriesModel.getData().setVisual('legendSymbol', 'roundRect');\n  }\n});","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar Cartesian = require(\"./Cartesian\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// A helper function to calculate extent of axis.\n\n\nfunction getAxisExtentWithGap(axis) {\n  var extent = axis.getGlobalExtent();\n\n  if (axis.onBand) {\n    // Remove extra 1px to avoid line miter in clipped edge\n    var halfBandWidth = axis.getBandWidth() / 2 - 1;\n    var dir = extent[1] > extent[0] ? 1 : -1;\n    extent[0] += dir * halfBandWidth;\n    extent[1] -= dir * halfBandWidth;\n  }\n\n  return extent;\n}\n\nfunction Cartesian2D(name) {\n  Cartesian.call(this, name);\n}\n\nCartesian2D.prototype = {\n  constructor: Cartesian2D,\n  type: 'cartesian2d',\n\n  /**\n   * @type {Array.<string>}\n   * @readOnly\n   */\n  dimensions: ['x', 'y'],\n\n  /**\n   * Base axis will be used on stacking.\n   *\n   * @return {module:echarts/coord/cartesian/Axis2D}\n   */\n  getBaseAxis: function getBaseAxis() {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x');\n  },\n\n  /**\n   * If contain point\n   * @param {Array.<number>} point\n   * @return {boolean}\n   */\n  containPoint: function containPoint(point) {\n    var axisX = this.getAxis('x');\n    var axisY = this.getAxis('y');\n    return axisX.contain(axisX.toLocalCoord(point[0])) && axisY.contain(axisY.toLocalCoord(point[1]));\n  },\n\n  /**\n   * If contain data\n   * @param {Array.<number>} data\n   * @return {boolean}\n   */\n  containData: function containData(data) {\n    return this.getAxis('x').containData(data[0]) && this.getAxis('y').containData(data[1]);\n  },\n\n  /**\n   * @param {Array.<number>} data\n   * @param {Array.<number>} out\n   * @return {Array.<number>}\n   */\n  dataToPoint: function dataToPoint(data, reserved, out) {\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out = out || [];\n    out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(data[0]));\n    out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(data[1]));\n    return out;\n  },\n\n  /**\n   * @param {Array.<number>} data\n   * @param {Array.<number>} out\n   * @return {Array.<number>}\n   */\n  clampData: function clampData(data, out) {\n    var xScale = this.getAxis('x').scale;\n    var yScale = this.getAxis('y').scale;\n    var xAxisExtent = xScale.getExtent();\n    var yAxisExtent = yScale.getExtent();\n    var x = xScale.parse(data[0]);\n    var y = yScale.parse(data[1]);\n    out = out || [];\n    out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\n    out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\n    return out;\n  },\n\n  /**\n   * @param {Array.<number>} point\n   * @param {Array.<number>} out\n   * @return {Array.<number>}\n   */\n  pointToData: function pointToData(point, out) {\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out = out || [];\n    out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]));\n    out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]));\n    return out;\n  },\n\n  /**\n   * Get other axis\n   * @param {module:echarts/coord/cartesian/Axis2D} axis\n   */\n  getOtherAxis: function getOtherAxis(axis) {\n    return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\n  },\n\n  /**\n   * Get rect area of cartesian.\n   * Area will have a contain function to determine if a point is in the coordinate system.\n   * @return {BoundingRect}\n   */\n  getArea: function getArea() {\n    var xExtent = this.getAxis('x').getGlobalExtent();\n    var yExtent = this.getAxis('y').getGlobalExtent();\n    var x = Math.min(xExtent[0], xExtent[1]);\n    var y = Math.min(yExtent[0], yExtent[1]);\n    var width = Math.max(xExtent[0], xExtent[1]) - x;\n    var height = Math.max(yExtent[0], yExtent[1]) - y;\n    var rect = new BoundingRect(x, y, width, height);\n    return rect;\n  }\n};\nzrUtil.inherits(Cartesian2D, Cartesian);\nvar _default = Cartesian2D;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Cartesian coordinate system\n * @module  echarts/coord/Cartesian\n *\n */\n\n\nfunction dimAxisMapper(dim) {\n  return this._axes[dim];\n}\n/**\n * @alias module:echarts/coord/Cartesian\n * @constructor\n */\n\n\nvar Cartesian = function Cartesian(name) {\n  this._axes = {};\n  this._dimList = [];\n  /**\n   * @type {string}\n   */\n\n  this.name = name || '';\n};\n\nCartesian.prototype = {\n  constructor: Cartesian,\n  type: 'cartesian',\n\n  /**\n   * Get axis\n   * @param  {number|string} dim\n   * @return {module:echarts/coord/Cartesian~Axis}\n   */\n  getAxis: function getAxis(dim) {\n    return this._axes[dim];\n  },\n\n  /**\n   * Get axes list\n   * @return {Array.<module:echarts/coord/Cartesian~Axis>}\n   */\n  getAxes: function getAxes() {\n    return zrUtil.map(this._dimList, dimAxisMapper, this);\n  },\n\n  /**\n   * Get axes list by given scale type\n   */\n  getAxesByScale: function getAxesByScale(scaleType) {\n    scaleType = scaleType.toLowerCase();\n    return zrUtil.filter(this.getAxes(), function (axis) {\n      return axis.scale.type === scaleType;\n    });\n  },\n\n  /**\n   * Add axis\n   * @param {module:echarts/coord/Cartesian.Axis}\n   */\n  addAxis: function addAxis(axis) {\n    var dim = axis.dim;\n    this._axes[dim] = axis;\n\n    this._dimList.push(dim);\n  },\n\n  /**\n   * Convert data to coord in nd space\n   * @param {Array.<number>|Object.<string, number>} val\n   * @return {Array.<number>|Object.<string, number>}\n   */\n  dataToCoord: function dataToCoord(val) {\n    return this._dataCoordConvert(val, 'dataToCoord');\n  },\n\n  /**\n   * Convert coord in nd space to data\n   * @param  {Array.<number>|Object.<string, number>} val\n   * @return {Array.<number>|Object.<string, number>}\n   */\n  coordToData: function coordToData(val) {\n    return this._dataCoordConvert(val, 'coordToData');\n  },\n  _dataCoordConvert: function _dataCoordConvert(input, method) {\n    var dimList = this._dimList;\n    var output = input instanceof Array ? [] : {};\n\n    for (var i = 0; i < dimList.length; i++) {\n      var dim = dimList[i];\n      var axis = this._axes[dim];\n      output[dim] = axis[method](input[dim]);\n    }\n\n    return output;\n  }\n};\nvar _default = Cartesian;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Axis = require(\"../Axis\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Extend axis 2d\n * @constructor module:echarts/coord/cartesian/Axis2D\n * @extends {module:echarts/coord/cartesian/Axis}\n * @param {string} dim\n * @param {*} scale\n * @param {Array.<number>} coordExtent\n * @param {string} axisType\n * @param {string} position\n */\n\n\nvar Axis2D = function Axis2D(dim, scale, coordExtent, axisType, position) {\n  Axis.call(this, dim, scale, coordExtent);\n  /**\n   * Axis type\n   *  - 'category'\n   *  - 'value'\n   *  - 'time'\n   *  - 'log'\n   * @type {string}\n   */\n\n  this.type = axisType || 'value';\n  /**\n   * Axis position\n   *  - 'top'\n   *  - 'bottom'\n   *  - 'left'\n   *  - 'right'\n   */\n\n  this.position = position || 'bottom';\n};\n\nAxis2D.prototype = {\n  constructor: Axis2D,\n\n  /**\n   * Index of axis, can be used as key\n   */\n  index: 0,\n\n  /**\n   * Implemented in <module:echarts/coord/cartesian/Grid>.\n   * @return {Array.<module:echarts/coord/cartesian/Axis2D>}\n   *         If not on zero of other axis, return null/undefined.\n   *         If no axes, return an empty array.\n   */\n  getAxesOnZeroOf: null,\n\n  /**\n   * Axis model\n   * @param {module:echarts/coord/cartesian/AxisModel}\n   */\n  model: null,\n  isHorizontal: function isHorizontal() {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  },\n\n  /**\n   * Each item cooresponds to this.getExtent(), which\n   * means globalExtent[0] may greater than globalExtent[1],\n   * unless `asc` is input.\n   *\n   * @param {boolean} [asc]\n   * @return {Array.<number>}\n   */\n  getGlobalExtent: function getGlobalExtent(asc) {\n    var ret = this.getExtent();\n    ret[0] = this.toGlobalCoord(ret[0]);\n    ret[1] = this.toGlobalCoord(ret[1]);\n    asc && ret[0] > ret[1] && ret.reverse();\n    return ret;\n  },\n  getOtherAxis: function getOtherAxis() {\n    this.grid.getOtherAxis();\n  },\n\n  /**\n   * @override\n   */\n  pointToData: function pointToData(point, clamp) {\n    return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\n  },\n\n  /**\n   * Transform global coord to local coord,\n   * i.e. var localCoord = axis.toLocalCoord(80);\n   * designate by module:echarts/coord/cartesian/Grid.\n   * @type {Function}\n   */\n  toLocalCoord: null,\n\n  /**\n   * Transform global coord to local coord,\n   * i.e. var globalCoord = axis.toLocalCoord(40);\n   * designate by module:echarts/coord/cartesian/Grid.\n   * @type {Function}\n   */\n  toGlobalCoord: null\n};\nzrUtil.inherits(Axis2D, Axis);\nvar _default = Axis2D;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nrequire(\"./AxisModel\");\n\nvar ComponentModel = require(\"../../model/Component\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Grid \n//  Cartesian2D \n\n\nvar _default = ComponentModel.extend({\n  type: 'grid',\n  dependencies: ['xAxis', 'yAxis'],\n  layoutMode: 'box',\n\n  /**\n   * @type {module:echarts/coord/cartesian/Grid}\n   */\n  coordinateSystem: null,\n  defaultOption: {\n    show: false,\n    zlevel: 0,\n    z: 0,\n    left: '10%',\n    top: 60,\n    right: '10%',\n    bottom: 60,\n    // If grid size contain label\n    containLabel: false,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderWidth: 1,\n    borderColor: '#ccc'\n  }\n});\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar axisDefault = require(\"./axisDefault\");\n\nvar ComponentModel = require(\"../model/Component\");\n\nvar _layout = require(\"../util/layout\");\n\nvar getLayoutParams = _layout.getLayoutParams;\nvar mergeLayoutParam = _layout.mergeLayoutParam;\n\nvar OrdinalMeta = require(\"../data/OrdinalMeta\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME axisType is fixed ?\n\n\nvar AXIS_TYPES = ['value', 'category', 'time', 'log'];\n/**\n * Generate sub axis model class\n * @param {string} axisName 'x' 'y' 'radius' 'angle' 'parallel'\n * @param {module:echarts/model/Component} BaseAxisModelClass\n * @param {Function} axisTypeDefaulter\n * @param {Object} [extraDefaultOption]\n */\n\nfunction _default(axisName, BaseAxisModelClass, axisTypeDefaulter, extraDefaultOption) {\n  zrUtil.each(AXIS_TYPES, function (axisType) {\n    BaseAxisModelClass.extend({\n      /**\n       * @readOnly\n       */\n      type: axisName + 'Axis.' + axisType,\n      mergeDefaultAndTheme: function mergeDefaultAndTheme(option, ecModel) {\n        var layoutMode = this.layoutMode;\n        var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n        var themeModel = ecModel.getTheme();\n        zrUtil.merge(option, themeModel.get(axisType + 'Axis'));\n        zrUtil.merge(option, this.getDefaultOption());\n        option.type = axisTypeDefaulter(axisName, option);\n\n        if (layoutMode) {\n          mergeLayoutParam(option, inputPositionParams, layoutMode);\n        }\n      },\n\n      /**\n       * @override\n       */\n      optionUpdated: function optionUpdated() {\n        var thisOption = this.option;\n\n        if (thisOption.type === 'category') {\n          this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\n        }\n      },\n\n      /**\n       * Should not be called before all of 'getInitailData' finished.\n       * Because categories are collected during initializing data.\n       */\n      getCategories: function getCategories(rawData) {\n        var option = this.option; // FIXME\n        // warning if called before all of 'getInitailData' finished.\n\n        if (option.type === 'category') {\n          if (rawData) {\n            return option.data;\n          }\n\n          return this.__ordinalMeta.categories;\n        }\n      },\n      getOrdinalMeta: function getOrdinalMeta() {\n        return this.__ordinalMeta;\n      },\n      defaultOption: zrUtil.mergeAll([{}, axisDefault[axisType + 'Axis'], extraDefaultOption], true)\n    });\n  });\n  ComponentModel.registerSubTypeDefaulter(axisName + 'Axis', zrUtil.curry(axisTypeDefaulter, axisName));\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar defaultOption = {\n  show: true,\n  zlevel: 0,\n  z: 0,\n  // Inverse the axis.\n  inverse: false,\n  // Axis name displayed.\n  name: '',\n  // 'start' | 'middle' | 'end'\n  nameLocation: 'end',\n  // By degree. By defualt auto rotate by nameLocation.\n  nameRotate: null,\n  nameTruncate: {\n    maxWidth: null,\n    ellipsis: '...',\n    placeholder: '.'\n  },\n  // Use global text style by default.\n  nameTextStyle: {},\n  // The gap between axisName and axisLine.\n  nameGap: 15,\n  // Default `false` to support tooltip.\n  silent: false,\n  // Default `false` to avoid legacy user event listener fail.\n  triggerEvent: false,\n  tooltip: {\n    show: false\n  },\n  axisPointer: {},\n  axisLine: {\n    show: true,\n    onZero: true,\n    onZeroAxisIndex: null,\n    lineStyle: {\n      color: '#333',\n      width: 1,\n      type: 'solid'\n    },\n    // The arrow at both ends the the axis.\n    symbol: ['none', 'none'],\n    symbolSize: [10, 15]\n  },\n  axisTick: {\n    show: true,\n    // Whether axisTick is inside the grid or outside the grid.\n    inside: false,\n    // The length of axisTick.\n    length: 5,\n    lineStyle: {\n      width: 1\n    }\n  },\n  axisLabel: {\n    show: true,\n    // Whether axisLabel is inside the grid or outside the grid.\n    inside: false,\n    rotate: 0,\n    // true | false | null/undefined (auto)\n    showMinLabel: null,\n    // true | false | null/undefined (auto)\n    showMaxLabel: null,\n    margin: 8,\n    // formatter: null,\n    fontSize: 12\n  },\n  splitLine: {\n    show: true,\n    lineStyle: {\n      color: ['#ccc'],\n      width: 1,\n      type: 'solid'\n    }\n  },\n  splitArea: {\n    show: false,\n    areaStyle: {\n      color: ['rgba(250,250,250,0.3)', 'rgba(200,200,200,0.3)']\n    }\n  }\n};\nvar axisDefault = {};\naxisDefault.categoryAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For categoryAxis, boolean.\n  boundaryGap: true,\n  // Set false to faster category collection.\n  // Only usefull in the case like: category is\n  // ['2012-01-01', '2012-01-02', ...], where the input\n  // data has been ensured not duplicate and is large data.\n  // null means \"auto\":\n  // if axis.data provided, do not deduplication,\n  // else do deduplication.\n  deduplication: null,\n  // splitArea: {\n  // show: false\n  // },\n  splitLine: {\n    show: false\n  },\n  axisTick: {\n    // If tick is align with label when boundaryGap is true\n    alignWithLabel: false,\n    interval: 'auto'\n  },\n  axisLabel: {\n    interval: 'auto'\n  }\n}, defaultOption);\naxisDefault.valueAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For value axis, [GAP, GAP], where\n  // `GAP` can be an absolute pixel number (like `35`), or percent (like `'30%'`)\n  boundaryGap: [0, 0],\n  // TODO\n  // min/max: [30, datamin, 60] or [20, datamin] or [datamin, 60]\n  // Min value of the axis. can be:\n  // + a number\n  // + 'dataMin': use the min value in data.\n  // + null/undefined: auto decide min value (consider pretty look and boundaryGap).\n  // min: null,\n  // Max value of the axis. can be:\n  // + a number\n  // + 'dataMax': use the max value in data.\n  // + null/undefined: auto decide max value (consider pretty look and boundaryGap).\n  // max: null,\n  // Readonly prop, specifies start value of the range when using data zoom.\n  // rangeStart: null\n  // Readonly prop, specifies end value of the range when using data zoom.\n  // rangeEnd: null\n  // Optional value can be:\n  // + `false`: always include value 0.\n  // + `true`: the extent do not consider value 0.\n  // scale: false,\n  // AxisTick and axisLabel and splitLine are caculated based on splitNumber.\n  splitNumber: 5 // Interval specifies the span of the ticks is mandatorily.\n  // interval: null\n  // Specify min interval when auto calculate tick interval.\n  // minInterval: null\n  // Specify max interval when auto calculate tick interval.\n  // maxInterval: null\n\n}, defaultOption);\naxisDefault.timeAxis = zrUtil.defaults({\n  scale: true,\n  min: 'dataMin',\n  max: 'dataMax'\n}, axisDefault.valueAxis);\naxisDefault.logAxis = zrUtil.defaults({\n  scale: true,\n  logBase: 10\n}, axisDefault.valueAxis);\nvar _default = axisDefault;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar BaseBarSeries = require(\"./BaseBarSeries\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar _default = BaseBarSeries.extend({\n  type: 'series.bar',\n  dependencies: ['grid', 'polar'],\n  brushSelector: 'rect',\n\n  /**\n   * @override\n   */\n  getProgressive: function getProgressive() {\n    // Do not support progressive in normal mode.\n    return this.get('large') ? this.get('progressive') : false;\n  },\n\n  /**\n   * @override\n   */\n  getProgressiveThreshold: function getProgressiveThreshold() {\n    // Do not support progressive in normal mode.\n    var progressiveThreshold = this.get('progressiveThreshold');\n    var largeThreshold = this.get('largeThreshold');\n\n    if (largeThreshold > progressiveThreshold) {\n      progressiveThreshold = largeThreshold;\n    }\n\n    return progressiveThreshold;\n  },\n  defaultOption: {\n    // If clipped\n    // Only available on cartesian2d\n    clip: true\n  }\n});\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _helper = require(\"./helper\");\n\nvar setLabel = _helper.setLabel;\n\nvar Model = require(\"../../model/Model\");\n\nvar barItemStyle = require(\"./barItemStyle\");\n\nvar Path = require(\"zrender/lib/graphic/Path\");\n\nvar _throttle = require(\"../../util/throttle\");\n\nvar throttle = _throttle.throttle;\n\nvar _createClipPathFromCoordSys = require(\"../helper/createClipPathFromCoordSys\");\n\nvar createClipPath = _createClipPathFromCoordSys.createClipPath;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar BAR_BORDER_WIDTH_QUERY = ['itemStyle', 'barBorderWidth'];\nvar _eventPos = [0, 0]; // FIXME\n// Just for compatible with ec2.\n\nzrUtil.extend(Model.prototype, barItemStyle);\n\nfunction getClipArea(coord, data) {\n  var coordSysClipArea = coord.getArea && coord.getArea();\n\n  if (coord.type === 'cartesian2d') {\n    var baseAxis = coord.getBaseAxis(); // When boundaryGap is false or using time axis. bar may exceed the grid.\n    // We should not clip this part.\n    // See test/bar2.html\n\n    if (baseAxis.type !== 'category' || !baseAxis.onBand) {\n      var expandWidth = data.getLayout('bandWidth');\n\n      if (baseAxis.isHorizontal()) {\n        coordSysClipArea.x -= expandWidth;\n        coordSysClipArea.width += expandWidth * 2;\n      } else {\n        coordSysClipArea.y -= expandWidth;\n        coordSysClipArea.height += expandWidth * 2;\n      }\n    }\n  }\n\n  return coordSysClipArea;\n}\n\nvar _default = echarts.extendChartView({\n  type: 'bar',\n  render: function render(seriesModel, ecModel, api) {\n    this._updateDrawMode(seriesModel);\n\n    var coordinateSystemType = seriesModel.get('coordinateSystem');\n\n    if (coordinateSystemType === 'cartesian2d' || coordinateSystemType === 'polar') {\n      this._isLargeDraw ? this._renderLarge(seriesModel, ecModel, api) : this._renderNormal(seriesModel, ecModel, api);\n    } else {}\n\n    return this.group;\n  },\n  incrementalPrepareRender: function incrementalPrepareRender(seriesModel, ecModel, api) {\n    this._clear();\n\n    this._updateDrawMode(seriesModel);\n  },\n  incrementalRender: function incrementalRender(params, seriesModel, ecModel, api) {\n    // Do not support progressive in normal mode.\n    this._incrementalRenderLarge(params, seriesModel);\n  },\n  _updateDrawMode: function _updateDrawMode(seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n\n    if (this._isLargeDraw == null || isLargeDraw ^ this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n\n      this._clear();\n    }\n  },\n  _renderNormal: function _renderNormal(seriesModel, ecModel, api) {\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var coord = seriesModel.coordinateSystem;\n    var baseAxis = coord.getBaseAxis();\n    var isHorizontalOrRadial;\n\n    if (coord.type === 'cartesian2d') {\n      isHorizontalOrRadial = baseAxis.isHorizontal();\n    } else if (coord.type === 'polar') {\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\n    }\n\n    var animationModel = seriesModel.isAnimationEnabled() ? seriesModel : null;\n    var needsClip = seriesModel.get('clip', true);\n    var coordSysClipArea = getClipArea(coord, data); // If there is clipPath created in large mode. Remove it.\n\n    group.removeClipPath(); // We don't use clipPath in normal mode because we needs a perfect animation\n    // And don't want the label are clipped.\n\n    data.diff(oldData).add(function (dataIndex) {\n      if (!data.hasValue(dataIndex)) {\n        return;\n      }\n\n      var itemModel = data.getItemModel(dataIndex);\n      var layout = getLayout[coord.type](data, dataIndex, itemModel);\n\n      if (needsClip) {\n        // Clip will modify the layout params.\n        // And return a boolean to determine if the shape are fully clipped.\n        var isClipped = clip[coord.type](coordSysClipArea, layout);\n\n        if (isClipped) {\n          group.remove(el);\n          return;\n        }\n      }\n\n      var el = elementCreator[coord.type](data, dataIndex, itemModel, layout, isHorizontalOrRadial, animationModel);\n      data.setItemGraphicEl(dataIndex, el);\n      group.add(el);\n      updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n    }).update(function (newIndex, oldIndex) {\n      var el = oldData.getItemGraphicEl(oldIndex);\n\n      if (!data.hasValue(newIndex)) {\n        group.remove(el);\n        return;\n      }\n\n      var itemModel = data.getItemModel(newIndex);\n      var layout = getLayout[coord.type](data, newIndex, itemModel);\n\n      if (needsClip) {\n        var isClipped = clip[coord.type](coordSysClipArea, layout);\n\n        if (isClipped) {\n          group.remove(el);\n          return;\n        }\n      }\n\n      if (el) {\n        graphic.updateProps(el, {\n          shape: layout\n        }, animationModel, newIndex);\n      } else {\n        el = elementCreator[coord.type](data, newIndex, itemModel, layout, isHorizontalOrRadial, animationModel, true);\n      }\n\n      data.setItemGraphicEl(newIndex, el); // Add back\n\n      group.add(el);\n      updateStyle(el, data, newIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n    }).remove(function (dataIndex) {\n      var el = oldData.getItemGraphicEl(dataIndex);\n\n      if (coord.type === 'cartesian2d') {\n        el && removeRect(dataIndex, animationModel, el);\n      } else {\n        el && removeSector(dataIndex, animationModel, el);\n      }\n    }).execute();\n    this._data = data;\n  },\n  _renderLarge: function _renderLarge(seriesModel, ecModel, api) {\n    this._clear();\n\n    createLarge(seriesModel, this.group); // Use clipPath in large mode.\n\n    var clipPath = seriesModel.get('clip', true) ? createClipPath(seriesModel.coordinateSystem, false, seriesModel) : null;\n\n    if (clipPath) {\n      this.group.setClipPath(clipPath);\n    } else {\n      this.group.removeClipPath();\n    }\n  },\n  _incrementalRenderLarge: function _incrementalRenderLarge(params, seriesModel) {\n    createLarge(seriesModel, this.group, true);\n  },\n  dispose: zrUtil.noop,\n  remove: function remove(ecModel) {\n    this._clear(ecModel);\n  },\n  _clear: function _clear(ecModel) {\n    var group = this.group;\n    var data = this._data;\n\n    if (ecModel && ecModel.get('animation') && data && !this._isLargeDraw) {\n      data.eachItemGraphicEl(function (el) {\n        if (el.type === 'sector') {\n          removeSector(el.dataIndex, ecModel, el);\n        } else {\n          removeRect(el.dataIndex, ecModel, el);\n        }\n      });\n    } else {\n      group.removeAll();\n    }\n\n    this._data = null;\n  }\n});\n\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar clip = {\n  cartesian2d: function cartesian2d(coordSysBoundingRect, layout) {\n    var signWidth = layout.width < 0 ? -1 : 1;\n    var signHeight = layout.height < 0 ? -1 : 1; // Needs positive width and height\n\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n\n    var x = mathMax(layout.x, coordSysBoundingRect.x);\n    var x2 = mathMin(layout.x + layout.width, coordSysBoundingRect.x + coordSysBoundingRect.width);\n    var y = mathMax(layout.y, coordSysBoundingRect.y);\n    var y2 = mathMin(layout.y + layout.height, coordSysBoundingRect.y + coordSysBoundingRect.height);\n    layout.x = x;\n    layout.y = y;\n    layout.width = x2 - x;\n    layout.height = y2 - y;\n    var clipped = layout.width < 0 || layout.height < 0; // Reverse back\n\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n\n    return clipped;\n  },\n  polar: function polar(coordSysClipArea) {\n    return false;\n  }\n};\nvar elementCreator = {\n  cartesian2d: function cartesian2d(data, dataIndex, itemModel, layout, isHorizontal, animationModel, isUpdate) {\n    var rect = new graphic.Rect({\n      shape: zrUtil.extend({}, layout)\n    }); // Animation\n\n    if (animationModel) {\n      var rectShape = rect.shape;\n      var animateProperty = isHorizontal ? 'height' : 'width';\n      var animateTarget = {};\n      rectShape[animateProperty] = 0;\n      animateTarget[animateProperty] = layout[animateProperty];\n      graphic[isUpdate ? 'updateProps' : 'initProps'](rect, {\n        shape: animateTarget\n      }, animationModel, dataIndex);\n    }\n\n    return rect;\n  },\n  polar: function polar(data, dataIndex, itemModel, layout, isRadial, animationModel, isUpdate) {\n    // Keep the same logic with bar in catesion: use end value to control\n    // direction. Notice that if clockwise is true (by default), the sector\n    // will always draw clockwisely, no matter whether endAngle is greater\n    // or less than startAngle.\n    var clockwise = layout.startAngle < layout.endAngle;\n    var sector = new graphic.Sector({\n      shape: zrUtil.defaults({\n        clockwise: clockwise\n      }, layout)\n    }); // Animation\n\n    if (animationModel) {\n      var sectorShape = sector.shape;\n      var animateProperty = isRadial ? 'r' : 'endAngle';\n      var animateTarget = {};\n      sectorShape[animateProperty] = isRadial ? 0 : layout.startAngle;\n      animateTarget[animateProperty] = layout[animateProperty];\n      graphic[isUpdate ? 'updateProps' : 'initProps'](sector, {\n        shape: animateTarget\n      }, animationModel, dataIndex);\n    }\n\n    return sector;\n  }\n};\n\nfunction removeRect(dataIndex, animationModel, el) {\n  // Not show text when animating\n  el.style.text = null;\n  graphic.updateProps(el, {\n    shape: {\n      width: 0\n    }\n  }, animationModel, dataIndex, function () {\n    el.parent && el.parent.remove(el);\n  });\n}\n\nfunction removeSector(dataIndex, animationModel, el) {\n  // Not show text when animating\n  el.style.text = null;\n  graphic.updateProps(el, {\n    shape: {\n      r: el.shape.r0\n    }\n  }, animationModel, dataIndex, function () {\n    el.parent && el.parent.remove(el);\n  });\n}\n\nvar getLayout = {\n  cartesian2d: function cartesian2d(data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    var fixedLineWidth = getLineWidth(itemModel, layout); // fix layout with lineWidth\n\n    var signX = layout.width > 0 ? 1 : -1;\n    var signY = layout.height > 0 ? 1 : -1;\n    return {\n      x: layout.x + signX * fixedLineWidth / 2,\n      y: layout.y + signY * fixedLineWidth / 2,\n      width: layout.width - signX * fixedLineWidth,\n      height: layout.height - signY * fixedLineWidth\n    };\n  },\n  polar: function polar(data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    return {\n      cx: layout.cx,\n      cy: layout.cy,\n      r0: layout.r0,\n      r: layout.r,\n      startAngle: layout.startAngle,\n      endAngle: layout.endAngle\n    };\n  }\n};\n\nfunction updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontal, isPolar) {\n  var color = data.getItemVisual(dataIndex, 'color');\n  var opacity = data.getItemVisual(dataIndex, 'opacity');\n  var itemStyleModel = itemModel.getModel('itemStyle');\n  var hoverStyle = itemModel.getModel('emphasis.itemStyle').getBarItemStyle();\n\n  if (!isPolar) {\n    el.setShape('r', itemStyleModel.get('barBorderRadius') || 0);\n  }\n\n  el.useStyle(zrUtil.defaults({\n    fill: color,\n    opacity: opacity\n  }, itemStyleModel.getBarItemStyle()));\n  var cursorStyle = itemModel.getShallow('cursor');\n  cursorStyle && el.attr('cursor', cursorStyle);\n  var labelPositionOutside = isHorizontal ? layout.height > 0 ? 'bottom' : 'top' : layout.width > 0 ? 'left' : 'right';\n\n  if (!isPolar) {\n    setLabel(el.style, hoverStyle, itemModel, color, seriesModel, dataIndex, labelPositionOutside);\n  }\n\n  graphic.setHoverStyle(el, hoverStyle);\n} // In case width or height are too small.\n\n\nfunction getLineWidth(itemModel, rawLayout) {\n  var lineWidth = itemModel.get(BAR_BORDER_WIDTH_QUERY) || 0;\n  return Math.min(lineWidth, Math.abs(rawLayout.width), Math.abs(rawLayout.height));\n}\n\nvar LargePath = Path.extend({\n  type: 'largeBar',\n  shape: {\n    points: []\n  },\n  buildPath: function buildPath(ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n    var startPoint = this.__startPoint;\n    var baseDimIdx = this.__baseDimIdx;\n\n    for (var i = 0; i < points.length; i += 2) {\n      startPoint[baseDimIdx] = points[i + baseDimIdx];\n      ctx.moveTo(startPoint[0], startPoint[1]);\n      ctx.lineTo(points[i], points[i + 1]);\n    }\n  }\n});\n\nfunction createLarge(seriesModel, group, incremental) {\n  // TODO support polar\n  var data = seriesModel.getData();\n  var startPoint = [];\n  var baseDimIdx = data.getLayout('valueAxisHorizontal') ? 1 : 0;\n  startPoint[1 - baseDimIdx] = data.getLayout('valueAxisStart');\n  var el = new LargePath({\n    shape: {\n      points: data.getLayout('largePoints')\n    },\n    incremental: !!incremental,\n    __startPoint: startPoint,\n    __baseDimIdx: baseDimIdx,\n    __largeDataIndices: data.getLayout('largeDataIndices'),\n    __barWidth: data.getLayout('barWidth')\n  });\n  group.add(el);\n  setLargeStyle(el, seriesModel, data); // Enable tooltip and user mouse/touch event handlers.\n\n  el.seriesIndex = seriesModel.seriesIndex;\n\n  if (!seriesModel.get('silent')) {\n    el.on('mousedown', largePathUpdateDataIndex);\n    el.on('mousemove', largePathUpdateDataIndex);\n  }\n} // Use throttle to avoid frequently traverse to find dataIndex.\n\n\nvar largePathUpdateDataIndex = throttle(function (event) {\n  var largePath = this;\n  var dataIndex = largePathFindDataIndex(largePath, event.offsetX, event.offsetY);\n  largePath.dataIndex = dataIndex >= 0 ? dataIndex : null;\n}, 30, false);\n\nfunction largePathFindDataIndex(largePath, x, y) {\n  var baseDimIdx = largePath.__baseDimIdx;\n  var valueDimIdx = 1 - baseDimIdx;\n  var points = largePath.shape.points;\n  var largeDataIndices = largePath.__largeDataIndices;\n  var barWidthHalf = Math.abs(largePath.__barWidth / 2);\n  var startValueVal = largePath.__startPoint[valueDimIdx];\n  _eventPos[0] = x;\n  _eventPos[1] = y;\n  var pointerBaseVal = _eventPos[baseDimIdx];\n  var pointerValueVal = _eventPos[1 - baseDimIdx];\n  var baseLowerBound = pointerBaseVal - barWidthHalf;\n  var baseUpperBound = pointerBaseVal + barWidthHalf;\n\n  for (var i = 0, len = points.length / 2; i < len; i++) {\n    var ii = i * 2;\n    var barBaseVal = points[ii + baseDimIdx];\n    var barValueVal = points[ii + valueDimIdx];\n\n    if (barBaseVal >= baseLowerBound && barBaseVal <= baseUpperBound && (startValueVal <= barValueVal ? pointerValueVal >= startValueVal && pointerValueVal <= barValueVal : pointerValueVal >= barValueVal && pointerValueVal <= startValueVal)) {\n      return largeDataIndices[i];\n    }\n  }\n\n  return -1;\n}\n\nfunction setLargeStyle(el, seriesModel, data) {\n  var borderColor = data.getVisual('borderColor') || data.getVisual('color');\n  var itemStyle = seriesModel.getModel('itemStyle').getItemStyle(['color', 'borderColor']);\n  el.useStyle(itemStyle);\n  el.style.fill = null;\n  el.style.stroke = borderColor;\n  el.style.lineWidth = data.getLayout('barWidth');\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar makeStyleMapper = require(\"../../model/mixin/makeStyleMapper\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar _getBarItemStyle = makeStyleMapper([['fill', 'color'], ['stroke', 'borderColor'], ['lineWidth', 'borderWidth'], // Compatitable with 2\n['stroke', 'barBorderColor'], ['lineWidth', 'barBorderWidth'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor']]);\n\nvar _default = {\n  getBarItemStyle: function getBarItemStyle(excludes) {\n    var style = _getBarItemStyle(this, excludes);\n\n    if (this.getBorderLineDash) {\n      var lineDash = this.getBorderLineDash();\n      lineDash && (style.lineDash = lineDash);\n    }\n\n    return style;\n  }\n};\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nrequire(\"../coord/cartesian/AxisModel\");\n\nrequire(\"./axis/CartesianAxisView\");","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar AxisBuilder = require(\"./AxisBuilder\");\n\nvar AxisView = require(\"./AxisView\");\n\nvar cartesianAxisHelper = require(\"../../coord/cartesian/cartesianAxisHelper\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine']; // function getAlignWithLabel(model, axisModel) {\n//     var alignWithLabel = model.get('alignWithLabel');\n//     if (alignWithLabel === 'auto') {\n//         alignWithLabel = axisModel.get('axisTick.alignWithLabel');\n//     }\n//     return alignWithLabel;\n// }\n\nvar CartesianAxisView = AxisView.extend({\n  type: 'cartesianAxis',\n  axisPointerClass: 'CartesianAxisPointer',\n\n  /**\n   * @override\n   */\n  render: function render(axisModel, ecModel, api, payload) {\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n\n    if (!axisModel.get('show')) {\n      return;\n    }\n\n    var gridModel = axisModel.getCoordSysModel();\n    var layout = cartesianAxisHelper.layout(gridModel, axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, layout);\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n\n    this._axisGroup.add(axisBuilder.getGroup());\n\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get(name + '.show')) {\n        this['_' + name](axisModel, gridModel);\n      }\n    }, this);\n    graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n    CartesianAxisView.superCall(this, 'render', axisModel, ecModel, api, payload);\n  },\n  remove: function remove() {\n    this._splitAreaColors = null;\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @private\n   */\n  _splitLine: function _splitLine(axisModel, gridModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    lineColors = zrUtil.isArray(lineColors) ? lineColors : [lineColors];\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel\n    });\n    var p1 = [];\n    var p2 = []; // Simple optimization\n    // Batching the lines if color are the same\n\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n\n      var colorIndex = lineCount++ % lineColors.length;\n      var tickValue = ticksCoords[i].tickValue;\n\n      this._axisGroup.add(new graphic.Line({\n        anid: tickValue != null ? 'line_' + ticksCoords[i].tickValue : null,\n        subPixelOptimize: true,\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        style: zrUtil.defaults({\n          stroke: lineColors[colorIndex]\n        }, lineStyle),\n        silent: true\n      }));\n    }\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @private\n   */\n  _splitArea: function _splitArea(axisModel, gridModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitAreaModel = axisModel.getModel('splitArea');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var areaColors = areaStyleModel.get('color');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitAreaModel,\n      clamp: true\n    });\n\n    if (!ticksCoords.length) {\n      return;\n    } // For Making appropriate splitArea animation, the color and anid\n    // should be corresponding to previous one if possible.\n\n\n    var areaColorsLen = areaColors.length;\n    var lastSplitAreaColors = this._splitAreaColors;\n    var newSplitAreaColors = zrUtil.createHashMap();\n    var colorIndex = 0;\n\n    if (lastSplitAreaColors) {\n      for (var i = 0; i < ticksCoords.length; i++) {\n        var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\n\n        if (cIndex != null) {\n          colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\n          break;\n        }\n      }\n    }\n\n    var prev = axis.toGlobalCoord(ticksCoords[0].coord);\n    var areaStyle = areaStyleModel.getAreaStyle();\n    areaColors = zrUtil.isArray(areaColors) ? areaColors : [areaColors];\n\n    for (var i = 1; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n      var x;\n      var y;\n      var width;\n      var height;\n\n      if (axis.isHorizontal()) {\n        x = prev;\n        y = gridRect.y;\n        width = tickCoord - x;\n        height = gridRect.height;\n        prev = x + width;\n      } else {\n        x = gridRect.x;\n        y = prev;\n        width = gridRect.width;\n        height = tickCoord - y;\n        prev = y + height;\n      }\n\n      var tickValue = ticksCoords[i - 1].tickValue;\n      tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\n\n      this._axisGroup.add(new graphic.Rect({\n        anid: tickValue != null ? 'area_' + tickValue : null,\n        shape: {\n          x: x,\n          y: y,\n          width: width,\n          height: height\n        },\n        style: zrUtil.defaults({\n          fill: areaColors[colorIndex]\n        }, areaStyle),\n        silent: true\n      }));\n\n      colorIndex = (colorIndex + 1) % areaColorsLen;\n    }\n\n    this._splitAreaColors = newSplitAreaColors;\n  }\n});\nCartesianAxisView.extend({\n  type: 'xAxis'\n});\nCartesianAxisView.extend({\n  type: 'yAxis'\n});","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar axisPointerModelHelper = require(\"./axisPointer/modelHelper\");\n\nvar axisTrigger = require(\"./axisPointer/axisTrigger\");\n\nrequire(\"./axisPointer/AxisPointerModel\");\n\nrequire(\"./axisPointer/AxisPointerView\");\n\nrequire(\"./axisPointer/CartesianAxisPointer\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// CartesianAxisPointer is not supposed to be required here. But consider\n// echarts.simple.js and online build tooltip, which only require gridSimple,\n// CartesianAxisPointer should be able to required somewhere.\n\n\necharts.registerPreprocessor(function (option) {\n  // Always has a global axisPointerModel for default setting.\n  if (option) {\n    (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});\n    var link = option.axisPointer.link; // Normalize to array to avoid object mergin. But if link\n    // is not set, remain null/undefined, otherwise it will\n    // override existent link setting.\n\n    if (link && !zrUtil.isArray(link)) {\n      option.axisPointer.link = [link];\n    }\n  }\n}); // This process should proformed after coordinate systems created\n// and series data processed. So put it on statistic processing stage.\n\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\n  // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n  // allAxesInfo should be updated when setOption performed.\n  ecModel.getComponent('axisPointer').coordSysAxesInfo = axisPointerModelHelper.collect(ecModel, api);\n}); // Broadcast to all views.\n\necharts.registerAction({\n  type: 'updateAxisPointer',\n  event: 'updateAxisPointer',\n  update: ':updateAxisPointer'\n}, axisTrigger);","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\nvar modelHelper = require(\"./modelHelper\");\n\nvar findPointFromSeries = require(\"./findPointFromSeries\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar each = zrUtil.each;\nvar curry = zrUtil.curry;\nvar inner = makeInner();\n/**\n * Basic logic: check all axis, if they do not demand show/highlight,\n * then hide/downplay them.\n *\n * @param {Object} coordSysAxesInfo\n * @param {Object} payload\n * @param {string} [payload.currTrigger] 'click' | 'mousemove' | 'leave'\n * @param {Array.<number>} [payload.x] x and y, which are mandatory, specify a point to\n *              trigger axisPointer and tooltip.\n * @param {Array.<number>} [payload.y] x and y, which are mandatory, specify a point to\n *              trigger axisPointer and tooltip.\n * @param {Object} [payload.seriesIndex] finder, optional, restrict target axes.\n * @param {Object} [payload.dataIndex] finder, restrict target axes.\n * @param {Object} [payload.axesInfo] finder, restrict target axes.\n *        [{\n *          axisDim: 'x'|'y'|'angle'|...,\n *          axisIndex: ...,\n *          value: ...\n *        }, ...]\n * @param {Function} [payload.dispatchAction]\n * @param {Object} [payload.tooltipOption]\n * @param {Object|Array.<number>|Function} [payload.position] Tooltip position,\n *        which can be specified in dispatchAction\n * @param {module:echarts/model/Global} ecModel\n * @param {module:echarts/ExtensionAPI} api\n * @return {Object} content of event obj for echarts.connect.\n */\n\nfunction _default(payload, ecModel, api) {\n  var currTrigger = payload.currTrigger;\n  var point = [payload.x, payload.y];\n  var finder = payload;\n  var dispatchAction = payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n  var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo; // Pending\n  // See #6121. But we are not able to reproduce it yet.\n\n  if (!coordSysAxesInfo) {\n    return;\n  }\n\n  if (illegalPoint(point)) {\n    // Used in the default behavior of `connection`: use the sample seriesIndex\n    // and dataIndex. And also used in the tooltipView trigger.\n    point = findPointFromSeries({\n      seriesIndex: finder.seriesIndex,\n      // Do not use dataIndexInside from other ec instance.\n      // FIXME: auto detect it?\n      dataIndex: finder.dataIndex\n    }, ecModel).point;\n  }\n\n  var isIllegalPoint = illegalPoint(point); // Axis and value can be specified when calling dispatchAction({type: 'updateAxisPointer'}).\n  // Notice: In this case, it is difficult to get the `point` (which is necessary to show\n  // tooltip, so if point is not given, we just use the point found by sample seriesIndex\n  // and dataIndex.\n\n  var inputAxesInfo = finder.axesInfo;\n  var axesInfo = coordSysAxesInfo.axesInfo;\n  var shouldHide = currTrigger === 'leave' || illegalPoint(point);\n  var outputFinder = {};\n  var showValueMap = {};\n  var dataByCoordSys = {\n    list: [],\n    map: {}\n  };\n  var updaters = {\n    showPointer: curry(showPointer, showValueMap),\n    showTooltip: curry(showTooltip, dataByCoordSys)\n  }; // Process for triggered axes.\n\n  each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\n    // If a point given, it must be contained by the coordinate system.\n    var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\n    each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\n      var axis = axisInfo.axis;\n      var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo); // If no inputAxesInfo, no axis is restricted.\n\n      if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\n        var val = inputAxisInfo && inputAxisInfo.value;\n\n        if (val == null && !isIllegalPoint) {\n          val = axis.pointToData(point);\n        }\n\n        val != null && processOnAxis(axisInfo, val, updaters, false, outputFinder);\n      }\n    });\n  }); // Process for linked axes.\n\n  var linkTriggers = {};\n  each(axesInfo, function (tarAxisInfo, tarKey) {\n    var linkGroup = tarAxisInfo.linkGroup; // If axis has been triggered in the previous stage, it should not be triggered by link.\n\n    if (linkGroup && !showValueMap[tarKey]) {\n      each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\n        var srcValItem = showValueMap[srcKey]; // If srcValItem exist, source axis is triggered, so link to target axis.\n\n        if (srcAxisInfo !== tarAxisInfo && srcValItem) {\n          var val = srcValItem.value;\n          linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\n          linkTriggers[tarAxisInfo.key] = val;\n        }\n      });\n    }\n  });\n  each(linkTriggers, function (val, tarKey) {\n    processOnAxis(axesInfo[tarKey], val, updaters, true, outputFinder);\n  });\n  updateModelActually(showValueMap, axesInfo, outputFinder);\n  dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\n  dispatchHighDownActually(axesInfo, dispatchAction, api);\n  return outputFinder;\n}\n\nfunction processOnAxis(axisInfo, newValue, updaters, dontSnap, outputFinder) {\n  var axis = axisInfo.axis;\n\n  if (axis.scale.isBlank() || !axis.containData(newValue)) {\n    return;\n  }\n\n  if (!axisInfo.involveSeries) {\n    updaters.showPointer(axisInfo, newValue);\n    return;\n  } // Heavy calculation. So put it after axis.containData checking.\n\n\n  var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\n  var payloadBatch = payloadInfo.payloadBatch;\n  var snapToValue = payloadInfo.snapToValue; // Fill content of event obj for echarts.connect.\n  // By defualt use the first involved series data as a sample to connect.\n\n  if (payloadBatch[0] && outputFinder.seriesIndex == null) {\n    zrUtil.extend(outputFinder, payloadBatch[0]);\n  } // If no linkSource input, this process is for collecting link\n  // target, where snap should not be accepted.\n\n\n  if (!dontSnap && axisInfo.snap) {\n    if (axis.containData(snapToValue) && snapToValue != null) {\n      newValue = snapToValue;\n    }\n  }\n\n  updaters.showPointer(axisInfo, newValue, payloadBatch, outputFinder); // Tooltip should always be snapToValue, otherwise there will be\n  // incorrect \"axis value ~ series value\" mapping displayed in tooltip.\n\n  updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\n}\n\nfunction buildPayloadsBySeries(value, axisInfo) {\n  var axis = axisInfo.axis;\n  var dim = axis.dim;\n  var snapToValue = value;\n  var payloadBatch = [];\n  var minDist = Number.MAX_VALUE;\n  var minDiff = -1;\n  each(axisInfo.seriesModels, function (series, idx) {\n    var dataDim = series.getData().mapDimension(dim, true);\n    var seriesNestestValue;\n    var dataIndices;\n\n    if (series.getAxisTooltipData) {\n      var result = series.getAxisTooltipData(dataDim, value, axis);\n      dataIndices = result.dataIndices;\n      seriesNestestValue = result.nestestValue;\n    } else {\n      dataIndices = series.getData().indicesOfNearest(dataDim[0], value, // Add a threshold to avoid find the wrong dataIndex\n      // when data length is not same.\n      // false,\n      axis.type === 'category' ? 0.5 : null);\n\n      if (!dataIndices.length) {\n        return;\n      }\n\n      seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\n    }\n\n    if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\n      return;\n    }\n\n    var diff = value - seriesNestestValue;\n    var dist = Math.abs(diff); // Consider category case\n\n    if (dist <= minDist) {\n      if (dist < minDist || diff >= 0 && minDiff < 0) {\n        minDist = dist;\n        minDiff = diff;\n        snapToValue = seriesNestestValue;\n        payloadBatch.length = 0;\n      }\n\n      each(dataIndices, function (dataIndex) {\n        payloadBatch.push({\n          seriesIndex: series.seriesIndex,\n          dataIndexInside: dataIndex,\n          dataIndex: series.getData().getRawIndex(dataIndex)\n        });\n      });\n    }\n  });\n  return {\n    payloadBatch: payloadBatch,\n    snapToValue: snapToValue\n  };\n}\n\nfunction showPointer(showValueMap, axisInfo, value, payloadBatch) {\n  showValueMap[axisInfo.key] = {\n    value: value,\n    payloadBatch: payloadBatch\n  };\n}\n\nfunction showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\n  var payloadBatch = payloadInfo.payloadBatch;\n  var axis = axisInfo.axis;\n  var axisModel = axis.model;\n  var axisPointerModel = axisInfo.axisPointerModel; // If no data, do not create anything in dataByCoordSys,\n  // whose length will be used to judge whether dispatch action.\n\n  if (!axisInfo.triggerTooltip || !payloadBatch.length) {\n    return;\n  }\n\n  var coordSysModel = axisInfo.coordSys.model;\n  var coordSysKey = modelHelper.makeKey(coordSysModel);\n  var coordSysItem = dataByCoordSys.map[coordSysKey];\n\n  if (!coordSysItem) {\n    coordSysItem = dataByCoordSys.map[coordSysKey] = {\n      coordSysId: coordSysModel.id,\n      coordSysIndex: coordSysModel.componentIndex,\n      coordSysType: coordSysModel.type,\n      coordSysMainType: coordSysModel.mainType,\n      dataByAxis: []\n    };\n    dataByCoordSys.list.push(coordSysItem);\n  }\n\n  coordSysItem.dataByAxis.push({\n    axisDim: axis.dim,\n    axisIndex: axisModel.componentIndex,\n    axisType: axisModel.type,\n    axisId: axisModel.id,\n    value: value,\n    // Caustion: viewHelper.getValueLabel is actually on \"view stage\", which\n    // depends that all models have been updated. So it should not be performed\n    // here. Considering axisPointerModel used here is volatile, which is hard\n    // to be retrieve in TooltipView, we prepare parameters here.\n    valueLabelOpt: {\n      precision: axisPointerModel.get('label.precision'),\n      formatter: axisPointerModel.get('label.formatter')\n    },\n    seriesDataIndices: payloadBatch.slice()\n  });\n}\n\nfunction updateModelActually(showValueMap, axesInfo, outputFinder) {\n  var outputAxesInfo = outputFinder.axesInfo = []; // Basic logic: If no 'show' required, 'hide' this axisPointer.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    var valItem = showValueMap[key];\n\n    if (valItem) {\n      !axisInfo.useHandle && (option.status = 'show');\n      option.value = valItem.value; // For label formatter param and highlight.\n\n      option.seriesDataIndices = (valItem.payloadBatch || []).slice();\n    } // When always show (e.g., handle used), remain\n    // original value and status.\n    else {\n        // If hide, value still need to be set, consider\n        // click legend to toggle axis blank.\n        !axisInfo.useHandle && (option.status = 'hide');\n      } // If status is 'hide', should be no info in payload.\n\n\n    option.status === 'show' && outputAxesInfo.push({\n      axisDim: axisInfo.axis.dim,\n      axisIndex: axisInfo.axis.model.componentIndex,\n      value: option.value\n    });\n  });\n}\n\nfunction dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\n  // Basic logic: If no showTip required, hideTip will be dispatched.\n  if (illegalPoint(point) || !dataByCoordSys.list.length) {\n    dispatchAction({\n      type: 'hideTip'\n    });\n    return;\n  } // In most case only one axis (or event one series is used). It is\n  // convinient to fetch payload.seriesIndex and payload.dataIndex\n  // dirtectly. So put the first seriesIndex and dataIndex of the first\n  // axis on the payload.\n\n\n  var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\n  dispatchAction({\n    type: 'showTip',\n    escapeConnect: true,\n    x: point[0],\n    y: point[1],\n    tooltipOption: payload.tooltipOption,\n    position: payload.position,\n    dataIndexInside: sampleItem.dataIndexInside,\n    dataIndex: sampleItem.dataIndex,\n    seriesIndex: sampleItem.seriesIndex,\n    dataByCoordSys: dataByCoordSys.list\n  });\n}\n\nfunction dispatchHighDownActually(axesInfo, dispatchAction, api) {\n  // FIXME\n  // highlight status modification shoule be a stage of main process?\n  // (Consider confilct (e.g., legend and axisPointer) and setOption)\n  var zr = api.getZr();\n  var highDownKey = 'axisPointerLastHighlights';\n  var lastHighlights = inner(zr)[highDownKey] || {};\n  var newHighlights = inner(zr)[highDownKey] = {}; // Update highlight/downplay status according to axisPointer model.\n  // Build hash map and remove duplicate incidentally.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    option.status === 'show' && each(option.seriesDataIndices, function (batchItem) {\n      var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\n      newHighlights[key] = batchItem;\n    });\n  }); // Diff.\n\n  var toHighlight = [];\n  var toDownplay = [];\n  zrUtil.each(lastHighlights, function (batchItem, key) {\n    !newHighlights[key] && toDownplay.push(batchItem);\n  });\n  zrUtil.each(newHighlights, function (batchItem, key) {\n    !lastHighlights[key] && toHighlight.push(batchItem);\n  });\n  toDownplay.length && api.dispatchAction({\n    type: 'downplay',\n    escapeConnect: true,\n    batch: toDownplay\n  });\n  toHighlight.length && api.dispatchAction({\n    type: 'highlight',\n    escapeConnect: true,\n    batch: toHighlight\n  });\n}\n\nfunction findInputAxisInfo(inputAxesInfo, axisInfo) {\n  for (var i = 0; i < (inputAxesInfo || []).length; i++) {\n    var inputAxisInfo = inputAxesInfo[i];\n\n    if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\n      return inputAxisInfo;\n    }\n  }\n}\n\nfunction makeMapperParam(axisInfo) {\n  var axisModel = axisInfo.axis.model;\n  var item = {};\n  var dim = item.axisDim = axisInfo.axis.dim;\n  item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\n  item.axisName = item[dim + 'AxisName'] = axisModel.name;\n  item.axisId = item[dim + 'AxisId'] = axisModel.id;\n  return item;\n}\n\nfunction illegalPoint(point) {\n  return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../../echarts\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar AxisPointerModel = echarts.extendComponentModel({\n  type: 'axisPointer',\n  coordSysAxesInfo: null,\n  defaultOption: {\n    // 'auto' means that show when triggered by tooltip or handle.\n    show: 'auto',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: null,\n    // set default in AxisPonterView.js\n    zlevel: 0,\n    z: 50,\n    type: 'line',\n    // 'line' 'shadow' 'cross' 'none'.\n    // axispointer triggered by tootip determine snap automatically,\n    // see `modelHelper`.\n    snap: false,\n    triggerTooltip: true,\n    value: null,\n    status: null,\n    // Init value depends on whether handle is used.\n    // [group0, group1, ...]\n    // Each group can be: {\n    //      mapper: function () {},\n    //      singleTooltip: 'multiple',  // 'multiple' or 'single'\n    //      xAxisId: ...,\n    //      yAxisName: ...,\n    //      angleAxisIndex: ...\n    // }\n    // mapper: can be ignored.\n    //      input: {axisInfo, value}\n    //      output: {axisInfo, value}\n    link: [],\n    // Do not set 'auto' here, otherwise global animation: false\n    // will not effect at this axispointer.\n    animation: null,\n    animationDurationUpdate: 200,\n    lineStyle: {\n      color: '#aaa',\n      width: 1,\n      type: 'solid'\n    },\n    shadowStyle: {\n      color: 'rgba(150,150,150,0.3)'\n    },\n    label: {\n      show: true,\n      formatter: null,\n      // string | Function\n      precision: 'auto',\n      // Or a number like 0, 1, 2 ...\n      margin: 3,\n      color: '#fff',\n      padding: [5, 7, 5, 7],\n      backgroundColor: 'auto',\n      // default: axis line color\n      borderColor: null,\n      borderWidth: 0,\n      shadowBlur: 3,\n      shadowColor: '#aaa' // Considering applicability, common style should\n      // better not have shadowOffset.\n      // shadowOffsetX: 0,\n      // shadowOffsetY: 2\n\n    },\n    handle: {\n      show: false,\n\n      /* eslint-disable */\n      icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\n      // jshint ignore:line\n\n      /* eslint-enable */\n      size: 45,\n      // handle margin is from symbol center to axis, which is stable when circular move.\n      margin: 50,\n      // color: '#1b8bbd'\n      // color: '#2f4554'\n      color: '#333',\n      shadowBlur: 3,\n      shadowColor: '#aaa',\n      shadowOffsetX: 0,\n      shadowOffsetY: 2,\n      // For mobile performance\n      throttle: 40\n    }\n  }\n});\nvar _default = AxisPointerModel;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../../echarts\");\n\nvar globalListener = require(\"./globalListener\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar AxisPointerView = echarts.extendComponentView({\n  type: 'axisPointer',\n  render: function render(globalAxisPointerModel, ecModel, api) {\n    var globalTooltipModel = ecModel.getComponent('tooltip');\n    var triggerOn = globalAxisPointerModel.get('triggerOn') || globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click'; // Register global listener in AxisPointerView to enable\n    // AxisPointerView to be independent to Tooltip.\n\n    globalListener.register('axisPointer', api, function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none' && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\n        dispatchAction({\n          type: 'updateAxisPointer',\n          currTrigger: currTrigger,\n          x: e && e.offsetX,\n          y: e && e.offsetY\n        });\n      }\n    });\n  },\n\n  /**\n   * @override\n   */\n  remove: function remove(ecModel, api) {\n    globalListener.unregister(api.getZr(), 'axisPointer');\n    AxisPointerView.superApply(this._model, 'remove', arguments);\n  },\n\n  /**\n   * @override\n   */\n  dispose: function dispose(ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n    AxisPointerView.superApply(this._model, 'dispose', arguments);\n  }\n});\nvar _default = AxisPointerView;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar BaseAxisPointer = require(\"./BaseAxisPointer\");\n\nvar viewHelper = require(\"./viewHelper\");\n\nvar cartesianAxisHelper = require(\"../../coord/cartesian/cartesianAxisHelper\");\n\nvar AxisView = require(\"../axis/AxisView\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar CartesianAxisPointer = BaseAxisPointer.extend({\n  /**\n   * @override\n   */\n  makeElOption: function makeElOption(elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisPointerType = axisPointerModel.get('type');\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\n\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n\n    var layoutInfo = cartesianAxisHelper.layout(grid.model, axisModel);\n    viewHelper.buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  },\n\n  /**\n   * @override\n   */\n  getHandleTransform: function getHandleTransform(value, axisModel, axisPointerModel) {\n    var layoutInfo = cartesianAxisHelper.layout(axisModel.axis.grid.model, axisModel, {\n      labelInside: false\n    });\n    layoutInfo.labelMargin = axisPointerModel.get('handle.margin');\n    return {\n      position: viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo),\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  },\n\n  /**\n   * @override\n   */\n  updateHandleTransform: function updateHandleTransform(transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisExtent = axis.getGlobalExtent(true);\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var dimIndex = axis.dim === 'x' ? 0 : 1;\n    var currPosition = transform.position;\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex]; // Make tooltip do not overlap axisPointer and in the middle of the grid.\n\n    var tooltipOptions = [{\n      verticalAlign: 'middle'\n    }, {\n      align: 'center'\n    }];\n    return {\n      position: currPosition,\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: tooltipOptions[dimIndex]\n    };\n  }\n});\n\nfunction getCartesian(grid, axis) {\n  var opt = {};\n  opt[axis.dim + 'AxisIndex'] = axis.index;\n  return grid.getCartesian(opt);\n}\n\nvar pointerShapeBuilder = {\n  line: function line(axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function shadow(axis, pixelValue, otherExtent) {\n    var bandWidth = Math.max(1, axis.getBandWidth());\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\n    };\n  }\n};\n\nfunction getAxisDimIndex(axis) {\n  return axis.dim === 'x' ? 0 : 1;\n}\n\nAxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\nvar _default = CartesianAxisPointer;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar clazzUtil = require(\"../../util/clazz\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar axisPointerModelHelper = require(\"./modelHelper\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar throttleUtil = require(\"../../util/throttle\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar inner = makeInner();\nvar clone = zrUtil.clone;\nvar bind = zrUtil.bind;\n/**\n * Base axis pointer class in 2D.\n * Implemenents {module:echarts/component/axis/IAxisPointer}.\n */\n\nfunction BaseAxisPointer() {}\n\nBaseAxisPointer.prototype = {\n  /**\n   * @private\n   */\n  _group: null,\n\n  /**\n   * @private\n   */\n  _lastGraphicKey: null,\n\n  /**\n   * @private\n   */\n  _handle: null,\n\n  /**\n   * @private\n   */\n  _dragging: false,\n\n  /**\n   * @private\n   */\n  _lastValue: null,\n\n  /**\n   * @private\n   */\n  _lastStatus: null,\n\n  /**\n   * @private\n   */\n  _payloadInfo: null,\n\n  /**\n   * In px, arbitrary value. Do not set too small,\n   * no animation is ok for most cases.\n   * @protected\n   */\n  animationThreshold: 15,\n\n  /**\n   * @implement\n   */\n  render: function render(axisModel, axisPointerModel, api, forceRender) {\n    var value = axisPointerModel.get('value');\n    var status = axisPointerModel.get('status'); // Bind them to `this`, not in closure, otherwise they will not\n    // be replaced when user calling setOption in not merge mode.\n\n    this._axisModel = axisModel;\n    this._axisPointerModel = axisPointerModel;\n    this._api = api; // Optimize: `render` will be called repeatly during mouse move.\n    // So it is power consuming if performing `render` each time,\n    // especially on mobile device.\n\n    if (!forceRender && this._lastValue === value && this._lastStatus === status) {\n      return;\n    }\n\n    this._lastValue = value;\n    this._lastStatus = status;\n    var group = this._group;\n    var handle = this._handle;\n\n    if (!status || status === 'hide') {\n      // Do not clear here, for animation better.\n      group && group.hide();\n      handle && handle.hide();\n      return;\n    }\n\n    group && group.show();\n    handle && handle.show(); // Otherwise status is 'show'\n\n    var elOption = {};\n    this.makeElOption(elOption, value, axisModel, axisPointerModel, api); // Enable change axis pointer type.\n\n    var graphicKey = elOption.graphicKey;\n\n    if (graphicKey !== this._lastGraphicKey) {\n      this.clear(api);\n    }\n\n    this._lastGraphicKey = graphicKey;\n    var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);\n\n    if (!group) {\n      group = this._group = new graphic.Group();\n      this.createPointerEl(group, elOption, axisModel, axisPointerModel);\n      this.createLabelEl(group, elOption, axisModel, axisPointerModel);\n      api.getZr().add(group);\n    } else {\n      var doUpdateProps = zrUtil.curry(updateProps, axisPointerModel, moveAnimation);\n      this.updatePointerEl(group, elOption, doUpdateProps, axisPointerModel);\n      this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\n    }\n\n    updateMandatoryProps(group, axisPointerModel, true);\n\n    this._renderHandle(value);\n  },\n\n  /**\n   * @implement\n   */\n  remove: function remove(api) {\n    this.clear(api);\n  },\n\n  /**\n   * @implement\n   */\n  dispose: function dispose(api) {\n    this.clear(api);\n  },\n\n  /**\n   * @protected\n   */\n  determineAnimation: function determineAnimation(axisModel, axisPointerModel) {\n    var animation = axisPointerModel.get('animation');\n    var axis = axisModel.axis;\n    var isCategoryAxis = axis.type === 'category';\n    var useSnap = axisPointerModel.get('snap'); // Value axis without snap always do not snap.\n\n    if (!useSnap && !isCategoryAxis) {\n      return false;\n    }\n\n    if (animation === 'auto' || animation == null) {\n      var animationThreshold = this.animationThreshold;\n\n      if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\n        return true;\n      } // It is important to auto animation when snap used. Consider if there is\n      // a dataZoom, animation will be disabled when too many points exist, while\n      // it will be enabled for better visual effect when little points exist.\n\n\n      if (useSnap) {\n        var seriesDataCount = axisPointerModelHelper.getAxisInfo(axisModel).seriesDataCount;\n        var axisExtent = axis.getExtent(); // Approximate band width\n\n        return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\n      }\n\n      return false;\n    }\n\n    return animation === true;\n  },\n\n  /**\n   * add {pointer, label, graphicKey} to elOption\n   * @protected\n   */\n  makeElOption: function makeElOption(elOption, value, axisModel, axisPointerModel, api) {// Shoule be implemenented by sub-class.\n  },\n\n  /**\n   * @protected\n   */\n  createPointerEl: function createPointerEl(group, elOption, axisModel, axisPointerModel) {\n    var pointerOption = elOption.pointer;\n\n    if (pointerOption) {\n      var pointerEl = inner(group).pointerEl = new graphic[pointerOption.type](clone(elOption.pointer));\n      group.add(pointerEl);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  createLabelEl: function createLabelEl(group, elOption, axisModel, axisPointerModel) {\n    if (elOption.label) {\n      var labelEl = inner(group).labelEl = new graphic.Rect(clone(elOption.label));\n      group.add(labelEl);\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  updatePointerEl: function updatePointerEl(group, elOption, updateProps) {\n    var pointerEl = inner(group).pointerEl;\n\n    if (pointerEl && elOption.pointer) {\n      pointerEl.setStyle(elOption.pointer.style);\n      updateProps(pointerEl, {\n        shape: elOption.pointer.shape\n      });\n    }\n  },\n\n  /**\n   * @protected\n   */\n  updateLabelEl: function updateLabelEl(group, elOption, updateProps, axisPointerModel) {\n    var labelEl = inner(group).labelEl;\n\n    if (labelEl) {\n      labelEl.setStyle(elOption.label.style);\n      updateProps(labelEl, {\n        // Consider text length change in vertical axis, animation should\n        // be used on shape, otherwise the effect will be weird.\n        shape: elOption.label.shape,\n        position: elOption.label.position\n      });\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _renderHandle: function _renderHandle(value) {\n    if (this._dragging || !this.updateHandleTransform) {\n      return;\n    }\n\n    var axisPointerModel = this._axisPointerModel;\n\n    var zr = this._api.getZr();\n\n    var handle = this._handle;\n    var handleModel = axisPointerModel.getModel('handle');\n    var status = axisPointerModel.get('status');\n\n    if (!handleModel.get('show') || !status || status === 'hide') {\n      handle && zr.remove(handle);\n      this._handle = null;\n      return;\n    }\n\n    var isInit;\n\n    if (!this._handle) {\n      isInit = true;\n      handle = this._handle = graphic.createIcon(handleModel.get('icon'), {\n        cursor: 'move',\n        draggable: true,\n        onmousemove: function onmousemove(e) {\n          // Fot mobile devicem, prevent screen slider on the button.\n          eventTool.stop(e.event);\n        },\n        onmousedown: bind(this._onHandleDragMove, this, 0, 0),\n        drift: bind(this._onHandleDragMove, this),\n        ondragend: bind(this._onHandleDragEnd, this)\n      });\n      zr.add(handle);\n    }\n\n    updateMandatoryProps(handle, axisPointerModel, false); // update style\n\n    var includeStyles = ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\n    handle.setStyle(handleModel.getItemStyle(null, includeStyles)); // update position\n\n    var handleSize = handleModel.get('size');\n\n    if (!zrUtil.isArray(handleSize)) {\n      handleSize = [handleSize, handleSize];\n    }\n\n    handle.attr('scale', [handleSize[0] / 2, handleSize[1] / 2]);\n    throttleUtil.createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\n\n    this._moveHandleToValue(value, isInit);\n  },\n\n  /**\n   * @private\n   */\n  _moveHandleToValue: function _moveHandleToValue(value, isInit) {\n    updateProps(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\n  },\n\n  /**\n   * @private\n   */\n  _onHandleDragMove: function _onHandleDragMove(dx, dy) {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    this._dragging = true; // Persistent for throttle.\n\n    var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\n    this._payloadInfo = trans;\n    handle.stopAnimation();\n    handle.attr(getHandleTransProps(trans));\n    inner(handle).lastProp = null;\n\n    this._doDispatchAxisPointer();\n  },\n\n  /**\n   * Throttled method.\n   * @private\n   */\n  _doDispatchAxisPointer: function _doDispatchAxisPointer() {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var payloadInfo = this._payloadInfo;\n    var axisModel = this._axisModel;\n\n    this._api.dispatchAction({\n      type: 'updateAxisPointer',\n      x: payloadInfo.cursorPoint[0],\n      y: payloadInfo.cursorPoint[1],\n      tooltipOption: payloadInfo.tooltipOption,\n      axesInfo: [{\n        axisDim: axisModel.axis.dim,\n        axisIndex: axisModel.componentIndex\n      }]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _onHandleDragEnd: function _onHandleDragEnd(moveAnimation) {\n    this._dragging = false;\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var value = this._axisPointerModel.get('value'); // Consider snap or categroy axis, handle may be not consistent with\n    // axisPointer. So move handle to align the exact value position when\n    // drag ended.\n\n\n    this._moveHandleToValue(value); // For the effect: tooltip will be shown when finger holding on handle\n    // button, and will be hidden after finger left handle button.\n\n\n    this._api.dispatchAction({\n      type: 'hideTip'\n    });\n  },\n\n  /**\n   * Should be implemenented by sub-class if support `handle`.\n   * @protected\n   * @param {number} value\n   * @param {module:echarts/model/Model} axisModel\n   * @param {module:echarts/model/Model} axisPointerModel\n   * @return {Object} {position: [x, y], rotation: 0}\n   */\n  getHandleTransform: null,\n\n  /**\n   * * Should be implemenented by sub-class if support `handle`.\n   * @protected\n   * @param {Object} transform {position, rotation}\n   * @param {Array.<number>} delta [dx, dy]\n   * @param {module:echarts/model/Model} axisModel\n   * @param {module:echarts/model/Model} axisPointerModel\n   * @return {Object} {position: [x, y], rotation: 0, cursorPoint: [x, y]}\n   */\n  updateHandleTransform: null,\n\n  /**\n   * @private\n   */\n  clear: function clear(api) {\n    this._lastValue = null;\n    this._lastStatus = null;\n    var zr = api.getZr();\n    var group = this._group;\n    var handle = this._handle;\n\n    if (zr && group) {\n      this._lastGraphicKey = null;\n      group && zr.remove(group);\n      handle && zr.remove(handle);\n      this._group = null;\n      this._handle = null;\n      this._payloadInfo = null;\n    }\n  },\n\n  /**\n   * @protected\n   */\n  doClear: function doClear() {// Implemented by sub-class if necessary.\n  },\n\n  /**\n   * @protected\n   * @param {Array.<number>} xy\n   * @param {Array.<number>} wh\n   * @param {number} [xDimIndex=0] or 1\n   */\n  buildLabel: function buildLabel(xy, wh, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x: xy[xDimIndex],\n      y: xy[1 - xDimIndex],\n      width: wh[xDimIndex],\n      height: wh[1 - xDimIndex]\n    };\n  }\n};\nBaseAxisPointer.prototype.constructor = BaseAxisPointer;\n\nfunction updateProps(animationModel, moveAnimation, el, props) {\n  // Animation optimize.\n  if (!propsEqual(inner(el).lastProp, props)) {\n    inner(el).lastProp = props;\n    moveAnimation ? graphic.updateProps(el, props, animationModel) : (el.stopAnimation(), el.attr(props));\n  }\n}\n\nfunction propsEqual(lastProps, newProps) {\n  if (zrUtil.isObject(lastProps) && zrUtil.isObject(newProps)) {\n    var equals = true;\n    zrUtil.each(newProps, function (item, key) {\n      equals = equals && propsEqual(lastProps[key], item);\n    });\n    return !!equals;\n  } else {\n    return lastProps === newProps;\n  }\n}\n\nfunction updateLabelShowHide(labelEl, axisPointerModel) {\n  labelEl[axisPointerModel.get('label.show') ? 'show' : 'hide']();\n}\n\nfunction getHandleTransProps(trans) {\n  return {\n    position: trans.position.slice(),\n    rotation: trans.rotation || 0\n  };\n}\n\nfunction updateMandatoryProps(group, axisPointerModel, silent) {\n  var z = axisPointerModel.get('z');\n  var zlevel = axisPointerModel.get('zlevel');\n  group && group.traverse(function (el) {\n    if (el.type !== 'group') {\n      z != null && (el.z = z);\n      zlevel != null && (el.zlevel = zlevel);\n      el.silent = silent;\n    }\n  });\n}\n\nclazzUtil.enableClassExtend(BaseAxisPointer);\nvar _default = BaseAxisPointer;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../../echarts\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar _default = echarts.extendComponentModel({\n  type: 'tooltip',\n  dependencies: ['axisPointer'],\n  defaultOption: {\n    zlevel: 0,\n    z: 60,\n    show: true,\n    // tooltip\n    showContent: true,\n    // 'trigger' only works on coordinate system.\n    // 'item' | 'axis' | 'none'\n    trigger: 'item',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: 'mousemove|click',\n    alwaysShowContent: false,\n    displayMode: 'single',\n    // 'single' | 'multipleByCoordSys'\n    renderMode: 'auto',\n    // 'auto' | 'html' | 'richText'\n    // 'auto': use html by default, and use non-html if `document` is not defined\n    // 'html': use html for tooltip\n    // 'richText': use canvas, svg, and etc. for tooltip\n    //  {Array} | {Function}\n    // position: null\n    // Consider triggered from axisPointer handle, verticalAlign should be 'middle'\n    // align: null,\n    // verticalAlign: null,\n    //  content  viewRect  false \n    confine: false,\n    // {string}Template  {Function}\n    // formatter: null\n    showDelay: 0,\n    // ms\n    hideDelay: 100,\n    // s\n    transitionDuration: 0.4,\n    enterable: false,\n    // 0.7\n    backgroundColor: 'rgba(50,50,50,0.7)',\n    // \n    borderColor: '#333',\n    // px4\n    borderRadius: 4,\n    // px0\n    borderWidth: 0,\n    // px5\n    // css\n    padding: 5,\n    // Extra css text\n    extraCssText: '',\n    // \n    axisPointer: {\n      // \n      // 'line' | 'shadow' | 'cross'\n      type: 'line',\n      // type  line  tooltip line \n      //  'x' | 'y' | 'angle' | 'radius' | 'auto'\n      //  'auto' category  x \n      //  angle \n      axis: 'auto',\n      animation: 'auto',\n      animationDurationUpdate: 200,\n      animationEasingUpdate: 'exponentialOut',\n      crossStyle: {\n        color: '#999',\n        width: 1,\n        type: 'dashed',\n        // TODO formatter\n        textStyle: {} // lineStyle and shadowStyle should not be specified here,\n        // otherwise it will always override those styles on option.axisPointer.\n\n      }\n    },\n    textStyle: {\n      color: '#fff',\n      fontSize: 14\n    }\n  }\n});\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar TooltipContent = require(\"./TooltipContent\");\n\nvar TooltipRichContent = require(\"./TooltipRichContent\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar findPointFromSeries = require(\"../axisPointer/findPointFromSeries\");\n\nvar layoutUtil = require(\"../../util/layout\");\n\nvar Model = require(\"../../model/Model\");\n\nvar globalListener = require(\"../axisPointer/globalListener\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar axisPointerViewHelper = require(\"../axisPointer/viewHelper\");\n\nvar _model = require(\"../../util/model\");\n\nvar getTooltipRenderMode = _model.getTooltipRenderMode;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar bind = zrUtil.bind;\nvar each = zrUtil.each;\nvar parsePercent = numberUtil.parsePercent;\nvar proxyRect = new graphic.Rect({\n  shape: {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  }\n});\n\nvar _default = echarts.extendComponentView({\n  type: 'tooltip',\n  init: function init(ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    var tooltipModel = ecModel.getComponent('tooltip');\n    var renderMode = tooltipModel.get('renderMode');\n    this._renderMode = getTooltipRenderMode(renderMode);\n    var tooltipContent;\n\n    if (this._renderMode === 'html') {\n      tooltipContent = new TooltipContent(api.getDom(), api);\n      this._newLine = '<br/>';\n    } else {\n      tooltipContent = new TooltipRichContent(api);\n      this._newLine = '\\n';\n    }\n\n    this._tooltipContent = tooltipContent;\n  },\n  render: function render(tooltipModel, ecModel, api) {\n    if (env.node) {\n      return;\n    } // Reset\n\n\n    this.group.removeAll();\n    /**\n     * @private\n     * @type {module:echarts/component/tooltip/TooltipModel}\n     */\n\n    this._tooltipModel = tooltipModel;\n    /**\n     * @private\n     * @type {module:echarts/model/Global}\n     */\n\n    this._ecModel = ecModel;\n    /**\n     * @private\n     * @type {module:echarts/ExtensionAPI}\n     */\n\n    this._api = api;\n    /**\n     * Should be cleaned when render.\n     * @private\n     * @type {Array.<Array.<Object>>}\n     */\n\n    this._lastDataByCoordSys = null;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    this._alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.update();\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n\n    this._initGlobalListener();\n\n    this._keepShow();\n  },\n  _initGlobalListener: function _initGlobalListener() {\n    var tooltipModel = this._tooltipModel;\n    var triggerOn = tooltipModel.get('triggerOn');\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none') {\n        if (triggerOn.indexOf(currTrigger) >= 0) {\n          this._tryShow(e, dispatchAction);\n        } else if (currTrigger === 'leave') {\n          this._hide(dispatchAction);\n        }\n      }\n    }, this));\n  },\n  _keepShow: function _keepShow() {\n    var tooltipModel = this._tooltipModel;\n    var ecModel = this._ecModel;\n    var api = this._api; // Try to keep the tooltip show when refreshing\n\n    if (this._lastX != null && this._lastY != null // When user is willing to control tooltip totally using API,\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\n    // which is not expected.\n    && tooltipModel.get('triggerOn') !== 'none') {\n      var self = this;\n      clearTimeout(this._refreshUpdateTimeout);\n      this._refreshUpdateTimeout = setTimeout(function () {\n        // Show tip next tick after other charts are rendered\n        // In case highlight action has wrong result\n        // FIXME\n        !api.isDisposed() && self.manuallyShowTip(tooltipModel, ecModel, api, {\n          x: self._lastX,\n          y: self._lastY\n        });\n      });\n    }\n  },\n\n  /**\n   * Show tip manually by\n   * dispatchAction({\n   *     type: 'showTip',\n   *     x: 10,\n   *     y: 10\n   * });\n   * Or\n   * dispatchAction({\n   *      type: 'showTip',\n   *      seriesIndex: 0,\n   *      dataIndex or dataIndexInside or name\n   * });\n   *\n   *  TODO Batch\n   */\n  manuallyShowTip: function manuallyShowTip(tooltipModel, ecModel, api, payload) {\n    if (payload.from === this.uid || env.node) {\n      return;\n    }\n\n    var dispatchAction = makeDispatchAction(payload, api); // Reset ticket\n\n    this._ticket = ''; // When triggered from axisPointer.\n\n    var dataByCoordSys = payload.dataByCoordSys;\n\n    if (payload.tooltip && payload.x != null && payload.y != null) {\n      var el = proxyRect;\n      el.position = [payload.x, payload.y];\n      el.update();\n      el.tooltip = payload.tooltip; // Manually show tooltip while view is not using zrender elements.\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        target: el\n      }, dispatchAction);\n    } else if (dataByCoordSys) {\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        event: {},\n        dataByCoordSys: payload.dataByCoordSys,\n        tooltipOption: payload.tooltipOption\n      }, dispatchAction);\n    } else if (payload.seriesIndex != null) {\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n        return;\n      }\n\n      var pointInfo = findPointFromSeries(payload, ecModel);\n      var cx = pointInfo.point[0];\n      var cy = pointInfo.point[1];\n\n      if (cx != null && cy != null) {\n        this._tryShow({\n          offsetX: cx,\n          offsetY: cy,\n          position: payload.position,\n          target: pointInfo.el,\n          event: {}\n        }, dispatchAction);\n      }\n    } else if (payload.x != null && payload.y != null) {\n      // FIXME\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payload.x,\n        y: payload.y\n      });\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        target: api.getZr().findHover(payload.x, payload.y).target,\n        event: {}\n      }, dispatchAction);\n    }\n  },\n  manuallyHideTip: function manuallyHideTip(tooltipModel, ecModel, api, payload) {\n    var tooltipContent = this._tooltipContent;\n\n    if (!this._alwaysShowContent && this._tooltipModel) {\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n    }\n\n    this._lastX = this._lastY = null;\n\n    if (payload.from !== this.uid) {\n      this._hide(makeDispatchAction(payload, api));\n    }\n  },\n  // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n  // and tooltip.\n  _manuallyAxisShowTip: function _manuallyAxisShowTip(tooltipModel, ecModel, api, payload) {\n    var seriesIndex = payload.seriesIndex;\n    var dataIndex = payload.dataIndex;\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n      return;\n    }\n\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n\n    if (!seriesModel) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model, tooltipModel]);\n\n    if (tooltipModel.get('trigger') !== 'axis') {\n      return;\n    }\n\n    api.dispatchAction({\n      type: 'updateAxisPointer',\n      seriesIndex: seriesIndex,\n      dataIndex: dataIndex,\n      position: payload.position\n    });\n    return true;\n  },\n  _tryShow: function _tryShow(e, dispatchAction) {\n    var el = e.target;\n    var tooltipModel = this._tooltipModel;\n\n    if (!tooltipModel) {\n      return;\n    } // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n\n\n    this._lastX = e.offsetX;\n    this._lastY = e.offsetY;\n    var dataByCoordSys = e.dataByCoordSys;\n\n    if (dataByCoordSys && dataByCoordSys.length) {\n      this._showAxisTooltip(dataByCoordSys, e);\n    } // Always show item tooltip if mouse is on the element with dataIndex\n    else if (el && el.dataIndex != null) {\n        this._lastDataByCoordSys = null;\n\n        this._showSeriesItemTooltip(e, el, dispatchAction);\n      } // Tooltip provided directly. Like legend.\n      else if (el && el.tooltip) {\n          this._lastDataByCoordSys = null;\n\n          this._showComponentItemTooltip(e, el, dispatchAction);\n        } else {\n          this._lastDataByCoordSys = null;\n\n          this._hide(dispatchAction);\n        }\n  },\n  _showOrMove: function _showOrMove(tooltipModel, cb) {\n    // showDelay is used in this case: tooltip.enterable is set\n    // as true. User intent to move mouse into tooltip and click\n    // something. `showDelay` makes it easyer to enter the content\n    // but tooltip do not move immediately.\n    var delay = tooltipModel.get('showDelay');\n    cb = zrUtil.bind(cb, this);\n    clearTimeout(this._showTimout);\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n  },\n  _showAxisTooltip: function _showAxisTooltip(dataByCoordSys, e) {\n    var ecModel = this._ecModel;\n    var globalTooltipModel = this._tooltipModel;\n    var point = [e.offsetX, e.offsetY];\n    var singleDefaultHTML = [];\n    var singleParamsList = [];\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption, globalTooltipModel]);\n    var renderMode = this._renderMode;\n    var newLine = this._newLine;\n    var markers = {};\n    each(dataByCoordSys, function (itemCoordSys) {\n      // var coordParamList = [];\n      // var coordDefaultHTML = [];\n      // var coordTooltipModel = buildTooltipModel([\n      //     e.tooltipOption,\n      //     itemCoordSys.tooltipOption,\n      //     ecModel.getComponent(itemCoordSys.coordSysMainType, itemCoordSys.coordSysIndex),\n      //     globalTooltipModel\n      // ]);\n      // var displayMode = coordTooltipModel.get('displayMode');\n      // var paramsList = displayMode === 'single' ? singleParamsList : [];\n      each(itemCoordSys.dataByAxis, function (item) {\n        var axisModel = ecModel.getComponent(item.axisDim + 'Axis', item.axisIndex);\n        var axisValue = item.value;\n        var seriesDefaultHTML = [];\n\n        if (!axisModel || axisValue == null) {\n          return;\n        }\n\n        var valueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, item.seriesDataIndices, item.valueLabelOpt);\n        zrUtil.each(item.seriesDataIndices, function (idxItem) {\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n          var dataIndex = idxItem.dataIndexInside;\n          var dataParams = series && series.getDataParams(dataIndex);\n          dataParams.axisDim = item.axisDim;\n          dataParams.axisIndex = item.axisIndex;\n          dataParams.axisType = item.axisType;\n          dataParams.axisId = item.axisId;\n          dataParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, axisValue);\n          dataParams.axisValueLabel = valueLabel;\n\n          if (dataParams) {\n            singleParamsList.push(dataParams);\n            var seriesTooltip = series.formatTooltip(dataIndex, true, null, renderMode);\n            var html;\n\n            if (zrUtil.isObject(seriesTooltip)) {\n              html = seriesTooltip.html;\n              var newMarkers = seriesTooltip.markers;\n              zrUtil.merge(markers, newMarkers);\n            } else {\n              html = seriesTooltip;\n            }\n\n            seriesDefaultHTML.push(html);\n          }\n        }); // Default tooltip content\n        // FIXME\n        // (1) shold be the first data which has name?\n        // (2) themeRiver, firstDataIndex is array, and first line is unnecessary.\n\n        var firstLine = valueLabel;\n\n        if (renderMode !== 'html') {\n          singleDefaultHTML.push(seriesDefaultHTML.join(newLine));\n        } else {\n          singleDefaultHTML.push((firstLine ? formatUtil.encodeHTML(firstLine) + newLine : '') + seriesDefaultHTML.join(newLine));\n        }\n      });\n    }, this); // In most case, the second axis is shown upper than the first one.\n\n    singleDefaultHTML.reverse();\n    singleDefaultHTML = singleDefaultHTML.join(this._newLine + this._newLine);\n    var positionExpr = e.position;\n\n    this._showOrMove(singleTooltipModel, function () {\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys)) {\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, singleParamsList);\n      } else {\n        this._showTooltipContent(singleTooltipModel, singleDefaultHTML, singleParamsList, Math.random(), point[0], point[1], positionExpr, undefined, markers);\n      }\n    }); // Do not trigger events here, because this branch only be entered\n    // from dispatchAction.\n\n  },\n  _showSeriesItemTooltip: function _showSeriesItemTooltip(e, el, dispatchAction) {\n    var ecModel = this._ecModel; // Use dataModel in element if possible\n    // Used when mouseover on a element like markPoint or edge\n    // In which case, the data is not main data in series.\n\n    var seriesIndex = el.seriesIndex;\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex); // For example, graph link.\n\n    var dataModel = el.dataModel || seriesModel;\n    var dataIndex = el.dataIndex;\n    var dataType = el.dataType;\n    var data = dataModel.getData();\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model, this._tooltipModel]);\n    var tooltipTrigger = tooltipModel.get('trigger');\n\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n      return;\n    }\n\n    var params = dataModel.getDataParams(dataIndex, dataType);\n    var seriesTooltip = dataModel.formatTooltip(dataIndex, false, dataType, this._renderMode);\n    var defaultHtml;\n    var markers;\n\n    if (zrUtil.isObject(seriesTooltip)) {\n      defaultHtml = seriesTooltip.html;\n      markers = seriesTooltip.markers;\n    } else {\n      defaultHtml = seriesTooltip;\n      markers = null;\n    }\n\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n\n    this._showOrMove(tooltipModel, function () {\n      this._showTooltipContent(tooltipModel, defaultHtml, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markers);\n    }); // FIXME\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\n\n\n    dispatchAction({\n      type: 'showTip',\n      dataIndexInside: dataIndex,\n      dataIndex: data.getRawIndex(dataIndex),\n      seriesIndex: seriesIndex,\n      from: this.uid\n    });\n  },\n  _showComponentItemTooltip: function _showComponentItemTooltip(e, el, dispatchAction) {\n    var tooltipOpt = el.tooltip;\n\n    if (typeof tooltipOpt === 'string') {\n      var content = tooltipOpt;\n      tooltipOpt = {\n        content: content,\n        // Fixed formatter\n        formatter: content\n      };\n    }\n\n    var subTooltipModel = new Model(tooltipOpt, this._tooltipModel, this._ecModel);\n    var defaultHtml = subTooltipModel.get('content');\n    var asyncTicket = Math.random(); // Do not check whether `trigger` is 'none' here, because `trigger`\n    // only works on cooridinate system. In fact, we have not found case\n    // that requires setting `trigger` nothing on component yet.\n\n    this._showOrMove(subTooltipModel, function () {\n      this._showTooltipContent(subTooltipModel, defaultHtml, subTooltipModel.get('formatterParams') || {}, asyncTicket, e.offsetX, e.offsetY, e.position, el);\n    }); // If not dispatch showTip, tip may be hide triggered by axis.\n\n\n    dispatchAction({\n      type: 'showTip',\n      from: this.uid\n    });\n  },\n  _showTooltipContent: function _showTooltipContent(tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markers) {\n    // Reset ticket\n    this._ticket = '';\n\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n      return;\n    }\n\n    var tooltipContent = this._tooltipContent;\n    var formatter = tooltipModel.get('formatter');\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var html = defaultHtml;\n\n    if (formatter && typeof formatter === 'string') {\n      html = formatUtil.formatTpl(formatter, params, true);\n    } else if (typeof formatter === 'function') {\n      var callback = bind(function (cbTicket, html) {\n        if (cbTicket === this._ticket) {\n          tooltipContent.setContent(html, markers, tooltipModel);\n\n          this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n        }\n      }, this);\n      this._ticket = asyncTicket;\n      html = formatter(params, asyncTicket, callback);\n    }\n\n    tooltipContent.setContent(html, markers, tooltipModel);\n    tooltipContent.show(tooltipModel);\n\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n  },\n\n  /**\n   * @param  {string|Function|Array.<number>|Object} positionExpr\n   * @param  {number} x Mouse x\n   * @param  {number} y Mouse y\n   * @param  {boolean} confine Whether confine tooltip content in view rect.\n   * @param  {Object|<Array.<Object>} params\n   * @param  {module:zrender/Element} el target element\n   * @param  {module:echarts/ExtensionAPI} api\n   * @return {Array.<number>}\n   */\n  _updatePosition: function _updatePosition(tooltipModel, positionExpr, x, y, content, params, el) {\n    var viewWidth = this._api.getWidth();\n\n    var viewHeight = this._api.getHeight();\n\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var contentSize = content.getSize();\n    var align = tooltipModel.get('align');\n    var vAlign = tooltipModel.get('verticalAlign');\n    var rect = el && el.getBoundingRect().clone();\n    el && rect.applyTransform(el.transform);\n\n    if (typeof positionExpr === 'function') {\n      // Callback of position can be an array or a string specify the position\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\n        viewSize: [viewWidth, viewHeight],\n        contentSize: contentSize.slice()\n      });\n    }\n\n    if (zrUtil.isArray(positionExpr)) {\n      x = parsePercent(positionExpr[0], viewWidth);\n      y = parsePercent(positionExpr[1], viewHeight);\n    } else if (zrUtil.isObject(positionExpr)) {\n      positionExpr.width = contentSize[0];\n      positionExpr.height = contentSize[1];\n      var layoutRect = layoutUtil.getLayoutRect(positionExpr, {\n        width: viewWidth,\n        height: viewHeight\n      });\n      x = layoutRect.x;\n      y = layoutRect.y;\n      align = null; // When positionExpr is left/top/right/bottom,\n      // align and verticalAlign will not work.\n\n      vAlign = null;\n    } // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n    else if (typeof positionExpr === 'string' && el) {\n        var pos = calcTooltipPosition(positionExpr, rect, contentSize);\n        x = pos[0];\n        y = pos[1];\n      } else {\n        var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n        x = pos[0];\n        y = pos[1];\n      }\n\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n\n    if (tooltipModel.get('confine')) {\n      var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n      x = pos[0];\n      y = pos[1];\n    }\n\n    content.moveTo(x, y);\n  },\n  // FIXME\n  // Should we remove this but leave this to user?\n  _updateContentNotChangedOnAxis: function _updateContentNotChangedOnAxis(dataByCoordSys) {\n    var lastCoordSys = this._lastDataByCoordSys;\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || {};\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n      contentNotChanged &= lastDataByAxis.length === thisDataByAxis.length;\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n        var thisItem = thisDataByAxis[indexAxis] || {};\n        var lastIndices = lastItem.seriesDataIndices || [];\n        var newIndices = thisItem.seriesDataIndices || [];\n        contentNotChanged &= lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n          var newIdxItem = newIndices[j];\n          contentNotChanged &= lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n        });\n      });\n    });\n    this._lastDataByCoordSys = dataByCoordSys;\n    return !!contentNotChanged;\n  },\n  _hide: function _hide(dispatchAction) {\n    // Do not directly hideLater here, because this behavior may be prevented\n    // in dispatchAction when showTip is dispatched.\n    // FIXME\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n    this._lastDataByCoordSys = null;\n    dispatchAction({\n      type: 'hideTip',\n      from: this.uid\n    });\n  },\n  dispose: function dispose(ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    this._tooltipContent.hide();\n\n    globalListener.unregister('itemTooltip', api);\n  }\n});\n/**\n * @param {Array.<Object|module:echarts/model/Model>} modelCascade\n * From top to bottom. (the last one should be globalTooltipModel);\n */\n\n\nfunction buildTooltipModel(modelCascade) {\n  var resultModel = modelCascade.pop();\n\n  while (modelCascade.length) {\n    var tooltipOpt = modelCascade.pop();\n\n    if (tooltipOpt) {\n      if (Model.isInstance(tooltipOpt)) {\n        tooltipOpt = tooltipOpt.get('tooltip', true);\n      } // In each data item tooltip can be simply write:\n      // {\n      //  value: 10,\n      //  tooltip: 'Something you need to know'\n      // }\n\n\n      if (typeof tooltipOpt === 'string') {\n        tooltipOpt = {\n          formatter: tooltipOpt\n        };\n      }\n\n      resultModel = new Model(tooltipOpt, resultModel, resultModel.ecModel);\n    }\n  }\n\n  return resultModel;\n}\n\nfunction makeDispatchAction(payload, api) {\n  return payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n}\n\nfunction refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n\n  if (gapH != null) {\n    if (x + width + gapH > viewWidth) {\n      x -= width + gapH;\n    } else {\n      x += gapH;\n    }\n  }\n\n  if (gapV != null) {\n    if (y + height + gapV > viewHeight) {\n      y -= height + gapV;\n    } else {\n      y += gapV;\n    }\n  }\n\n  return [x, y];\n}\n\nfunction confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n  x = Math.min(x + width, viewWidth) - width;\n  y = Math.min(y + height, viewHeight) - height;\n  x = Math.max(x, 0);\n  y = Math.max(y, 0);\n  return [x, y];\n}\n\nfunction calcTooltipPosition(position, rect, contentSize) {\n  var domWidth = contentSize[0];\n  var domHeight = contentSize[1];\n  var gap = 5;\n  var x = 0;\n  var y = 0;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n\n  switch (position) {\n    case 'inside':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'top':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y - domHeight - gap;\n      break;\n\n    case 'bottom':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight + gap;\n      break;\n\n    case 'left':\n      x = rect.x - domWidth - gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'right':\n      x = rect.x + rectWidth + gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n  }\n\n  return [x, y];\n}\n\nfunction isCenterAlign(align) {\n  return align === 'center' || align === 'middle';\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar zrColor = require(\"zrender/lib/tool/color\");\n\nvar eventUtil = require(\"zrender/lib/core/event\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar formatUtil = require(\"../../util/format\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar each = zrUtil.each;\nvar toCamelCase = formatUtil.toCamelCase;\nvar vendors = ['', '-webkit-', '-moz-', '-o-'];\nvar gCssText = 'position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;';\n/**\n * @param {number} duration\n * @return {string}\n * @inner\n */\n\nfunction assembleTransition(duration) {\n  var transitionCurve = 'cubic-bezier(0.23, 1, 0.32, 1)';\n  var transitionText = 'left ' + duration + 's ' + transitionCurve + ',' + 'top ' + duration + 's ' + transitionCurve;\n  return zrUtil.map(vendors, function (vendorPrefix) {\n    return vendorPrefix + 'transition:' + transitionText;\n  }).join(';');\n}\n/**\n * @param {Object} textStyle\n * @return {string}\n * @inner\n */\n\n\nfunction assembleFont(textStyleModel) {\n  var cssText = [];\n  var fontSize = textStyleModel.get('fontSize');\n  var color = textStyleModel.getTextColor();\n  color && cssText.push('color:' + color);\n  cssText.push('font:' + textStyleModel.getFont());\n  fontSize && cssText.push('line-height:' + Math.round(fontSize * 3 / 2) + 'px');\n  each(['decoration', 'align'], function (name) {\n    var val = textStyleModel.get(name);\n    val && cssText.push('text-' + name + ':' + val);\n  });\n  return cssText.join(';');\n}\n/**\n * @param {Object} tooltipModel\n * @return {string}\n * @inner\n */\n\n\nfunction assembleCssText(tooltipModel) {\n  var cssText = [];\n  var transitionDuration = tooltipModel.get('transitionDuration');\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var textStyleModel = tooltipModel.getModel('textStyle');\n  var padding = tooltipModel.get('padding'); // Animation transition. Do not animate when transitionDuration is 0.\n\n  transitionDuration && cssText.push(assembleTransition(transitionDuration));\n\n  if (backgroundColor) {\n    if (env.canvasSupported) {\n      cssText.push('background-Color:' + backgroundColor);\n    } else {\n      // for ie\n      cssText.push('background-Color:#' + zrColor.toHex(backgroundColor));\n      cssText.push('filter:alpha(opacity=70)');\n    }\n  } // Border style\n\n\n  each(['width', 'color', 'radius'], function (name) {\n    var borderName = 'border-' + name;\n    var camelCase = toCamelCase(borderName);\n    var val = tooltipModel.get(camelCase);\n    val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n  }); // Text style\n\n  cssText.push(assembleFont(textStyleModel)); // Padding\n\n  if (padding != null) {\n    cssText.push('padding:' + formatUtil.normalizeCssArray(padding).join('px ') + 'px');\n  }\n\n  return cssText.join(';') + ';';\n}\n/**\n * @alias module:echarts/component/tooltip/TooltipContent\n * @constructor\n */\n\n\nfunction TooltipContent(container, api) {\n  if (env.wxa) {\n    return null;\n  }\n\n  var el = document.createElement('div');\n  var zr = this._zr = api.getZr();\n  this.el = el;\n  this._x = api.getWidth() / 2;\n  this._y = api.getHeight() / 2;\n  container.appendChild(el);\n  this._container = container;\n  this._show = false;\n  /**\n   * @private\n   */\n\n  this._hideTimeout; // FIXME\n  // Is it needed to trigger zr event manually if\n  // the browser do not support `pointer-events: none`.\n\n  var self = this;\n\n  el.onmouseenter = function () {\n    // clear the timeout in hideLater and keep showing tooltip\n    if (self._enterable) {\n      clearTimeout(self._hideTimeout);\n      self._show = true;\n    }\n\n    self._inContent = true;\n  };\n\n  el.onmousemove = function (e) {\n    e = e || window.event;\n\n    if (!self._enterable) {\n      // `pointer-events: none` is set to tooltip content div\n      // if `enterable` is set as `false`, and `el.onmousemove`\n      // can not be triggered. But in browser that do not\n      // support `pointer-events`, we need to do this:\n      // Try trigger zrender event to avoid mouse\n      // in and out shape too frequently\n      var handler = zr.handler;\n      eventUtil.normalizeEvent(container, e, true);\n      handler.dispatch('mousemove', e);\n    }\n  };\n\n  el.onmouseleave = function () {\n    if (self._enterable) {\n      if (self._show) {\n        self.hideLater(self._hideDelay);\n      }\n    }\n\n    self._inContent = false;\n  };\n}\n\nTooltipContent.prototype = {\n  constructor: TooltipContent,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _enterable: true,\n\n  /**\n   * Update when tooltip is rendered\n   */\n  update: function update() {\n    // FIXME\n    // Move this logic to ec main?\n    var container = this._container;\n    var stl = container.currentStyle || document.defaultView.getComputedStyle(container);\n    var domStyle = container.style;\n\n    if (domStyle.position !== 'absolute' && stl.position !== 'absolute') {\n      domStyle.position = 'relative';\n    } // Hide the tooltip\n    // PENDING\n    // this.hide();\n\n  },\n  show: function show(tooltipModel) {\n    clearTimeout(this._hideTimeout);\n    var el = this.el;\n    el.style.cssText = gCssText + assembleCssText(tooltipModel) // Because of the reason described in:\n    // http://stackoverflow.com/questions/21125587/css3-transition-not-working-in-chrome-anymore\n    // we should set initial value to `left` and `top`.\n    + ';left:' + this._x + 'px;top:' + this._y + 'px;' + (tooltipModel.get('extraCssText') || '');\n    el.style.display = el.innerHTML ? 'block' : 'none'; // If mouse occsionally move over the tooltip, a mouseout event will be\n    // triggered by canvas, and cuase some unexpectable result like dragging\n    // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\n    // it. Although it is not suppored by IE8~IE10, fortunately it is a rare\n    // scenario.\n\n    el.style.pointerEvents = this._enterable ? 'auto' : 'none';\n    this._show = true;\n  },\n  setContent: function setContent(content) {\n    this.el.innerHTML = content == null ? '' : content;\n  },\n  setEnterable: function setEnterable(enterable) {\n    this._enterable = enterable;\n  },\n  getSize: function getSize() {\n    var el = this.el;\n    return [el.clientWidth, el.clientHeight];\n  },\n  moveTo: function moveTo(x, y) {\n    // xy should be based on canvas root. But tooltipContent is\n    // the sibling of canvas root. So padding of ec container\n    // should be considered here.\n    var zr = this._zr;\n    var viewportRootOffset;\n\n    if (zr && zr.painter && (viewportRootOffset = zr.painter.getViewportRootOffset())) {\n      x += viewportRootOffset.offsetLeft;\n      y += viewportRootOffset.offsetTop;\n    }\n\n    var style = this.el.style;\n    style.left = x + 'px';\n    style.top = y + 'px';\n    this._x = x;\n    this._y = y;\n  },\n  hide: function hide() {\n    this.el.style.display = 'none';\n    this._show = false;\n  },\n  hideLater: function hideLater(time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater mutiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  },\n  isShow: function isShow() {\n    return this._show;\n  },\n  getOuterSize: function getOuterSize() {\n    var width = this.el.clientWidth;\n    var height = this.el.clientHeight; // Consider browser compatibility.\n    // IE8 does not support getComputedStyle.\n\n    if (document.defaultView && document.defaultView.getComputedStyle) {\n      var stl = document.defaultView.getComputedStyle(this.el);\n\n      if (stl) {\n        width += parseInt(stl.borderLeftWidth, 10) + parseInt(stl.borderRightWidth, 10);\n        height += parseInt(stl.borderTopWidth, 10) + parseInt(stl.borderBottomWidth, 10);\n      }\n    }\n\n    return {\n      width: width,\n      height: height\n    };\n  }\n};\nvar _default = TooltipContent;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Text = require(\"zrender/lib/graphic/Text\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// import Group from 'zrender/src/container/Group';\n\n/**\n * @alias module:echarts/component/tooltip/TooltipRichContent\n * @constructor\n */\n\n\nfunction TooltipRichContent(api) {\n  this._zr = api.getZr();\n  this._show = false;\n  /**\n   * @private\n   */\n\n  this._hideTimeout;\n}\n\nTooltipRichContent.prototype = {\n  constructor: TooltipRichContent,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _enterable: true,\n\n  /**\n   * Update when tooltip is rendered\n   */\n  update: function update() {// noop\n  },\n  show: function show(tooltipModel) {\n    if (this._hideTimeout) {\n      clearTimeout(this._hideTimeout);\n    }\n\n    this.el.attr('show', true);\n    this._show = true;\n  },\n\n  /**\n   * Set tooltip content\n   *\n   * @param {string} content rich text string of content\n   * @param {Object} markerRich rich text style\n   * @param {Object} tooltipModel tooltip model\n   */\n  setContent: function setContent(content, markerRich, tooltipModel) {\n    if (this.el) {\n      this._zr.remove(this.el);\n    }\n\n    var markers = {};\n    var text = content;\n    var prefix = '{marker';\n    var suffix = '|}';\n    var startId = text.indexOf(prefix);\n\n    while (startId >= 0) {\n      var endId = text.indexOf(suffix);\n      var name = text.substr(startId + prefix.length, endId - startId - prefix.length);\n\n      if (name.indexOf('sub') > -1) {\n        markers['marker' + name] = {\n          textWidth: 4,\n          textHeight: 4,\n          textBorderRadius: 2,\n          textBackgroundColor: markerRich[name],\n          // TODO: textOffset is not implemented for rich text\n          textOffset: [3, 0]\n        };\n      } else {\n        markers['marker' + name] = {\n          textWidth: 10,\n          textHeight: 10,\n          textBorderRadius: 5,\n          textBackgroundColor: markerRich[name]\n        };\n      }\n\n      text = text.substr(endId + 1);\n      startId = text.indexOf('{marker');\n    }\n\n    this.el = new Text({\n      style: {\n        rich: markers,\n        text: content,\n        textLineHeight: 20,\n        textBackgroundColor: tooltipModel.get('backgroundColor'),\n        textBorderRadius: tooltipModel.get('borderRadius'),\n        textFill: tooltipModel.get('textStyle.color'),\n        textPadding: tooltipModel.get('padding')\n      },\n      z: tooltipModel.get('z')\n    });\n\n    this._zr.add(this.el);\n\n    var self = this;\n    this.el.on('mouseover', function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n\n      self._inContent = true;\n    });\n    this.el.on('mouseout', function () {\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n\n      self._inContent = false;\n    });\n  },\n  setEnterable: function setEnterable(enterable) {\n    this._enterable = enterable;\n  },\n  getSize: function getSize() {\n    var bounding = this.el.getBoundingRect();\n    return [bounding.width, bounding.height];\n  },\n  moveTo: function moveTo(x, y) {\n    if (this.el) {\n      this.el.attr('position', [x, y]);\n    }\n  },\n  hide: function hide() {\n    if (this.el) {\n      this.el.hide();\n    }\n\n    this._show = false;\n  },\n  hideLater: function hideLater(time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater mutiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  },\n  isShow: function isShow() {\n    return this._show;\n  },\n  getOuterSize: function getOuterSize() {\n    var size = this.getSize();\n    return {\n      width: size[0],\n      height: size[1]\n    };\n  }\n};\nvar _default = TooltipRichContent;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../../model/Model\");\n\nvar _model = require(\"../../util/model\");\n\nvar isNameSpecified = _model.isNameSpecified;\n\nvar lang = require(\"../../lang\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar langSelector = lang.legend.selector;\nvar defaultSelectorOption = {\n  all: {\n    type: 'all',\n    title: zrUtil.clone(langSelector.all)\n  },\n  inverse: {\n    type: 'inverse',\n    title: zrUtil.clone(langSelector.inverse)\n  }\n};\nvar LegendModel = echarts.extendComponentModel({\n  type: 'legend.plain',\n  dependencies: ['series'],\n  layoutMode: {\n    type: 'box',\n    // legend.width/height are maxWidth/maxHeight actually,\n    // whereas realy width/height is calculated by its content.\n    // (Setting {left: 10, right: 10} does not make sense).\n    // So consider the case:\n    // `setOption({legend: {left: 10});`\n    // then `setOption({legend: {right: 10});`\n    // The previous `left` should be cleared by setting `ignoreSize`.\n    ignoreSize: true\n  },\n  init: function init(option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    option.selected = option.selected || {};\n\n    this._updateSelector(option);\n  },\n  mergeOption: function mergeOption(option) {\n    LegendModel.superCall(this, 'mergeOption', option);\n\n    this._updateSelector(option);\n  },\n  _updateSelector: function _updateSelector(option) {\n    var selector = option.selector;\n\n    if (selector === true) {\n      selector = option.selector = ['all', 'inverse'];\n    }\n\n    if (zrUtil.isArray(selector)) {\n      zrUtil.each(selector, function (item, index) {\n        zrUtil.isString(item) && (item = {\n          type: item\n        });\n        selector[index] = zrUtil.merge(item, defaultSelectorOption[item.type]);\n      });\n    }\n  },\n  optionUpdated: function optionUpdated() {\n    this._updateData(this.ecModel);\n\n    var legendData = this._data; // If selectedMode is single, try to select one\n\n    if (legendData[0] && this.get('selectedMode') === 'single') {\n      var hasSelected = false; // If has any selected in option.selected\n\n      for (var i = 0; i < legendData.length; i++) {\n        var name = legendData[i].get('name');\n\n        if (this.isSelected(name)) {\n          // Force to unselect others\n          this.select(name);\n          hasSelected = true;\n          break;\n        }\n      } // Try select the first if selectedMode is single\n\n\n      !hasSelected && this.select(legendData[0].get('name'));\n    }\n  },\n  _updateData: function _updateData(ecModel) {\n    var potentialData = [];\n    var availableNames = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      var seriesName = seriesModel.name;\n      availableNames.push(seriesName);\n      var isPotential;\n\n      if (seriesModel.legendDataProvider) {\n        var data = seriesModel.legendDataProvider();\n        var names = data.mapArray(data.getName);\n\n        if (!ecModel.isSeriesFiltered(seriesModel)) {\n          availableNames = availableNames.concat(names);\n        }\n\n        if (names.length) {\n          potentialData = potentialData.concat(names);\n        } else {\n          isPotential = true;\n        }\n      } else {\n        isPotential = true;\n      }\n\n      if (isPotential && isNameSpecified(seriesModel)) {\n        potentialData.push(seriesModel.name);\n      }\n    });\n    /**\n     * @type {Array.<string>}\n     * @private\n     */\n\n    this._availableNames = availableNames; // If legend.data not specified in option, use availableNames as data,\n    // which is convinient for user preparing option.\n\n    var rawData = this.get('data') || potentialData;\n    var legendData = zrUtil.map(rawData, function (dataItem) {\n      // Can be string or number\n      if (typeof dataItem === 'string' || typeof dataItem === 'number') {\n        dataItem = {\n          name: dataItem\n        };\n      }\n\n      return new Model(dataItem, this, this.ecModel);\n    }, this);\n    /**\n     * @type {Array.<module:echarts/model/Model>}\n     * @private\n     */\n\n    this._data = legendData;\n  },\n\n  /**\n   * @return {Array.<module:echarts/model/Model>}\n   */\n  getData: function getData() {\n    return this._data;\n  },\n\n  /**\n   * @param {string} name\n   */\n  select: function select(name) {\n    var selected = this.option.selected;\n    var selectedMode = this.get('selectedMode');\n\n    if (selectedMode === 'single') {\n      var data = this._data;\n      zrUtil.each(data, function (dataItem) {\n        selected[dataItem.get('name')] = false;\n      });\n    }\n\n    selected[name] = true;\n  },\n\n  /**\n   * @param {string} name\n   */\n  unSelect: function unSelect(name) {\n    if (this.get('selectedMode') !== 'single') {\n      this.option.selected[name] = false;\n    }\n  },\n\n  /**\n   * @param {string} name\n   */\n  toggleSelected: function toggleSelected(name) {\n    var selected = this.option.selected; // Default is true\n\n    if (!selected.hasOwnProperty(name)) {\n      selected[name] = true;\n    }\n\n    this[selected[name] ? 'unSelect' : 'select'](name);\n  },\n  allSelect: function allSelect() {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      selected[dataItem.get('name', true)] = true;\n    });\n  },\n  inverseSelect: function inverseSelect() {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      var name = dataItem.get('name', true); // Initially, default value is true\n\n      if (!selected.hasOwnProperty(name)) {\n        selected[name] = true;\n      }\n\n      selected[name] = !selected[name];\n    });\n  },\n\n  /**\n   * @param {string} name\n   */\n  isSelected: function isSelected(name) {\n    var selected = this.option.selected;\n    return !(selected.hasOwnProperty(name) && !selected[name]) && zrUtil.indexOf(this._availableNames, name) >= 0;\n  },\n  getOrient: function getOrient() {\n    return this.get('orient') === 'vertical' ? {\n      index: 1,\n      name: 'vertical'\n    } : {\n      index: 0,\n      name: 'horizontal'\n    };\n  },\n  defaultOption: {\n    // \n    zlevel: 0,\n    // \n    z: 4,\n    show: true,\n    // \n    // 'horizontal' | 'vertical'\n    orient: 'horizontal',\n    left: 'center',\n    // right: 'center',\n    top: 0,\n    // bottom: null,\n    // \n    // 'auto' | 'left' | 'right'\n    //  'auto',  x \n    align: 'auto',\n    backgroundColor: 'rgba(0,0,0,0)',\n    // \n    borderColor: '#ccc',\n    borderRadius: 0,\n    // px0\n    borderWidth: 0,\n    // px5\n    // css\n    padding: 5,\n    // itempx10\n    // \n    itemGap: 10,\n    // the width of legend symbol\n    itemWidth: 25,\n    // the height of legend symbol\n    itemHeight: 14,\n    // the color of unselected legend symbol\n    inactiveColor: '#ccc',\n    // the borderColor of unselected legend symbol\n    inactiveBorderColor: '#ccc',\n    itemStyle: {\n      // the default borderWidth of legend symbol\n      borderWidth: 0\n    },\n    textStyle: {\n      // \n      color: '#333'\n    },\n    // formatter: '',\n    // \n    selectedMode: true,\n    // LEGEND.SELECTED\n    // selected: null,\n    // legend.dataitem\n    // data: [],\n    // Usage:\n    // selector: [{type: 'all or inverse', title: xxx}]\n    // or\n    // selector: true\n    // or\n    // selector: ['all', 'inverse']\n    selector: false,\n    selectorLabel: {\n      show: true,\n      borderRadius: 10,\n      padding: [3, 5, 3, 5],\n      fontSize: 12,\n      fontFamily: ' sans-serif',\n      color: '#666',\n      borderWidth: 1,\n      borderColor: '#666'\n    },\n    emphasis: {\n      selectorLabel: {\n        show: true,\n        color: '#eee',\n        backgroundColor: '#666'\n      }\n    },\n    // Value can be 'start' or 'end'\n    selectorPosition: 'auto',\n    selectorItemGap: 7,\n    selectorButtonGap: 10,\n    // Tooltip \n    tooltip: {\n      show: false\n    }\n  }\n});\nvar _default = LegendModel;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nfunction legendSelectActionHandler(methodName, payload, ecModel) {\n  var selectedMap = {};\n  var isToggleSelect = methodName === 'toggleSelected';\n  var isSelected; // Update all legend components\n\n  ecModel.eachComponent('legend', function (legendModel) {\n    if (isToggleSelect && isSelected != null) {\n      // Force other legend has same selected status\n      // Or the first is toggled to true and other are toggled to false\n      // In the case one legend has some item unSelected in option. And if other legend\n      // doesn't has the item, they will assume it is selected.\n      legendModel[isSelected ? 'select' : 'unSelect'](payload.name);\n    } else if (methodName === 'allSelect' || methodName === 'inverseSelect') {\n      legendModel[methodName]();\n    } else {\n      legendModel[methodName](payload.name);\n      isSelected = legendModel.isSelected(payload.name);\n    }\n\n    var legendData = legendModel.getData();\n    zrUtil.each(legendData, function (model) {\n      var name = model.get('name'); // Wrap element\n\n      if (name === '\\n' || name === '') {\n        return;\n      }\n\n      var isItemSelected = legendModel.isSelected(name);\n\n      if (selectedMap.hasOwnProperty(name)) {\n        // Unselected if any legend is unselected\n        selectedMap[name] = selectedMap[name] && isItemSelected;\n      } else {\n        selectedMap[name] = isItemSelected;\n      }\n    });\n  }); // Return the event explicitly\n\n  return methodName === 'allSelect' || methodName === 'inverseSelect' ? {\n    selected: selectedMap\n  } : {\n    name: payload.name,\n    selected: selectedMap\n  };\n}\n/**\n * @event legendToggleSelect\n * @type {Object}\n * @property {string} type 'legendToggleSelect'\n * @property {string} [from]\n * @property {string} name Series name or data item name\n */\n\n\necharts.registerAction('legendToggleSelect', 'legendselectchanged', zrUtil.curry(legendSelectActionHandler, 'toggleSelected'));\necharts.registerAction('legendAllSelect', 'legendselectall', zrUtil.curry(legendSelectActionHandler, 'allSelect'));\necharts.registerAction('legendInverseSelect', 'legendinverseselect', zrUtil.curry(legendSelectActionHandler, 'inverseSelect'));\n/**\n * @event legendSelect\n * @type {Object}\n * @property {string} type 'legendSelect'\n * @property {string} name Series name or data item name\n */\n\necharts.registerAction('legendSelect', 'legendselected', zrUtil.curry(legendSelectActionHandler, 'select'));\n/**\n * @event legendUnSelect\n * @type {Object}\n * @property {string} type 'legendUnSelect'\n * @property {string} name Series name or data item name\n */\n\necharts.registerAction('legendUnSelect', 'legendunselected', zrUtil.curry(legendSelectActionHandler, 'unSelect'));","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _listComponent = require(\"../helper/listComponent\");\n\nvar makeBackground = _listComponent.makeBackground;\n\nvar layoutUtil = require(\"../../util/layout\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar Group = graphic.Group;\n\nvar _default = echarts.extendComponentView({\n  type: 'legend.plain',\n  newlineDisabled: false,\n\n  /**\n   * @override\n   */\n  init: function init() {\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n    this.group.add(this._contentGroup = new Group());\n    /**\n     * @private\n     * @type {module:zrender/Element}\n     */\n\n    this._backgroundEl;\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n\n    this.group.add(this._selectorGroup = new Group());\n    /**\n     * If first rendering, `contentGroup.position` is [0, 0], which\n     * does not make sense and may cause unexepcted animation if adopted.\n     * @private\n     * @type {boolean}\n     */\n\n    this._isFirstRender = true;\n  },\n\n  /**\n   * @protected\n   */\n  getContentGroup: function getContentGroup() {\n    return this._contentGroup;\n  },\n\n  /**\n   * @protected\n   */\n  getSelectorGroup: function getSelectorGroup() {\n    return this._selectorGroup;\n  },\n\n  /**\n   * @override\n   */\n  render: function render(legendModel, ecModel, api) {\n    var isFirstRender = this._isFirstRender;\n    this._isFirstRender = false;\n    this.resetInner();\n\n    if (!legendModel.get('show', true)) {\n      return;\n    }\n\n    var itemAlign = legendModel.get('align');\n    var orient = legendModel.get('orient');\n\n    if (!itemAlign || itemAlign === 'auto') {\n      itemAlign = legendModel.get('left') === 'right' && orient === 'vertical' ? 'right' : 'left';\n    }\n\n    var selector = legendModel.get('selector', true);\n    var selectorPosition = legendModel.get('selectorPosition', true);\n\n    if (selector && (!selectorPosition || selectorPosition === 'auto')) {\n      selectorPosition = orient === 'horizontal' ? 'end' : 'start';\n    }\n\n    this.renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition); // Perform layout.\n\n    var positionInfo = legendModel.getBoxLayoutParams();\n    var viewportSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var padding = legendModel.get('padding');\n    var maxSize = layoutUtil.getLayoutRect(positionInfo, viewportSize, padding);\n    var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition); // Place mainGroup, based on the calculated `mainRect`.\n\n    var layoutRect = layoutUtil.getLayoutRect(zrUtil.defaults({\n      width: mainRect.width,\n      height: mainRect.height\n    }, positionInfo), viewportSize, padding);\n    this.group.attr('position', [layoutRect.x - mainRect.x, layoutRect.y - mainRect.y]); // Render background after group is layout.\n\n    this.group.add(this._backgroundEl = makeBackground(mainRect, legendModel));\n  },\n\n  /**\n   * @protected\n   */\n  resetInner: function resetInner() {\n    this.getContentGroup().removeAll();\n    this._backgroundEl && this.group.remove(this._backgroundEl);\n    this.getSelectorGroup().removeAll();\n  },\n\n  /**\n   * @protected\n   */\n  renderInner: function renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var legendDrawnMap = zrUtil.createHashMap();\n    var selectMode = legendModel.get('selectedMode');\n    var excludeSeriesId = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      !seriesModel.get('legendHoverLink') && excludeSeriesId.push(seriesModel.id);\n    });\n    each(legendModel.getData(), function (itemModel, dataIndex) {\n      var name = itemModel.get('name'); // Use empty string or \\n as a newline string\n\n      if (!this.newlineDisabled && (name === '' || name === '\\n')) {\n        contentGroup.add(new Group({\n          newline: true\n        }));\n        return;\n      } // Representitive series.\n\n\n      var seriesModel = ecModel.getSeriesByName(name)[0];\n\n      if (legendDrawnMap.get(name)) {\n        // Have been drawed\n        return;\n      } // Series legend\n\n\n      if (seriesModel) {\n        var data = seriesModel.getData();\n        var color = data.getVisual('color');\n        var borderColor = data.getVisual('borderColor'); // If color is a callback function\n\n        if (typeof color === 'function') {\n          // Use the first data\n          color = color(seriesModel.getDataParams(0));\n        } // If borderColor is a callback function\n\n\n        if (typeof borderColor === 'function') {\n          // Use the first data\n          borderColor = borderColor(seriesModel.getDataParams(0));\n        } // Using rect symbol defaultly\n\n\n        var legendSymbolType = data.getVisual('legendSymbol') || 'roundRect';\n        var symbolType = data.getVisual('symbol');\n\n        var itemGroup = this._createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, symbolType, itemAlign, color, borderColor, selectMode);\n\n        itemGroup.on('click', curry(dispatchSelectAction, name, api)).on('mouseover', curry(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));\n        legendDrawnMap.set(name, true);\n      } else {\n        // Data legend of pie, funnel\n        ecModel.eachRawSeries(function (seriesModel) {\n          // In case multiple series has same data name\n          if (legendDrawnMap.get(name)) {\n            return;\n          }\n\n          if (seriesModel.legendDataProvider) {\n            var data = seriesModel.legendDataProvider();\n            var idx = data.indexOfName(name);\n\n            if (idx < 0) {\n              return;\n            }\n\n            var color = data.getItemVisual(idx, 'color');\n            var borderColor = data.getItemVisual(idx, 'borderColor');\n            var legendSymbolType = 'roundRect';\n\n            var itemGroup = this._createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, null, itemAlign, color, borderColor, selectMode); // FIXME: consider different series has items with the same name.\n\n\n            itemGroup.on('click', curry(dispatchSelectAction, name, api)) // Should not specify the series name, consider legend controls\n            // more than one pie series.\n            .on('mouseover', curry(dispatchHighlightAction, null, name, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, null, name, api, excludeSeriesId));\n            legendDrawnMap.set(name, true);\n          }\n        }, this);\n      }\n    }, this);\n\n    if (selector) {\n      this._createSelector(selector, legendModel, api, orient, selectorPosition);\n    }\n  },\n  _createSelector: function _createSelector(selector, legendModel, api, orient, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    each(selector, function (selectorItem) {\n      createSelectorButton(selectorItem);\n    });\n\n    function createSelectorButton(selectorItem) {\n      var type = selectorItem.type;\n      var labelText = new graphic.Text({\n        style: {\n          x: 0,\n          y: 0,\n          align: 'center',\n          verticalAlign: 'middle'\n        },\n        onclick: function onclick() {\n          api.dispatchAction({\n            type: type === 'all' ? 'legendAllSelect' : 'legendInverseSelect'\n          });\n        }\n      });\n      selectorGroup.add(labelText);\n      var labelModel = legendModel.getModel('selectorLabel');\n      var emphasisLabelModel = legendModel.getModel('emphasis.selectorLabel');\n      graphic.setLabelStyle(labelText.style, labelText.hoverStyle = {}, labelModel, emphasisLabelModel, {\n        defaultText: selectorItem.title,\n        isRectText: false\n      });\n      graphic.setHoverStyle(labelText);\n    }\n  },\n  _createItem: function _createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, symbolType, itemAlign, color, borderColor, selectMode) {\n    var itemWidth = legendModel.get('itemWidth');\n    var itemHeight = legendModel.get('itemHeight');\n    var inactiveColor = legendModel.get('inactiveColor');\n    var inactiveBorderColor = legendModel.get('inactiveBorderColor');\n    var symbolKeepAspect = legendModel.get('symbolKeepAspect');\n    var legendModelItemStyle = legendModel.getModel('itemStyle');\n    var isSelected = legendModel.isSelected(name);\n    var itemGroup = new Group();\n    var textStyleModel = itemModel.getModel('textStyle');\n    var itemIcon = itemModel.get('icon');\n    var tooltipModel = itemModel.getModel('tooltip');\n    var legendGlobalTooltipModel = tooltipModel.parentModel; // Use user given icon first\n\n    legendSymbolType = itemIcon || legendSymbolType;\n    var legendSymbol = createSymbol(legendSymbolType, 0, 0, itemWidth, itemHeight, isSelected ? color : inactiveColor, // symbolKeepAspect default true for legend\n    symbolKeepAspect == null ? true : symbolKeepAspect);\n    itemGroup.add(setSymbolStyle(legendSymbol, legendSymbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected)); // Compose symbols\n    // PENDING\n\n    if (!itemIcon && symbolType // At least show one symbol, can't be all none\n    && (symbolType !== legendSymbolType || symbolType === 'none')) {\n      var size = itemHeight * 0.8;\n\n      if (symbolType === 'none') {\n        symbolType = 'circle';\n      }\n\n      var legendSymbolCenter = createSymbol(symbolType, (itemWidth - size) / 2, (itemHeight - size) / 2, size, size, isSelected ? color : inactiveColor, // symbolKeepAspect default true for legend\n      symbolKeepAspect == null ? true : symbolKeepAspect); // Put symbol in the center\n\n      itemGroup.add(setSymbolStyle(legendSymbolCenter, symbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected));\n    }\n\n    var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\n    var textAlign = itemAlign;\n    var formatter = legendModel.get('formatter');\n    var content = name;\n\n    if (typeof formatter === 'string' && formatter) {\n      content = formatter.replace('{name}', name != null ? name : '');\n    } else if (typeof formatter === 'function') {\n      content = formatter(name);\n    }\n\n    itemGroup.add(new graphic.Text({\n      style: graphic.setTextStyle({}, textStyleModel, {\n        text: content,\n        x: textX,\n        y: itemHeight / 2,\n        textFill: isSelected ? textStyleModel.getTextColor() : inactiveColor,\n        textAlign: textAlign,\n        textVerticalAlign: 'middle'\n      })\n    })); // Add a invisible rect to increase the area of mouse hover\n\n    var hitRect = new graphic.Rect({\n      shape: itemGroup.getBoundingRect(),\n      invisible: true,\n      tooltip: tooltipModel.get('show') ? zrUtil.extend({\n        content: name,\n        // Defaul formatter\n        formatter: legendGlobalTooltipModel.get('formatter', true) || function () {\n          return name;\n        },\n        formatterParams: {\n          componentType: 'legend',\n          legendIndex: legendModel.componentIndex,\n          name: name,\n          $vars: ['name']\n        }\n      }, tooltipModel.option) : null\n    });\n    itemGroup.add(hitRect);\n    itemGroup.eachChild(function (child) {\n      child.silent = true;\n    });\n    hitRect.silent = !selectMode;\n    this.getContentGroup().add(itemGroup);\n    graphic.setHoverStyle(itemGroup);\n    itemGroup.__legendDataIndex = dataIndex;\n    return itemGroup;\n  },\n\n  /**\n   * @protected\n   */\n  layoutInner: function layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var selectorGroup = this.getSelectorGroup(); // Place items in contentGroup.\n\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\n    var contentRect = contentGroup.getBoundingRect();\n    var contentPos = [-contentRect.x, -contentRect.y];\n\n    if (selector) {\n      // Place buttons in selectorGroup\n      layoutUtil.box( // Buttons in selectorGroup always layout horizontally\n      'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n      var selectorRect = selectorGroup.getBoundingRect();\n      var selectorPos = [-selectorRect.x, -selectorRect.y];\n      var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n      var orientIdx = legendModel.getOrient().index;\n      var wh = orientIdx === 0 ? 'width' : 'height';\n      var hw = orientIdx === 0 ? 'height' : 'width';\n      var yx = orientIdx === 0 ? 'y' : 'x';\n\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += contentRect[wh] + selectorButtonGap;\n      } else {\n        contentPos[orientIdx] += selectorRect[wh] + selectorButtonGap;\n      } //Always align selector to content as 'middle'\n\n\n      selectorPos[1 - orientIdx] += contentRect[hw] / 2 - selectorRect[hw] / 2;\n      selectorGroup.attr('position', selectorPos);\n      contentGroup.attr('position', contentPos);\n      var mainRect = {\n        x: 0,\n        y: 0\n      };\n      mainRect[wh] = contentRect[wh] + selectorButtonGap + selectorRect[wh];\n      mainRect[hw] = Math.max(contentRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(0, selectorRect[yx] + selectorPos[1 - orientIdx]);\n      return mainRect;\n    } else {\n      contentGroup.attr('position', contentPos);\n      return this.group.getBoundingRect();\n    }\n  },\n\n  /**\n   * @protected\n   */\n  remove: function remove() {\n    this.getContentGroup().removeAll();\n    this._isFirstRender = true;\n  }\n});\n\nfunction setSymbolStyle(symbol, symbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected) {\n  var itemStyle;\n\n  if (symbolType !== 'line' && symbolType.indexOf('empty') < 0) {\n    itemStyle = legendModelItemStyle.getItemStyle();\n    symbol.style.stroke = borderColor;\n\n    if (!isSelected) {\n      itemStyle.stroke = inactiveBorderColor;\n    }\n  } else {\n    itemStyle = legendModelItemStyle.getItemStyle(['borderWidth', 'borderColor']);\n  }\n\n  return symbol.setStyle(itemStyle);\n}\n\nfunction dispatchSelectAction(name, api) {\n  api.dispatchAction({\n    type: 'legendToggleSelect',\n    name: name\n  });\n}\n\nfunction dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  var el = api.getZr().storage.getDisplayList()[0];\n\n  if (!(el && el.useHoverLayer)) {\n    api.dispatchAction({\n      type: 'highlight',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nfunction dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  var el = api.getZr().storage.getDisplayList()[0];\n\n  if (!(el && el.useHoverLayer)) {\n    api.dispatchAction({\n      type: 'downplay',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\nvar layoutBox = _layout.box;\nvar positionElement = _layout.positionElement;\n\nvar formatUtil = require(\"../../util/format\");\n\nvar graphic = require(\"../../util/graphic\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Layout list like component.\n * It will box layout each items in group of component and then position the whole group in the viewport\n * @param {module:zrender/group/Group} group\n * @param {module:echarts/model/Component} componentModel\n * @param {module:echarts/ExtensionAPI}\n */\n\n\nfunction layout(group, componentModel, api) {\n  var boxLayoutParams = componentModel.getBoxLayoutParams();\n  var padding = componentModel.get('padding');\n  var viewportSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var rect = getLayoutRect(boxLayoutParams, viewportSize, padding);\n  layoutBox(componentModel.get('orient'), group, componentModel.get('itemGap'), rect.width, rect.height);\n  positionElement(group, boxLayoutParams, viewportSize, padding);\n}\n\nfunction makeBackground(rect, componentModel) {\n  var padding = formatUtil.normalizeCssArray(componentModel.get('padding'));\n  var style = componentModel.getItemStyle(['color', 'opacity']);\n  style.fill = componentModel.get('backgroundColor');\n  var rect = new graphic.Rect({\n    shape: {\n      x: rect.x - padding[3],\n      y: rect.y - padding[0],\n      width: rect.width + padding[1] + padding[3],\n      height: rect.height + padding[0] + padding[2],\n      r: componentModel.get('borderRadius')\n    },\n    style: style,\n    silent: true,\n    z2: -1\n  }); // FIXME\n  // `subPixelOptimizeRect` may bring some gap between edge of viewpart\n  // and background rect when setting like `left: 0`, `top: 0`.\n  // graphic.subPixelOptimizeRect(rect);\n\n  return rect;\n}\n\nexports.layout = layout;\nexports.makeBackground = makeBackground;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n\n  if (legendModels && legendModels.length) {\n    ecModel.filterSeries(function (series) {\n      // If in any legend component the status is not selected.\n      // Because in legend series is assumed selected when it is not in the legend data.\n      for (var i = 0; i < legendModels.length; i++) {\n        if (!legendModels[i].isSelected(series.name)) {\n          return false;\n        }\n      }\n\n      return true;\n    });\n  }\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nrequire(\"./pie/PieSeries\");\n\nrequire(\"./pie/PieView\");\n\nvar createDataSelectAction = require(\"../action/createDataSelectAction\");\n\nvar dataColor = require(\"../visual/dataColor\");\n\nvar pieLayout = require(\"./pie/pieLayout\");\n\nvar dataFilter = require(\"../processor/dataFilter\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\ncreateDataSelectAction('pie', [{\n  type: 'pieToggleSelect',\n  event: 'pieselectchanged',\n  method: 'toggleSelected'\n}, {\n  type: 'pieSelect',\n  event: 'pieselected',\n  method: 'select'\n}, {\n  type: 'pieUnSelect',\n  event: 'pieunselected',\n  method: 'unSelect'\n}]);\necharts.registerVisual(dataColor('pie'));\necharts.registerLayout(zrUtil.curry(pieLayout, 'pie'));\necharts.registerProcessor(dataFilter('pie'));","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../../echarts\");\n\nvar createListSimply = require(\"../helper/createListSimply\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar _number = require(\"../../util/number\");\n\nvar getPercentWithPrecision = _number.getPercentWithPrecision;\n\nvar dataSelectableMixin = require(\"../../component/helper/selectableMixin\");\n\nvar _dataProvider = require(\"../../data/helper/dataProvider\");\n\nvar retrieveRawAttr = _dataProvider.retrieveRawAttr;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar PieSeries = echarts.extendSeriesModel({\n  type: 'series.pie',\n  // Overwrite\n  init: function init(option) {\n    PieSeries.superApply(this, 'init', arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n    this.legendDataProvider = function () {\n      return this.getRawData();\n    };\n\n    this.updateSelectedMap(this._createSelectableList());\n\n    this._defaultLabelLine(option);\n  },\n  // Overwrite\n  mergeOption: function mergeOption(newOption) {\n    PieSeries.superCall(this, 'mergeOption', newOption);\n    this.updateSelectedMap(this._createSelectableList());\n  },\n  getInitialData: function getInitialData(option, ecModel) {\n    return createListSimply(this, ['value']);\n  },\n  _createSelectableList: function _createSelectableList() {\n    var data = this.getRawData();\n    var valueDim = data.mapDimension('value');\n    var targetList = [];\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      targetList.push({\n        name: data.getName(i),\n        value: data.get(valueDim, i),\n        selected: retrieveRawAttr(data, i, 'selected')\n      });\n    }\n\n    return targetList;\n  },\n  // Overwrite\n  getDataParams: function getDataParams(dataIndex) {\n    var data = this.getData();\n    var params = PieSeries.superCall(this, 'getDataParams', dataIndex); // FIXME toFixed?\n\n    var valueList = [];\n    data.each(data.mapDimension('value'), function (value) {\n      valueList.push(value);\n    });\n    params.percent = getPercentWithPrecision(valueList, dataIndex, data.hostModel.get('percentPrecision'));\n    params.$vars.push('percent');\n    return params;\n  },\n  _defaultLabelLine: function _defaultLabelLine(option) {\n    // Extend labelLine emphasis\n    modelUtil.defaultEmphasis(option, 'labelLine', ['show']);\n    var labelLineNormalOpt = option.labelLine;\n    var labelLineEmphasisOpt = option.emphasis.labelLine; // Not show label line if `label.normal.show = false`\n\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    hoverAnimation: true,\n    // \n    center: ['50%', '50%'],\n    radius: [0, '75%'],\n    // \n    clockwise: true,\n    startAngle: 90,\n    // 0\n    minAngle: 0,\n    // If the angle of a sector less than `minShowLabelAngle`,\n    // the label will not be displayed.\n    minShowLabelAngle: 0,\n    // \n    selectedOffset: 10,\n    // \n    hoverOffset: 10,\n    // If use strategy to avoid label overlapping\n    avoidLabelOverlap: true,\n    // singlemultiple\n    // selectedMode: false,\n    // 'radius' | 'area'\n    // roseType: null,\n    percentPrecision: 2,\n    // If still show when all data zero.\n    stillShowZeroSum: true,\n    // cursor: null,\n    label: {\n      // If rotate around circle\n      rotate: false,\n      show: true,\n      // 'outer', 'inside', 'center'\n      position: 'outer' // formatter: Tooltip.formatter\n      // TEXTSTYLE\n      // distance: positioninnerlabel()\n\n    },\n    // Enabled when label.normal.position is 'outer'\n    labelLine: {\n      show: true,\n      // \n      length: 15,\n      // \n      length2: 15,\n      smooth: false,\n      lineStyle: {\n        // color: ,\n        width: 1,\n        type: 'solid'\n      }\n    },\n    itemStyle: {\n      borderWidth: 1\n    },\n    // Animation type. Valid values: expansion, scale\n    animationType: 'expansion',\n    // Animation type when update. Valid values: transition, expansion\n    animationTypeUpdate: 'transition',\n    animationEasing: 'cubicOut'\n  }\n});\nzrUtil.mixin(PieSeries, dataSelectableMixin);\nvar _default = PieSeries;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar createDimensions = require(\"../../data/helper/createDimensions\");\n\nvar List = require(\"../../data/List\");\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar extend = _util.extend;\nvar isArray = _util.isArray;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * [Usage]:\n * (1)\n * createListSimply(seriesModel, ['value']);\n * (2)\n * createListSimply(seriesModel, {\n *     coordDimensions: ['value'],\n *     dimensionsCount: 5\n * });\n *\n * @param {module:echarts/model/Series} seriesModel\n * @param {Object|Array.<string|Object>} opt opt or coordDimensions\n *        The options in opt, see `echarts/data/helper/createDimensions`\n * @param {Array.<string>} [nameList]\n * @return {module:echarts/data/List}\n */\n\nfunction _default(seriesModel, opt, nameList) {\n  opt = isArray(opt) && {\n    coordDimensions: opt\n  } || extend({}, opt);\n  var source = seriesModel.getSource();\n  var dimensionsInfo = createDimensions(source, opt);\n  var list = new List(dimensionsInfo, seriesModel);\n  list.initData(source, nameList);\n  return list;\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Data selectable mixin for chart series.\n * To eanble data select, option of series must have `selectedMode`.\n * And each data item will use `selected` to toggle itself selected status\n */\n\n\nvar _default = {\n  /**\n   * @param {Array.<Object>} targetList [{name, value, selected}, ...]\n   *        If targetList is an array, it should like [{name: ..., value: ...}, ...].\n   *        If targetList is a \"List\", it must have coordDim: 'value' dimension and name.\n   */\n  updateSelectedMap: function updateSelectedMap(targetList) {\n    this._targetList = zrUtil.isArray(targetList) ? targetList.slice() : [];\n    this._selectTargetMap = zrUtil.reduce(targetList || [], function (targetMap, target) {\n      targetMap.set(target.name, target);\n      return targetMap;\n    }, zrUtil.createHashMap());\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  // PENGING If selectedMode is null ?\n  select: function select(name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n    var selectedMode = this.get('selectedMode');\n\n    if (selectedMode === 'single') {\n      this._selectTargetMap.each(function (target) {\n        target.selected = false;\n      });\n    }\n\n    target && (target.selected = true);\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  unSelect: function unSelect(name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name); // var selectedMode = this.get('selectedMode');\n    // selectedMode !== 'single' && target && (target.selected = false);\n\n    target && (target.selected = false);\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  toggleSelected: function toggleSelected(name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n\n    if (target != null) {\n      this[target.selected ? 'unSelect' : 'select'](name, id);\n      return target.selected;\n    }\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  isSelected: function isSelected(name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n    return target && target.selected;\n  }\n};\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar ChartView = require(\"../../view/Chart\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/model/Series} seriesModel\n * @param {boolean} hasAnimation\n * @inner\n */\n\n\nfunction updateDataSelected(uid, seriesModel, hasAnimation, api) {\n  var data = seriesModel.getData();\n  var dataIndex = this.dataIndex;\n  var name = data.getName(dataIndex);\n  var selectedOffset = seriesModel.get('selectedOffset');\n  api.dispatchAction({\n    type: 'pieToggleSelect',\n    from: uid,\n    name: name,\n    seriesId: seriesModel.id\n  });\n  data.each(function (idx) {\n    toggleItemSelected(data.getItemGraphicEl(idx), data.getItemLayout(idx), seriesModel.isSelected(data.getName(idx)), selectedOffset, hasAnimation);\n  });\n}\n/**\n * @param {module:zrender/graphic/Sector} el\n * @param {Object} layout\n * @param {boolean} isSelected\n * @param {number} selectedOffset\n * @param {boolean} hasAnimation\n * @inner\n */\n\n\nfunction toggleItemSelected(el, layout, isSelected, selectedOffset, hasAnimation) {\n  var midAngle = (layout.startAngle + layout.endAngle) / 2;\n  var dx = Math.cos(midAngle);\n  var dy = Math.sin(midAngle);\n  var offset = isSelected ? selectedOffset : 0;\n  var position = [dx * offset, dy * offset];\n  hasAnimation // animateTo will stop revious animation like update transition\n  ? el.animate().when(200, {\n    position: position\n  }).start('bounceOut') : el.attr('position', position);\n}\n/**\n * Piece of pie including Sector, Label, LabelLine\n * @constructor\n * @extends {module:zrender/graphic/Group}\n */\n\n\nfunction PiePiece(data, idx) {\n  graphic.Group.call(this);\n  var sector = new graphic.Sector({\n    z2: 2\n  });\n  var polyline = new graphic.Polyline();\n  var text = new graphic.Text();\n  this.add(sector);\n  this.add(polyline);\n  this.add(text);\n  this.updateData(data, idx, true);\n}\n\nvar piePieceProto = PiePiece.prototype;\n\npiePieceProto.updateData = function (data, idx, firstCreate) {\n  var sector = this.childAt(0);\n  var labelLine = this.childAt(1);\n  var labelText = this.childAt(2);\n  var seriesModel = data.hostModel;\n  var itemModel = data.getItemModel(idx);\n  var layout = data.getItemLayout(idx);\n  var sectorShape = zrUtil.extend({}, layout);\n  sectorShape.label = null;\n  var animationTypeUpdate = seriesModel.getShallow('animationTypeUpdate');\n\n  if (firstCreate) {\n    sector.setShape(sectorShape);\n    var animationType = seriesModel.getShallow('animationType');\n\n    if (animationType === 'scale') {\n      sector.shape.r = layout.r0;\n      graphic.initProps(sector, {\n        shape: {\n          r: layout.r\n        }\n      }, seriesModel, idx);\n    } // Expansion\n    else {\n        sector.shape.endAngle = layout.startAngle;\n        graphic.updateProps(sector, {\n          shape: {\n            endAngle: layout.endAngle\n          }\n        }, seriesModel, idx);\n      }\n  } else {\n    if (animationTypeUpdate === 'expansion') {\n      // Sectors are set to be target shape and an overlaying clipPath is used for animation\n      sector.setShape(sectorShape);\n    } else {\n      // Transition animation from the old shape\n      graphic.updateProps(sector, {\n        shape: sectorShape\n      }, seriesModel, idx);\n    }\n  } // Update common style\n\n\n  var visualColor = data.getItemVisual(idx, 'color');\n  sector.useStyle(zrUtil.defaults({\n    lineJoin: 'bevel',\n    fill: visualColor\n  }, itemModel.getModel('itemStyle').getItemStyle()));\n  sector.hoverStyle = itemModel.getModel('emphasis.itemStyle').getItemStyle();\n  var cursorStyle = itemModel.getShallow('cursor');\n  cursorStyle && sector.attr('cursor', cursorStyle); // Toggle selected\n\n  toggleItemSelected(this, data.getItemLayout(idx), seriesModel.isSelected(null, idx), seriesModel.get('selectedOffset'), seriesModel.get('animation')); // Label and text animation should be applied only for transition type animation when update\n\n  var withAnimation = !firstCreate && animationTypeUpdate === 'transition';\n\n  this._updateLabel(data, idx, withAnimation);\n\n  this.highDownOnUpdate = itemModel.get('hoverAnimation') && seriesModel.isAnimationEnabled() ? function (fromState, toState) {\n    if (toState === 'emphasis') {\n      labelLine.ignore = labelLine.hoverIgnore;\n      labelText.ignore = labelText.hoverIgnore; // Sector may has animation of updating data. Force to move to the last frame\n      // Or it may stopped on the wrong shape\n\n      sector.stopAnimation(true);\n      sector.animateTo({\n        shape: {\n          r: layout.r + seriesModel.get('hoverOffset')\n        }\n      }, 300, 'elasticOut');\n    } else {\n      labelLine.ignore = labelLine.normalIgnore;\n      labelText.ignore = labelText.normalIgnore;\n      sector.stopAnimation(true);\n      sector.animateTo({\n        shape: {\n          r: layout.r\n        }\n      }, 300, 'elasticOut');\n    }\n  } : null;\n  graphic.setHoverStyle(this);\n};\n\npiePieceProto._updateLabel = function (data, idx, withAnimation) {\n  var labelLine = this.childAt(1);\n  var labelText = this.childAt(2);\n  var seriesModel = data.hostModel;\n  var itemModel = data.getItemModel(idx);\n  var layout = data.getItemLayout(idx);\n  var labelLayout = layout.label;\n  var visualColor = data.getItemVisual(idx, 'color');\n\n  if (!labelLayout || isNaN(labelLayout.x) || isNaN(labelLayout.y)) {\n    labelText.ignore = labelText.normalIgnore = labelText.hoverIgnore = labelLine.ignore = labelLine.normalIgnore = labelLine.hoverIgnore = true;\n    return;\n  }\n\n  var targetLineShape = {\n    points: labelLayout.linePoints || [[labelLayout.x, labelLayout.y], [labelLayout.x, labelLayout.y], [labelLayout.x, labelLayout.y]]\n  };\n  var targetTextStyle = {\n    x: labelLayout.x,\n    y: labelLayout.y\n  };\n\n  if (withAnimation) {\n    graphic.updateProps(labelLine, {\n      shape: targetLineShape\n    }, seriesModel, idx);\n    graphic.updateProps(labelText, {\n      style: targetTextStyle\n    }, seriesModel, idx);\n  } else {\n    labelLine.attr({\n      shape: targetLineShape\n    });\n    labelText.attr({\n      style: targetTextStyle\n    });\n  }\n\n  labelText.attr({\n    rotation: labelLayout.rotation,\n    origin: [labelLayout.x, labelLayout.y],\n    z2: 10\n  });\n  var labelModel = itemModel.getModel('label');\n  var labelHoverModel = itemModel.getModel('emphasis.label');\n  var labelLineModel = itemModel.getModel('labelLine');\n  var labelLineHoverModel = itemModel.getModel('emphasis.labelLine');\n  var visualColor = data.getItemVisual(idx, 'color');\n  graphic.setLabelStyle(labelText.style, labelText.hoverStyle = {}, labelModel, labelHoverModel, {\n    labelFetcher: data.hostModel,\n    labelDataIndex: idx,\n    defaultText: data.getName(idx),\n    autoColor: visualColor,\n    useInsideStyle: !!labelLayout.inside\n  }, {\n    textAlign: labelLayout.textAlign,\n    textVerticalAlign: labelLayout.verticalAlign,\n    opacity: data.getItemVisual(idx, 'opacity')\n  });\n  labelText.ignore = labelText.normalIgnore = !labelModel.get('show');\n  labelText.hoverIgnore = !labelHoverModel.get('show');\n  labelLine.ignore = labelLine.normalIgnore = !labelLineModel.get('show');\n  labelLine.hoverIgnore = !labelLineHoverModel.get('show'); // Default use item visual color\n\n  labelLine.setStyle({\n    stroke: visualColor,\n    opacity: data.getItemVisual(idx, 'opacity')\n  });\n  labelLine.setStyle(labelLineModel.getModel('lineStyle').getLineStyle());\n  labelLine.hoverStyle = labelLineHoverModel.getModel('lineStyle').getLineStyle();\n  var smooth = labelLineModel.get('smooth');\n\n  if (smooth && smooth === true) {\n    smooth = 0.4;\n  }\n\n  labelLine.setShape({\n    smooth: smooth\n  });\n};\n\nzrUtil.inherits(PiePiece, graphic.Group); // Pie view\n\nvar PieView = ChartView.extend({\n  type: 'pie',\n  init: function init() {\n    var sectorGroup = new graphic.Group();\n    this._sectorGroup = sectorGroup;\n  },\n  render: function render(seriesModel, ecModel, api, payload) {\n    if (payload && payload.from === this.uid) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var hasAnimation = ecModel.get('animation');\n    var isFirstRender = !oldData;\n    var animationType = seriesModel.get('animationType');\n    var animationTypeUpdate = seriesModel.get('animationTypeUpdate');\n    var onSectorClick = zrUtil.curry(updateDataSelected, this.uid, seriesModel, hasAnimation, api);\n    var selectedMode = seriesModel.get('selectedMode');\n    data.diff(oldData).add(function (idx) {\n      var piePiece = new PiePiece(data, idx); // Default expansion animation\n\n      if (isFirstRender && animationType !== 'scale') {\n        piePiece.eachChild(function (child) {\n          child.stopAnimation(true);\n        });\n      }\n\n      selectedMode && piePiece.on('click', onSectorClick);\n      data.setItemGraphicEl(idx, piePiece);\n      group.add(piePiece);\n    }).update(function (newIdx, oldIdx) {\n      var piePiece = oldData.getItemGraphicEl(oldIdx);\n\n      if (!isFirstRender && animationTypeUpdate !== 'transition') {\n        piePiece.eachChild(function (child) {\n          child.stopAnimation(true);\n        });\n      }\n\n      piePiece.updateData(data, newIdx);\n      piePiece.off('click');\n      selectedMode && piePiece.on('click', onSectorClick);\n      group.add(piePiece);\n      data.setItemGraphicEl(newIdx, piePiece);\n    }).remove(function (idx) {\n      var piePiece = oldData.getItemGraphicEl(idx);\n      group.remove(piePiece);\n    }).execute();\n\n    if (hasAnimation && data.count() > 0 && (isFirstRender ? animationType !== 'scale' : animationTypeUpdate !== 'transition')) {\n      var shape = data.getItemLayout(0);\n\n      for (var s = 1; isNaN(shape.startAngle) && s < data.count(); ++s) {\n        shape = data.getItemLayout(s);\n      }\n\n      var r = Math.max(api.getWidth(), api.getHeight()) / 2;\n      var removeClipPath = zrUtil.bind(group.removeClipPath, group);\n      group.setClipPath(this._createClipPath(shape.cx, shape.cy, r, shape.startAngle, shape.clockwise, removeClipPath, seriesModel, isFirstRender));\n    } else {\n      // clipPath is used in first-time animation, so remove it when otherwise. See: #8994\n      group.removeClipPath();\n    }\n\n    this._data = data;\n  },\n  dispose: function dispose() {},\n  _createClipPath: function _createClipPath(cx, cy, r, startAngle, clockwise, cb, seriesModel, isFirstRender) {\n    var clipPath = new graphic.Sector({\n      shape: {\n        cx: cx,\n        cy: cy,\n        r0: 0,\n        r: r,\n        startAngle: startAngle,\n        endAngle: startAngle,\n        clockwise: clockwise\n      }\n    });\n    var initOrUpdate = isFirstRender ? graphic.initProps : graphic.updateProps;\n    initOrUpdate(clipPath, {\n      shape: {\n        endAngle: startAngle + (clockwise ? 1 : -1) * Math.PI * 2\n      }\n    }, seriesModel, cb);\n    return clipPath;\n  },\n\n  /**\n   * @implement\n   */\n  containPoint: function containPoint(point, seriesModel) {\n    var data = seriesModel.getData();\n    var itemLayout = data.getItemLayout(0);\n\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  }\n});\nvar _default = PieView;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nfunction _default(seriesType, actionInfos) {\n  zrUtil.each(actionInfos, function (actionInfo) {\n    actionInfo.update = 'updateView';\n    /**\n     * @payload\n     * @property {string} seriesName\n     * @property {string} name\n     */\n\n    echarts.registerAction(actionInfo, function (payload, ecModel) {\n      var selected = {};\n      ecModel.eachComponent({\n        mainType: 'series',\n        subType: seriesType,\n        query: payload\n      }, function (seriesModel) {\n        if (seriesModel[actionInfo.method]) {\n          seriesModel[actionInfo.method](payload.name, payload.dataIndex);\n        }\n\n        var data = seriesModel.getData(); // Create selected map\n\n        data.each(function (idx) {\n          var name = data.getName(idx);\n          selected[name] = seriesModel.isSelected(name) || false;\n        });\n      });\n      return {\n        name: payload.name,\n        selected: selected,\n        seriesId: payload.seriesId\n      };\n    });\n  });\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _util = require(\"zrender/lib/core/util\");\n\nvar createHashMap = _util.createHashMap;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Pick color from palette for each data item.\n// Applicable for charts that require applying color palette\n// in data level (like pie, funnel, chord).\n\nfunction _default(seriesType) {\n  return {\n    getTargetSeries: function getTargetSeries(ecModel) {\n      // Pie and funnel may use diferrent scope\n      var paletteScope = {};\n      var seiresModelMap = createHashMap();\n      ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n        seriesModel.__paletteScope = paletteScope;\n        seiresModelMap.set(seriesModel.uid, seriesModel);\n      });\n      return seiresModelMap;\n    },\n    reset: function reset(seriesModel, ecModel) {\n      var dataAll = seriesModel.getRawData();\n      var idxMap = {};\n      var data = seriesModel.getData();\n      data.each(function (idx) {\n        var rawIdx = data.getRawIndex(idx);\n        idxMap[rawIdx] = idx;\n      });\n      dataAll.each(function (rawIdx) {\n        var filteredIdx = idxMap[rawIdx]; // If series.itemStyle.normal.color is a function. itemVisual may be encoded\n\n        var singleDataColor = filteredIdx != null && data.getItemVisual(filteredIdx, 'color', true);\n        var singleDataBorderColor = filteredIdx != null && data.getItemVisual(filteredIdx, 'borderColor', true);\n        var itemModel;\n\n        if (!singleDataColor || !singleDataBorderColor) {\n          // FIXME Performance\n          itemModel = dataAll.getItemModel(rawIdx);\n        }\n\n        if (!singleDataColor) {\n          var color = itemModel.get('itemStyle.color') || seriesModel.getColorFromPalette(dataAll.getName(rawIdx) || rawIdx + '', seriesModel.__paletteScope, dataAll.count()); // Legend may use the visual info in data before processed\n\n          dataAll.setItemVisual(rawIdx, 'color', color); // Data is not filtered\n\n          if (filteredIdx != null) {\n            data.setItemVisual(filteredIdx, 'color', color);\n          }\n        } else {\n          // Set data all color for legend\n          dataAll.setItemVisual(rawIdx, 'color', singleDataColor);\n        }\n\n        if (!singleDataBorderColor) {\n          var borderColor = itemModel.get('itemStyle.borderColor'); // Legend may use the visual info in data before processed\n\n          dataAll.setItemVisual(rawIdx, 'borderColor', borderColor); // Data is not filtered\n\n          if (filteredIdx != null) {\n            data.setItemVisual(filteredIdx, 'borderColor', borderColor);\n          }\n        } else {\n          // Set data all borderColor for legend\n          dataAll.setItemVisual(rawIdx, 'borderColor', singleDataBorderColor);\n        }\n      });\n    }\n  };\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\nvar linearMap = _number.linearMap;\n\nvar labelLayout = require(\"./labelLayout\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar PI2 = Math.PI * 2;\nvar RADIAN = Math.PI / 180;\n\nfunction _default(seriesType, ecModel, api, payload) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var center = seriesModel.get('center');\n    var radius = seriesModel.get('radius');\n\n    if (!zrUtil.isArray(radius)) {\n      radius = [0, radius];\n    }\n\n    if (!zrUtil.isArray(center)) {\n      center = [center, center];\n    }\n\n    var width = api.getWidth();\n    var height = api.getHeight();\n    var size = Math.min(width, height);\n    var cx = parsePercent(center[0], width);\n    var cy = parsePercent(center[1], height);\n    var r0 = parsePercent(radius[0], size / 2);\n    var r = parsePercent(radius[1], size / 2);\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\n    var validDataCount = 0;\n    data.each(valueDim, function (value) {\n      !isNaN(value) && validDataCount++;\n    });\n    var sum = data.getSum(valueDim); // Sum may be 0\n\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\n    var clockwise = seriesModel.get('clockwise');\n    var roseType = seriesModel.get('roseType');\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum'); // [0...max]\n\n    var extent = data.getDataExtent(valueDim);\n    extent[0] = 0; // In the case some sector angle is smaller than minAngle\n\n    var restAngle = PI2;\n    var valueSumLargerThanMinAngle = 0;\n    var currentAngle = startAngle;\n    var dir = clockwise ? 1 : -1;\n    data.each(valueDim, function (value, idx) {\n      var angle;\n\n      if (isNaN(value)) {\n        data.setItemLayout(idx, {\n          angle: NaN,\n          startAngle: NaN,\n          endAngle: NaN,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: r0,\n          r: roseType ? NaN : r\n        });\n        return;\n      } // FIXME  2.0  roseType  area \n\n\n      if (roseType !== 'area') {\n        angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n      } else {\n        angle = PI2 / validDataCount;\n      }\n\n      if (angle < minAngle) {\n        angle = minAngle;\n        restAngle -= minAngle;\n      } else {\n        valueSumLargerThanMinAngle += value;\n      }\n\n      var endAngle = currentAngle + dir * angle;\n      data.setItemLayout(idx, {\n        angle: angle,\n        startAngle: currentAngle,\n        endAngle: endAngle,\n        clockwise: clockwise,\n        cx: cx,\n        cy: cy,\n        r0: r0,\n        r: roseType ? linearMap(value, extent, [r0, r]) : r\n      });\n      currentAngle = endAngle;\n    }); // Some sector is constrained by minAngle\n    // Rest sectors needs recalculate angle\n\n    if (restAngle < PI2 && validDataCount) {\n      // Average the angle if rest angle is not enough after all angles is\n      // Constrained by minAngle\n      if (restAngle <= 1e-3) {\n        var angle = PI2 / validDataCount;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout = data.getItemLayout(idx);\n            layout.angle = angle;\n            layout.startAngle = startAngle + dir * idx * angle;\n            layout.endAngle = startAngle + dir * (idx + 1) * angle;\n          }\n        });\n      } else {\n        unitRadian = restAngle / valueSumLargerThanMinAngle;\n        currentAngle = startAngle;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout = data.getItemLayout(idx);\n            var angle = layout.angle === minAngle ? minAngle : value * unitRadian;\n            layout.startAngle = currentAngle;\n            layout.endAngle = currentAngle + dir * angle;\n            currentAngle += dir * angle;\n          }\n        });\n      }\n    }\n\n    labelLayout(seriesModel, r, width, height);\n  });\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar textContain = require(\"zrender/lib/contain/text\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME emphasis label position is not same with normal label position\n\n\nvar RADIAN = Math.PI / 180;\n\nfunction adjustSingleSide(list, cx, cy, r, dir, viewWidth, viewHeight) {\n  list.sort(function (a, b) {\n    return a.y - b.y;\n  });\n\n  function shiftDown(start, end, delta, dir) {\n    for (var j = start; j < end; j++) {\n      list[j].y += delta;\n\n      if (j > start && j + 1 < end && list[j + 1].y > list[j].y + list[j].height) {\n        shiftUp(j, delta / 2);\n        return;\n      }\n    }\n\n    shiftUp(end - 1, delta / 2);\n  }\n\n  function shiftUp(end, delta) {\n    for (var j = end; j >= 0; j--) {\n      list[j].y -= delta;\n\n      if (j > 0 && list[j].y > list[j - 1].y + list[j - 1].height) {\n        break;\n      }\n    }\n  }\n\n  function changeX(list, isDownList, cx, cy, r, dir) {\n    var lastDeltaX = dir > 0 ? isDownList // right-side\n    ? Number.MAX_VALUE // down\n    : 0 // up\n    : isDownList // left-side\n    ? Number.MAX_VALUE // down\n    : 0; // up\n\n    for (var i = 0, l = list.length; i < l; i++) {\n      var deltaY = Math.abs(list[i].y - cy);\n      var length = list[i].len;\n      var length2 = list[i].len2;\n      var deltaX = deltaY < r + length ? Math.sqrt((r + length + length2) * (r + length + length2) - deltaY * deltaY) : Math.abs(list[i].x - cx);\n\n      if (isDownList && deltaX >= lastDeltaX) {\n        // right-down, left-down\n        deltaX = lastDeltaX - 10;\n      }\n\n      if (!isDownList && deltaX <= lastDeltaX) {\n        // right-up, left-up\n        deltaX = lastDeltaX + 10;\n      }\n\n      list[i].x = cx + deltaX * dir;\n      lastDeltaX = deltaX;\n    }\n  }\n\n  var lastY = 0;\n  var delta;\n  var len = list.length;\n  var upList = [];\n  var downList = [];\n\n  for (var i = 0; i < len; i++) {\n    delta = list[i].y - lastY;\n\n    if (delta < 0) {\n      shiftDown(i, len, -delta, dir);\n    }\n\n    lastY = list[i].y + list[i].height;\n  }\n\n  if (viewHeight - lastY < 0) {\n    shiftUp(len - 1, lastY - viewHeight);\n  }\n\n  for (var i = 0; i < len; i++) {\n    if (list[i].y >= cy) {\n      downList.push(list[i]);\n    } else {\n      upList.push(list[i]);\n    }\n  }\n\n  changeX(upList, false, cx, cy, r, dir);\n  changeX(downList, true, cx, cy, r, dir);\n}\n\nfunction avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight) {\n  var leftList = [];\n  var rightList = [];\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    if (isPositionCenter(labelLayoutList[i])) {\n      continue;\n    }\n\n    if (labelLayoutList[i].x < cx) {\n      leftList.push(labelLayoutList[i]);\n    } else {\n      rightList.push(labelLayoutList[i]);\n    }\n  }\n\n  adjustSingleSide(rightList, cx, cy, r, 1, viewWidth, viewHeight);\n  adjustSingleSide(leftList, cx, cy, r, -1, viewWidth, viewHeight);\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    if (isPositionCenter(labelLayoutList[i])) {\n      continue;\n    }\n\n    var linePoints = labelLayoutList[i].linePoints;\n\n    if (linePoints) {\n      var dist = linePoints[1][0] - linePoints[2][0];\n\n      if (labelLayoutList[i].x < cx) {\n        linePoints[2][0] = labelLayoutList[i].x + 3;\n      } else {\n        linePoints[2][0] = labelLayoutList[i].x - 3;\n      }\n\n      linePoints[1][1] = linePoints[2][1] = labelLayoutList[i].y;\n      linePoints[1][0] = linePoints[2][0] + dist;\n    }\n  }\n}\n\nfunction isPositionCenter(layout) {\n  // Not change x for center label\n  return layout.position === 'center';\n}\n\nfunction _default(seriesModel, r, viewWidth, viewHeight, sum) {\n  var data = seriesModel.getData();\n  var labelLayoutList = [];\n  var cx;\n  var cy;\n  var hasLabelRotate = false;\n  var minShowLabelRadian = (seriesModel.get('minShowLabelAngle') || 0) * RADIAN;\n  data.each(function (idx) {\n    var layout = data.getItemLayout(idx);\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label'); // Use position in normal or emphasis\n\n    var labelPosition = labelModel.get('position') || itemModel.get('emphasis.label.position');\n    var labelLineModel = itemModel.getModel('labelLine');\n    var labelLineLen = labelLineModel.get('length');\n    var labelLineLen2 = labelLineModel.get('length2');\n\n    if (layout.angle < minShowLabelRadian) {\n      return;\n    }\n\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var dx = Math.cos(midAngle);\n    var dy = Math.sin(midAngle);\n    var textX;\n    var textY;\n    var linePoints;\n    var textAlign;\n    cx = layout.cx;\n    cy = layout.cy;\n    var isLabelInside = labelPosition === 'inside' || labelPosition === 'inner';\n\n    if (labelPosition === 'center') {\n      textX = layout.cx;\n      textY = layout.cy;\n      textAlign = 'center';\n    } else {\n      var x1 = (isLabelInside ? (layout.r + layout.r0) / 2 * dx : layout.r * dx) + cx;\n      var y1 = (isLabelInside ? (layout.r + layout.r0) / 2 * dy : layout.r * dy) + cy;\n      textX = x1 + dx * 3;\n      textY = y1 + dy * 3;\n\n      if (!isLabelInside) {\n        // For roseType\n        var x2 = x1 + dx * (labelLineLen + r - layout.r);\n        var y2 = y1 + dy * (labelLineLen + r - layout.r);\n        var x3 = x2 + (dx < 0 ? -1 : 1) * labelLineLen2;\n        var y3 = y2;\n        textX = x3 + (dx < 0 ? -5 : 5);\n        textY = y3;\n        linePoints = [[x1, y1], [x2, y2], [x3, y3]];\n      }\n\n      textAlign = isLabelInside ? 'center' : dx > 0 ? 'left' : 'right';\n    }\n\n    var font = labelModel.getFont();\n    var labelRotate;\n    var rotate = labelModel.get('rotate');\n\n    if (typeof rotate === 'number') {\n      labelRotate = rotate * (Math.PI / 180);\n    } else {\n      labelRotate = rotate ? dx < 0 ? -midAngle + Math.PI : -midAngle : 0;\n    }\n\n    var text = seriesModel.getFormattedLabel(idx, 'normal') || data.getName(idx);\n    var textRect = textContain.getBoundingRect(text, font, textAlign, 'top');\n    hasLabelRotate = !!labelRotate;\n    layout.label = {\n      x: textX,\n      y: textY,\n      position: labelPosition,\n      height: textRect.height,\n      len: labelLineLen,\n      len2: labelLineLen2,\n      linePoints: linePoints,\n      textAlign: textAlign,\n      verticalAlign: 'middle',\n      rotation: labelRotate,\n      inside: isLabelInside\n    }; // Not layout the inside label\n\n    if (!isLabelInside) {\n      labelLayoutList.push(layout.label);\n    }\n  });\n\n  if (!hasLabelRotate && seriesModel.get('avoidLabelOverlap')) {\n    avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight);\n  }\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(seriesType) {\n  return {\n    seriesType: seriesType,\n    reset: function reset(seriesModel, ecModel) {\n      var legendModels = ecModel.findComponents({\n        mainType: 'legend'\n      });\n\n      if (!legendModels || !legendModels.length) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n      data.filterSelf(function (idx) {\n        var name = data.getName(idx); // If in any legend component the status is not selected.\n\n        for (var i = 0; i < legendModels.length; i++) {\n          if (!legendModels[i].isSelected(name)) {\n            return false;\n          }\n        }\n\n        return true;\n      });\n    }\n  };\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../echarts\");\n\nrequire(\"./line/LineSeries\");\n\nrequire(\"./line/LineView\");\n\nvar visualSymbol = require(\"../visual/symbol\");\n\nvar layoutPoints = require(\"../layout/points\");\n\nvar dataSample = require(\"../processor/dataSample\");\n\nrequire(\"../component/gridSimple\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// In case developer forget to include grid component\n\n\necharts.registerVisual(visualSymbol('line', 'circle', 'line'));\necharts.registerLayout(layoutPoints('line')); // Down sample after filter\n\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC, dataSample('line'));","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar createListFromArray = require(\"../helper/createListFromArray\");\n\nvar SeriesModel = require(\"../../model/Series\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar _default = SeriesModel.extend({\n  type: 'series.line',\n  dependencies: ['grid', 'polar'],\n  getInitialData: function getInitialData(option, ecModel) {\n    return createListFromArray(this.getSource(), this);\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    hoverAnimation: true,\n    // stack: null\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // polarIndex: 0,\n    // If clip the overflow value\n    clip: true,\n    // cursor: null,\n    label: {\n      position: 'top'\n    },\n    // itemStyle: {\n    // },\n    lineStyle: {\n      width: 2,\n      type: 'solid'\n    },\n    // areaStyle: {\n    // origin of areaStyle. Valid values:\n    // `'auto'/null/undefined`: from axisLine to data\n    // `'start'`: from min to data\n    // `'end'`: from data to max\n    // origin: 'auto'\n    // },\n    // false, 'start', 'end', 'middle'\n    step: false,\n    // Disabled if step is true\n    smooth: false,\n    smoothMonotone: null,\n    symbol: 'emptyCircle',\n    symbolSize: 4,\n    symbolRotate: null,\n    showSymbol: true,\n    // `false`: follow the label interval strategy.\n    // `true`: show all symbols.\n    // `'auto'`: If possible, show all symbols, otherwise\n    //           follow the label interval strategy.\n    showAllSymbol: 'auto',\n    // Whether to connect break point.\n    connectNulls: false,\n    // Sampling for large data. Can be: 'average', 'max', 'min', 'sum'.\n    sampling: 'none',\n    animationEasing: 'linear',\n    // Disable progressive\n    progressive: 0,\n    hoverLayerThreshold: Infinity\n  }\n});\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar SymbolDraw = require(\"../helper/SymbolDraw\");\n\nvar SymbolClz = require(\"../helper/Symbol\");\n\nvar lineAnimationDiff = require(\"./lineAnimationDiff\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar _poly = require(\"./poly\");\n\nvar Polyline = _poly.Polyline;\nvar Polygon = _poly.Polygon;\n\nvar ChartView = require(\"../../view/Chart\");\n\nvar _helper = require(\"./helper\");\n\nvar prepareDataCoordInfo = _helper.prepareDataCoordInfo;\nvar getStackedOnPoint = _helper.getStackedOnPoint;\n\nvar _createClipPathFromCoordSys = require(\"../helper/createClipPathFromCoordSys\");\n\nvar createGridClipPath = _createClipPathFromCoordSys.createGridClipPath;\nvar createPolarClipPath = _createClipPathFromCoordSys.createPolarClipPath;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME step not support polar\n\nfunction isPointsSame(points1, points2) {\n  if (points1.length !== points2.length) {\n    return;\n  }\n\n  for (var i = 0; i < points1.length; i++) {\n    var p1 = points1[i];\n    var p2 = points2[i];\n\n    if (p1[0] !== p2[0] || p1[1] !== p2[1]) {\n      return;\n    }\n  }\n\n  return true;\n}\n\nfunction getSmooth(smooth) {\n  return typeof smooth === 'number' ? smooth : smooth ? 0.5 : 0;\n}\n/**\n * @param {module:echarts/coord/cartesian/Cartesian2D|module:echarts/coord/polar/Polar} coordSys\n * @param {module:echarts/data/List} data\n * @param {Object} dataCoordInfo\n * @param {Array.<Array.<number>>} points\n */\n\n\nfunction getStackedOnPoints(coordSys, data, dataCoordInfo) {\n  if (!dataCoordInfo.valueDim) {\n    return [];\n  }\n\n  var points = [];\n\n  for (var idx = 0, len = data.count(); idx < len; idx++) {\n    points.push(getStackedOnPoint(dataCoordInfo, coordSys, data, idx));\n  }\n\n  return points;\n}\n\nfunction turnPointsIntoStep(points, coordSys, stepTurnAt) {\n  var baseAxis = coordSys.getBaseAxis();\n  var baseIndex = baseAxis.dim === 'x' || baseAxis.dim === 'radius' ? 0 : 1;\n  var stepPoints = [];\n\n  for (var i = 0; i < points.length - 1; i++) {\n    var nextPt = points[i + 1];\n    var pt = points[i];\n    stepPoints.push(pt);\n    var stepPt = [];\n\n    switch (stepTurnAt) {\n      case 'end':\n        stepPt[baseIndex] = nextPt[baseIndex];\n        stepPt[1 - baseIndex] = pt[1 - baseIndex]; // default is start\n\n        stepPoints.push(stepPt);\n        break;\n\n      case 'middle':\n        // default is start\n        var middle = (pt[baseIndex] + nextPt[baseIndex]) / 2;\n        var stepPt2 = [];\n        stepPt[baseIndex] = stepPt2[baseIndex] = middle;\n        stepPt[1 - baseIndex] = pt[1 - baseIndex];\n        stepPt2[1 - baseIndex] = nextPt[1 - baseIndex];\n        stepPoints.push(stepPt);\n        stepPoints.push(stepPt2);\n        break;\n\n      default:\n        stepPt[baseIndex] = pt[baseIndex];\n        stepPt[1 - baseIndex] = nextPt[1 - baseIndex]; // default is start\n\n        stepPoints.push(stepPt);\n    }\n  } // Last points\n\n\n  points[i] && stepPoints.push(points[i]);\n  return stepPoints;\n}\n\nfunction getVisualGradient(data, coordSys) {\n  var visualMetaList = data.getVisual('visualMeta');\n\n  if (!visualMetaList || !visualMetaList.length || !data.count()) {\n    // When data.count() is 0, gradient range can not be calculated.\n    return;\n  }\n\n  if (coordSys.type !== 'cartesian2d') {\n    return;\n  }\n\n  var coordDim;\n  var visualMeta;\n\n  for (var i = visualMetaList.length - 1; i >= 0; i--) {\n    var dimIndex = visualMetaList[i].dimension;\n    var dimName = data.dimensions[dimIndex];\n    var dimInfo = data.getDimensionInfo(dimName);\n    coordDim = dimInfo && dimInfo.coordDim; // Can only be x or y\n\n    if (coordDim === 'x' || coordDim === 'y') {\n      visualMeta = visualMetaList[i];\n      break;\n    }\n  }\n\n  if (!visualMeta) {\n    return;\n  } // If the area to be rendered is bigger than area defined by LinearGradient,\n  // the canvas spec prescribes that the color of the first stop and the last\n  // stop should be used. But if two stops are added at offset 0, in effect\n  // browsers use the color of the second stop to render area outside\n  // LinearGradient. So we can only infinitesimally extend area defined in\n  // LinearGradient to render `outerColors`.\n\n\n  var axis = coordSys.getAxis(coordDim); // dataToCoor mapping may not be linear, but must be monotonic.\n\n  var colorStops = zrUtil.map(visualMeta.stops, function (stop) {\n    return {\n      coord: axis.toGlobalCoord(axis.dataToCoord(stop.value)),\n      color: stop.color\n    };\n  });\n  var stopLen = colorStops.length;\n  var outerColors = visualMeta.outerColors.slice();\n\n  if (stopLen && colorStops[0].coord > colorStops[stopLen - 1].coord) {\n    colorStops.reverse();\n    outerColors.reverse();\n  }\n\n  var tinyExtent = 10; // Arbitrary value: 10px\n\n  var minCoord = colorStops[0].coord - tinyExtent;\n  var maxCoord = colorStops[stopLen - 1].coord + tinyExtent;\n  var coordSpan = maxCoord - minCoord;\n\n  if (coordSpan < 1e-3) {\n    return 'transparent';\n  }\n\n  zrUtil.each(colorStops, function (stop) {\n    stop.offset = (stop.coord - minCoord) / coordSpan;\n  });\n  colorStops.push({\n    offset: stopLen ? colorStops[stopLen - 1].offset : 0.5,\n    color: outerColors[1] || 'transparent'\n  });\n  colorStops.unshift({\n    // notice colorStops.length have been changed.\n    offset: stopLen ? colorStops[0].offset : 0.5,\n    color: outerColors[0] || 'transparent'\n  }); // zrUtil.each(colorStops, function (colorStop) {\n  //     // Make sure each offset has rounded px to avoid not sharp edge\n  //     colorStop.offset = (Math.round(colorStop.offset * (end - start) + start) - start) / (end - start);\n  // });\n\n  var gradient = new graphic.LinearGradient(0, 0, 0, 0, colorStops, true);\n  gradient[coordDim] = minCoord;\n  gradient[coordDim + '2'] = maxCoord;\n  return gradient;\n}\n\nfunction getIsIgnoreFunc(seriesModel, data, coordSys) {\n  var showAllSymbol = seriesModel.get('showAllSymbol');\n  var isAuto = showAllSymbol === 'auto';\n\n  if (showAllSymbol && !isAuto) {\n    return;\n  }\n\n  var categoryAxis = coordSys.getAxesByScale('ordinal')[0];\n\n  if (!categoryAxis) {\n    return;\n  } // Note that category label interval strategy might bring some weird effect\n  // in some scenario: users may wonder why some of the symbols are not\n  // displayed. So we show all symbols as possible as we can.\n\n\n  if (isAuto // Simplify the logic, do not determine label overlap here.\n  && canShowAllSymbolForCategory(categoryAxis, data)) {\n    return;\n  } // Otherwise follow the label interval strategy on category axis.\n\n\n  var categoryDataDim = data.mapDimension(categoryAxis.dim);\n  var labelMap = {};\n  zrUtil.each(categoryAxis.getViewLabels(), function (labelItem) {\n    labelMap[labelItem.tickValue] = 1;\n  });\n  return function (dataIndex) {\n    return !labelMap.hasOwnProperty(data.get(categoryDataDim, dataIndex));\n  };\n}\n\nfunction canShowAllSymbolForCategory(categoryAxis, data) {\n  // In mose cases, line is monotonous on category axis, and the label size\n  // is close with each other. So we check the symbol size and some of the\n  // label size alone with the category axis to estimate whether all symbol\n  // can be shown without overlap.\n  var axisExtent = categoryAxis.getExtent();\n  var availSize = Math.abs(axisExtent[1] - axisExtent[0]) / categoryAxis.scale.count();\n  isNaN(availSize) && (availSize = 0); // 0/0 is NaN.\n  // Sampling some points, max 5.\n\n  var dataLen = data.count();\n  var step = Math.max(1, Math.round(dataLen / 5));\n\n  for (var dataIndex = 0; dataIndex < dataLen; dataIndex += step) {\n    if (SymbolClz.getSymbolSize(data, dataIndex // Only for cartesian, where `isHorizontal` exists.\n    )[categoryAxis.isHorizontal() ? 1 : 0] // Empirical number\n    * 1.5 > availSize) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction createLineClipPath(coordSys, hasAnimation, seriesModel) {\n  if (coordSys.type === 'cartesian2d') {\n    var isHorizontal = coordSys.getBaseAxis().isHorizontal();\n    var clipPath = createGridClipPath(coordSys, hasAnimation, seriesModel); // Expand clip shape to avoid clipping when line value exceeds axis\n\n    if (!seriesModel.get('clip', true)) {\n      var rectShape = clipPath.shape;\n      var expandSize = Math.max(rectShape.width, rectShape.height);\n\n      if (isHorizontal) {\n        rectShape.y -= expandSize;\n        rectShape.height += expandSize * 2;\n      } else {\n        rectShape.x -= expandSize;\n        rectShape.width += expandSize * 2;\n      }\n    }\n\n    return clipPath;\n  } else {\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  }\n}\n\nvar _default = ChartView.extend({\n  type: 'line',\n  init: function init() {\n    var lineGroup = new graphic.Group();\n    var symbolDraw = new SymbolDraw();\n    this.group.add(symbolDraw.group);\n    this._symbolDraw = symbolDraw;\n    this._lineGroup = lineGroup;\n  },\n  render: function render(seriesModel, ecModel, api) {\n    var coordSys = seriesModel.coordinateSystem;\n    var group = this.group;\n    var data = seriesModel.getData();\n    var lineStyleModel = seriesModel.getModel('lineStyle');\n    var areaStyleModel = seriesModel.getModel('areaStyle');\n    var points = data.mapArray(data.getItemLayout);\n    var isCoordSysPolar = coordSys.type === 'polar';\n    var prevCoordSys = this._coordSys;\n    var symbolDraw = this._symbolDraw;\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var lineGroup = this._lineGroup;\n    var hasAnimation = seriesModel.get('animation');\n    var isAreaChart = !areaStyleModel.isEmpty();\n    var valueOrigin = areaStyleModel.get('origin');\n    var dataCoordInfo = prepareDataCoordInfo(coordSys, data, valueOrigin);\n    var stackedOnPoints = getStackedOnPoints(coordSys, data, dataCoordInfo);\n    var showSymbol = seriesModel.get('showSymbol');\n    var isIgnoreFunc = showSymbol && !isCoordSysPolar && getIsIgnoreFunc(seriesModel, data, coordSys); // Remove temporary symbols\n\n    var oldData = this._data;\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    }); // Remove previous created symbols if showSymbol changed to false\n\n    if (!showSymbol) {\n      symbolDraw.remove();\n    }\n\n    group.add(lineGroup); // FIXME step not support polar\n\n    var step = !isCoordSysPolar && seriesModel.get('step');\n    var clipShapeForSymbol;\n\n    if (coordSys && coordSys.getArea) {\n      clipShapeForSymbol = coordSys.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n      // See #7913 and `test/dataZoom-clip.html`.\n\n      if (clipShapeForSymbol.width != null) {\n        clipShapeForSymbol.x -= 0.1;\n        clipShapeForSymbol.y -= 0.1;\n        clipShapeForSymbol.width += 0.2;\n        clipShapeForSymbol.height += 0.2;\n      } else if (clipShapeForSymbol.r0) {\n        clipShapeForSymbol.r0 -= 0.5;\n        clipShapeForSymbol.r1 += 0.5;\n      }\n    } // Initialization animation or coordinate system changed\n\n\n    if (!(polyline && prevCoordSys.type === coordSys.type && step === this._step)) {\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol\n      });\n\n      if (step) {\n        // TODO If stacked series is not step\n        points = turnPointsIntoStep(points, coordSys, step);\n        stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\n      }\n\n      polyline = this._newPolyline(points, coordSys, hasAnimation);\n\n      if (isAreaChart) {\n        polygon = this._newPolygon(points, stackedOnPoints, coordSys, hasAnimation);\n      }\n\n      lineGroup.setClipPath(createLineClipPath(coordSys, true, seriesModel));\n    } else {\n      if (isAreaChart && !polygon) {\n        // If areaStyle is added\n        polygon = this._newPolygon(points, stackedOnPoints, coordSys, hasAnimation);\n      } else if (polygon && !isAreaChart) {\n        // If areaStyle is removed\n        lineGroup.remove(polygon);\n        polygon = this._polygon = null;\n      } // Update clipPath\n\n\n      lineGroup.setClipPath(createLineClipPath(coordSys, false, seriesModel)); // Always update, or it is wrong in the case turning on legend\n      // because points are not changed\n\n      showSymbol && symbolDraw.updateData(data, {\n        isIgnore: isIgnoreFunc,\n        clipShape: clipShapeForSymbol\n      }); // Stop symbol animation and sync with line points\n      // FIXME performance?\n\n      data.eachItemGraphicEl(function (el) {\n        el.stopAnimation(true);\n      }); // In the case data zoom triggerred refreshing frequently\n      // Data may not change if line has a category axis. So it should animate nothing\n\n      if (!isPointsSame(this._stackedOnPoints, stackedOnPoints) || !isPointsSame(this._points, points)) {\n        if (hasAnimation) {\n          this._updateAnimation(data, stackedOnPoints, coordSys, api, step, valueOrigin);\n        } else {\n          // Not do it in update with animation\n          if (step) {\n            // TODO If stacked series is not step\n            points = turnPointsIntoStep(points, coordSys, step);\n            stackedOnPoints = turnPointsIntoStep(stackedOnPoints, coordSys, step);\n          }\n\n          polyline.setShape({\n            points: points\n          });\n          polygon && polygon.setShape({\n            points: points,\n            stackedOnPoints: stackedOnPoints\n          });\n        }\n      }\n    }\n\n    var visualColor = getVisualGradient(data, coordSys) || data.getVisual('color');\n    polyline.useStyle(zrUtil.defaults( // Use color in lineStyle first\n    lineStyleModel.getLineStyle(), {\n      fill: 'none',\n      stroke: visualColor,\n      lineJoin: 'bevel'\n    }));\n    var smooth = seriesModel.get('smooth');\n    smooth = getSmooth(seriesModel.get('smooth'));\n    polyline.setShape({\n      smooth: smooth,\n      smoothMonotone: seriesModel.get('smoothMonotone'),\n      connectNulls: seriesModel.get('connectNulls')\n    });\n\n    if (polygon) {\n      var stackedOnSeries = data.getCalculationInfo('stackedOnSeries');\n      var stackedOnSmooth = 0;\n      polygon.useStyle(zrUtil.defaults(areaStyleModel.getAreaStyle(), {\n        fill: visualColor,\n        opacity: 0.7,\n        lineJoin: 'bevel'\n      }));\n\n      if (stackedOnSeries) {\n        stackedOnSmooth = getSmooth(stackedOnSeries.get('smooth'));\n      }\n\n      polygon.setShape({\n        smooth: smooth,\n        stackedOnSmooth: stackedOnSmooth,\n        smoothMonotone: seriesModel.get('smoothMonotone'),\n        connectNulls: seriesModel.get('connectNulls')\n      });\n    }\n\n    this._data = data; // Save the coordinate system for transition animation when data changed\n\n    this._coordSys = coordSys;\n    this._stackedOnPoints = stackedOnPoints;\n    this._points = points;\n    this._step = step;\n    this._valueOrigin = valueOrigin;\n  },\n  dispose: function dispose() {},\n  highlight: function highlight(seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    if (!(dataIndex instanceof Array) && dataIndex != null && dataIndex >= 0) {\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (!symbol) {\n        // Create a temporary symbol if it is not exists\n        var pt = data.getItemLayout(dataIndex);\n\n        if (!pt) {\n          // Null data\n          return;\n        }\n\n        symbol = new SymbolClz(data, dataIndex);\n        symbol.position = pt;\n        symbol.setZ(seriesModel.get('zlevel'), seriesModel.get('z'));\n        symbol.ignore = isNaN(pt[0]) || isNaN(pt[1]);\n        symbol.__temp = true;\n        data.setItemGraphicEl(dataIndex, symbol); // Stop scale animation\n\n        symbol.stopSymbolAnimation(true);\n        this.group.add(symbol);\n      }\n\n      symbol.highlight();\n    } else {\n      // Highlight whole series\n      ChartView.prototype.highlight.call(this, seriesModel, ecModel, api, payload);\n    }\n  },\n  downplay: function downplay(seriesModel, ecModel, api, payload) {\n    var data = seriesModel.getData();\n    var dataIndex = modelUtil.queryDataIndex(data, payload);\n\n    if (dataIndex != null && dataIndex >= 0) {\n      var symbol = data.getItemGraphicEl(dataIndex);\n\n      if (symbol) {\n        if (symbol.__temp) {\n          data.setItemGraphicEl(dataIndex, null);\n          this.group.remove(symbol);\n        } else {\n          symbol.downplay();\n        }\n      }\n    } else {\n      // FIXME\n      // can not downplay completely.\n      // Downplay whole series\n      ChartView.prototype.downplay.call(this, seriesModel, ecModel, api, payload);\n    }\n  },\n\n  /**\n   * @param {module:zrender/container/Group} group\n   * @param {Array.<Array.<number>>} points\n   * @private\n   */\n  _newPolyline: function _newPolyline(points) {\n    var polyline = this._polyline; // Remove previous created polyline\n\n    if (polyline) {\n      this._lineGroup.remove(polyline);\n    }\n\n    polyline = new Polyline({\n      shape: {\n        points: points\n      },\n      silent: true,\n      z2: 10\n    });\n\n    this._lineGroup.add(polyline);\n\n    this._polyline = polyline;\n    return polyline;\n  },\n\n  /**\n   * @param {module:zrender/container/Group} group\n   * @param {Array.<Array.<number>>} stackedOnPoints\n   * @param {Array.<Array.<number>>} points\n   * @private\n   */\n  _newPolygon: function _newPolygon(points, stackedOnPoints) {\n    var polygon = this._polygon; // Remove previous created polygon\n\n    if (polygon) {\n      this._lineGroup.remove(polygon);\n    }\n\n    polygon = new Polygon({\n      shape: {\n        points: points,\n        stackedOnPoints: stackedOnPoints\n      },\n      silent: true\n    });\n\n    this._lineGroup.add(polygon);\n\n    this._polygon = polygon;\n    return polygon;\n  },\n\n  /**\n   * @private\n   */\n  // FIXME Two value axis\n  _updateAnimation: function _updateAnimation(data, stackedOnPoints, coordSys, api, step, valueOrigin) {\n    var polyline = this._polyline;\n    var polygon = this._polygon;\n    var seriesModel = data.hostModel;\n    var diff = lineAnimationDiff(this._data, data, this._stackedOnPoints, stackedOnPoints, this._coordSys, coordSys, this._valueOrigin, valueOrigin);\n    var current = diff.current;\n    var stackedOnCurrent = diff.stackedOnCurrent;\n    var next = diff.next;\n    var stackedOnNext = diff.stackedOnNext;\n\n    if (step) {\n      // TODO If stacked series is not step\n      current = turnPointsIntoStep(diff.current, coordSys, step);\n      stackedOnCurrent = turnPointsIntoStep(diff.stackedOnCurrent, coordSys, step);\n      next = turnPointsIntoStep(diff.next, coordSys, step);\n      stackedOnNext = turnPointsIntoStep(diff.stackedOnNext, coordSys, step);\n    } // `diff.current` is subset of `current` (which should be ensured by\n    // turnPointsIntoStep), so points in `__points` can be updated when\n    // points in `current` are update during animation.\n\n\n    polyline.shape.__points = diff.current;\n    polyline.shape.points = current;\n    graphic.updateProps(polyline, {\n      shape: {\n        points: next\n      }\n    }, seriesModel);\n\n    if (polygon) {\n      polygon.setShape({\n        points: current,\n        stackedOnPoints: stackedOnCurrent\n      });\n      graphic.updateProps(polygon, {\n        shape: {\n          points: next,\n          stackedOnPoints: stackedOnNext\n        }\n      }, seriesModel);\n    }\n\n    var updatedDataInfo = [];\n    var diffStatus = diff.status;\n\n    for (var i = 0; i < diffStatus.length; i++) {\n      var cmd = diffStatus[i].cmd;\n\n      if (cmd === '=') {\n        var el = data.getItemGraphicEl(diffStatus[i].idx1);\n\n        if (el) {\n          updatedDataInfo.push({\n            el: el,\n            ptIdx: i // Index of points\n\n          });\n        }\n      }\n    }\n\n    if (polyline.animators && polyline.animators.length) {\n      polyline.animators[0].during(function () {\n        for (var i = 0; i < updatedDataInfo.length; i++) {\n          var el = updatedDataInfo[i].el;\n          el.attr('position', polyline.shape.__points[updatedDataInfo[i].ptIdx]);\n        }\n      });\n    }\n  },\n  remove: function remove(ecModel) {\n    var group = this.group;\n    var oldData = this._data;\n\n    this._lineGroup.removeAll();\n\n    this._symbolDraw.remove(true); // Remove temporary created elements when highlighting\n\n\n    oldData && oldData.eachItemGraphicEl(function (el, idx) {\n      if (el.__temp) {\n        group.remove(el);\n        oldData.setItemGraphicEl(idx, null);\n      }\n    });\n    this._polyline = this._polygon = this._coordSys = this._points = this._stackedOnPoints = this._data = null;\n  }\n});\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _helper = require(\"./helper\");\n\nvar prepareDataCoordInfo = _helper.prepareDataCoordInfo;\nvar getStackedOnPoint = _helper.getStackedOnPoint;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// var arrayDiff = require('zrender/src/core/arrayDiff');\n// 'zrender/src/core/arrayDiff' has been used before, but it did\n// not do well in performance when roam with fixed dataZoom window.\n// function convertToIntId(newIdList, oldIdList) {\n//     // Generate int id instead of string id.\n//     // Compare string maybe slow in score function of arrDiff\n//     // Assume id in idList are all unique\n//     var idIndicesMap = {};\n//     var idx = 0;\n//     for (var i = 0; i < newIdList.length; i++) {\n//         idIndicesMap[newIdList[i]] = idx;\n//         newIdList[i] = idx++;\n//     }\n//     for (var i = 0; i < oldIdList.length; i++) {\n//         var oldId = oldIdList[i];\n//         // Same with newIdList\n//         if (idIndicesMap[oldId]) {\n//             oldIdList[i] = idIndicesMap[oldId];\n//         }\n//         else {\n//             oldIdList[i] = idx++;\n//         }\n//     }\n// }\n\nfunction diffData(oldData, newData) {\n  var diffResult = [];\n  newData.diff(oldData).add(function (idx) {\n    diffResult.push({\n      cmd: '+',\n      idx: idx\n    });\n  }).update(function (newIdx, oldIdx) {\n    diffResult.push({\n      cmd: '=',\n      idx: oldIdx,\n      idx1: newIdx\n    });\n  }).remove(function (idx) {\n    diffResult.push({\n      cmd: '-',\n      idx: idx\n    });\n  }).execute();\n  return diffResult;\n}\n\nfunction _default(oldData, newData, oldStackedOnPoints, newStackedOnPoints, oldCoordSys, newCoordSys, oldValueOrigin, newValueOrigin) {\n  var diff = diffData(oldData, newData); // var newIdList = newData.mapArray(newData.getId);\n  // var oldIdList = oldData.mapArray(oldData.getId);\n  // convertToIntId(newIdList, oldIdList);\n  // // FIXME One data ?\n  // diff = arrayDiff(oldIdList, newIdList);\n\n  var currPoints = [];\n  var nextPoints = []; // Points for stacking base line\n\n  var currStackedPoints = [];\n  var nextStackedPoints = [];\n  var status = [];\n  var sortedIndices = [];\n  var rawIndices = [];\n  var newDataOldCoordInfo = prepareDataCoordInfo(oldCoordSys, newData, oldValueOrigin);\n  var oldDataNewCoordInfo = prepareDataCoordInfo(newCoordSys, oldData, newValueOrigin);\n\n  for (var i = 0; i < diff.length; i++) {\n    var diffItem = diff[i];\n    var pointAdded = true; // FIXME, animation is not so perfect when dataZoom window moves fast\n    // Which is in case remvoing or add more than one data in the tail or head\n\n    switch (diffItem.cmd) {\n      case '=':\n        var currentPt = oldData.getItemLayout(diffItem.idx);\n        var nextPt = newData.getItemLayout(diffItem.idx1); // If previous data is NaN, use next point directly\n\n        if (isNaN(currentPt[0]) || isNaN(currentPt[1])) {\n          currentPt = nextPt.slice();\n        }\n\n        currPoints.push(currentPt);\n        nextPoints.push(nextPt);\n        currStackedPoints.push(oldStackedOnPoints[diffItem.idx]);\n        nextStackedPoints.push(newStackedOnPoints[diffItem.idx1]);\n        rawIndices.push(newData.getRawIndex(diffItem.idx1));\n        break;\n\n      case '+':\n        var idx = diffItem.idx;\n        currPoints.push(oldCoordSys.dataToPoint([newData.get(newDataOldCoordInfo.dataDimsForPoint[0], idx), newData.get(newDataOldCoordInfo.dataDimsForPoint[1], idx)]));\n        nextPoints.push(newData.getItemLayout(idx).slice());\n        currStackedPoints.push(getStackedOnPoint(newDataOldCoordInfo, oldCoordSys, newData, idx));\n        nextStackedPoints.push(newStackedOnPoints[idx]);\n        rawIndices.push(newData.getRawIndex(idx));\n        break;\n\n      case '-':\n        var idx = diffItem.idx;\n        var rawIndex = oldData.getRawIndex(idx); // Data is replaced. In the case of dynamic data queue\n        // FIXME FIXME FIXME\n\n        if (rawIndex !== idx) {\n          currPoints.push(oldData.getItemLayout(idx));\n          nextPoints.push(newCoordSys.dataToPoint([oldData.get(oldDataNewCoordInfo.dataDimsForPoint[0], idx), oldData.get(oldDataNewCoordInfo.dataDimsForPoint[1], idx)]));\n          currStackedPoints.push(oldStackedOnPoints[idx]);\n          nextStackedPoints.push(getStackedOnPoint(oldDataNewCoordInfo, newCoordSys, oldData, idx));\n          rawIndices.push(rawIndex);\n        } else {\n          pointAdded = false;\n        }\n\n    } // Original indices\n\n\n    if (pointAdded) {\n      status.push(diffItem);\n      sortedIndices.push(sortedIndices.length);\n    }\n  } // Diff result may be crossed if all items are changed\n  // Sort by data index\n\n\n  sortedIndices.sort(function (a, b) {\n    return rawIndices[a] - rawIndices[b];\n  });\n  var sortedCurrPoints = [];\n  var sortedNextPoints = [];\n  var sortedCurrStackedPoints = [];\n  var sortedNextStackedPoints = [];\n  var sortedStatus = [];\n\n  for (var i = 0; i < sortedIndices.length; i++) {\n    var idx = sortedIndices[i];\n    sortedCurrPoints[i] = currPoints[idx];\n    sortedNextPoints[i] = nextPoints[idx];\n    sortedCurrStackedPoints[i] = currStackedPoints[idx];\n    sortedNextStackedPoints[i] = nextStackedPoints[idx];\n    sortedStatus[i] = status[idx];\n  }\n\n  return {\n    current: sortedCurrPoints,\n    next: sortedNextPoints,\n    stackedOnCurrent: sortedCurrStackedPoints,\n    stackedOnNext: sortedNextStackedPoints,\n    status: sortedStatus\n  };\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar Path = require(\"zrender/lib/graphic/Path\");\n\nvar vec2 = require(\"zrender/lib/core/vector\");\n\nvar fixClipWithShadow = require(\"zrender/lib/graphic/helper/fixClipWithShadow\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Poly path support NaN point\n\n\nvar vec2Min = vec2.min;\nvar vec2Max = vec2.max;\nvar scaleAndAdd = vec2.scaleAndAdd;\nvar v2Copy = vec2.copy; // Temporary variable\n\nvar v = [];\nvar cp0 = [];\nvar cp1 = [];\n\nfunction isPointNull(p) {\n  return isNaN(p[0]) || isNaN(p[1]);\n}\n\nfunction drawSegment(ctx, points, start, segLen, allLen, dir, smoothMin, smoothMax, smooth, smoothMonotone, connectNulls) {\n  // if (smoothMonotone == null) {\n  //     if (isMono(points, 'x')) {\n  //         return drawMono(ctx, points, start, segLen, allLen,\n  //             dir, smoothMin, smoothMax, smooth, 'x', connectNulls);\n  //     }\n  //     else if (isMono(points, 'y')) {\n  //         return drawMono(ctx, points, start, segLen, allLen,\n  //             dir, smoothMin, smoothMax, smooth, 'y', connectNulls);\n  //     }\n  //     else {\n  //         return drawNonMono.apply(this, arguments);\n  //     }\n  // }\n  // else if (smoothMonotone !== 'none' && isMono(points, smoothMonotone)) {\n  //     return drawMono.apply(this, arguments);\n  // }\n  // else {\n  //     return drawNonMono.apply(this, arguments);\n  // }\n  if (smoothMonotone === 'none' || !smoothMonotone) {\n    return drawNonMono.apply(this, arguments);\n  } else {\n    return drawMono.apply(this, arguments);\n  }\n}\n/**\n * Check if points is in monotone.\n *\n * @param {number[][]} points         Array of points which is in [x, y] form\n * @param {string}     smoothMonotone 'x', 'y', or 'none', stating for which\n *                                    dimension that is checking.\n *                                    If is 'none', `drawNonMono` should be\n *                                    called.\n *                                    If is undefined, either being monotone\n *                                    in 'x' or 'y' will call `drawMono`.\n */\n// function isMono(points, smoothMonotone) {\n//     if (points.length <= 1) {\n//         return true;\n//     }\n//     var dim = smoothMonotone === 'x' ? 0 : 1;\n//     var last = points[0][dim];\n//     var lastDiff = 0;\n//     for (var i = 1; i < points.length; ++i) {\n//         var diff = points[i][dim] - last;\n//         if (!isNaN(diff) && !isNaN(lastDiff)\n//             && diff !== 0 && lastDiff !== 0\n//             && ((diff >= 0) !== (lastDiff >= 0))\n//         ) {\n//             return false;\n//         }\n//         if (!isNaN(diff) && diff !== 0) {\n//             lastDiff = diff;\n//             last = points[i][dim];\n//         }\n//     }\n//     return true;\n// }\n\n/**\n * Draw smoothed line in monotone, in which only vertical or horizontal bezier\n * control points will be used. This should be used when points are monotone\n * either in x or y dimension.\n */\n\n\nfunction drawMono(ctx, points, start, segLen, allLen, dir, smoothMin, smoothMax, smooth, smoothMonotone, connectNulls) {\n  var prevIdx = 0;\n  var idx = start;\n\n  for (var k = 0; k < segLen; k++) {\n    var p = points[idx];\n\n    if (idx >= allLen || idx < 0) {\n      break;\n    }\n\n    if (isPointNull(p)) {\n      if (connectNulls) {\n        idx += dir;\n        continue;\n      }\n\n      break;\n    }\n\n    if (idx === start) {\n      ctx[dir > 0 ? 'moveTo' : 'lineTo'](p[0], p[1]);\n    } else {\n      if (smooth > 0) {\n        var prevP = points[prevIdx];\n        var dim = smoothMonotone === 'y' ? 1 : 0; // Length of control point to p, either in x or y, but not both\n\n        var ctrlLen = (p[dim] - prevP[dim]) * smooth;\n        v2Copy(cp0, prevP);\n        cp0[dim] = prevP[dim] + ctrlLen;\n        v2Copy(cp1, p);\n        cp1[dim] = p[dim] - ctrlLen;\n        ctx.bezierCurveTo(cp0[0], cp0[1], cp1[0], cp1[1], p[0], p[1]);\n      } else {\n        ctx.lineTo(p[0], p[1]);\n      }\n    }\n\n    prevIdx = idx;\n    idx += dir;\n  }\n\n  return k;\n}\n/**\n * Draw smoothed line in non-monotone, in may cause undesired curve in extreme\n * situations. This should be used when points are non-monotone neither in x or\n * y dimension.\n */\n\n\nfunction drawNonMono(ctx, points, start, segLen, allLen, dir, smoothMin, smoothMax, smooth, smoothMonotone, connectNulls) {\n  var prevIdx = 0;\n  var idx = start;\n\n  for (var k = 0; k < segLen; k++) {\n    var p = points[idx];\n\n    if (idx >= allLen || idx < 0) {\n      break;\n    }\n\n    if (isPointNull(p)) {\n      if (connectNulls) {\n        idx += dir;\n        continue;\n      }\n\n      break;\n    }\n\n    if (idx === start) {\n      ctx[dir > 0 ? 'moveTo' : 'lineTo'](p[0], p[1]);\n      v2Copy(cp0, p);\n    } else {\n      if (smooth > 0) {\n        var nextIdx = idx + dir;\n        var nextP = points[nextIdx];\n\n        if (connectNulls) {\n          // Find next point not null\n          while (nextP && isPointNull(points[nextIdx])) {\n            nextIdx += dir;\n            nextP = points[nextIdx];\n          }\n        }\n\n        var ratioNextSeg = 0.5;\n        var prevP = points[prevIdx];\n        var nextP = points[nextIdx]; // Last point\n\n        if (!nextP || isPointNull(nextP)) {\n          v2Copy(cp1, p);\n        } else {\n          // If next data is null in not connect case\n          if (isPointNull(nextP) && !connectNulls) {\n            nextP = p;\n          }\n\n          vec2.sub(v, nextP, prevP);\n          var lenPrevSeg;\n          var lenNextSeg;\n\n          if (smoothMonotone === 'x' || smoothMonotone === 'y') {\n            var dim = smoothMonotone === 'x' ? 0 : 1;\n            lenPrevSeg = Math.abs(p[dim] - prevP[dim]);\n            lenNextSeg = Math.abs(p[dim] - nextP[dim]);\n          } else {\n            lenPrevSeg = vec2.dist(p, prevP);\n            lenNextSeg = vec2.dist(p, nextP);\n          } // Use ratio of seg length\n\n\n          ratioNextSeg = lenNextSeg / (lenNextSeg + lenPrevSeg);\n          scaleAndAdd(cp1, p, v, -smooth * (1 - ratioNextSeg));\n        } // Smooth constraint\n\n\n        vec2Min(cp0, cp0, smoothMax);\n        vec2Max(cp0, cp0, smoothMin);\n        vec2Min(cp1, cp1, smoothMax);\n        vec2Max(cp1, cp1, smoothMin);\n        ctx.bezierCurveTo(cp0[0], cp0[1], cp1[0], cp1[1], p[0], p[1]); // cp0 of next segment\n\n        scaleAndAdd(cp0, p, v, smooth * ratioNextSeg);\n      } else {\n        ctx.lineTo(p[0], p[1]);\n      }\n    }\n\n    prevIdx = idx;\n    idx += dir;\n  }\n\n  return k;\n}\n\nfunction getBoundingBox(points, smoothConstraint) {\n  var ptMin = [Infinity, Infinity];\n  var ptMax = [-Infinity, -Infinity];\n\n  if (smoothConstraint) {\n    for (var i = 0; i < points.length; i++) {\n      var pt = points[i];\n\n      if (pt[0] < ptMin[0]) {\n        ptMin[0] = pt[0];\n      }\n\n      if (pt[1] < ptMin[1]) {\n        ptMin[1] = pt[1];\n      }\n\n      if (pt[0] > ptMax[0]) {\n        ptMax[0] = pt[0];\n      }\n\n      if (pt[1] > ptMax[1]) {\n        ptMax[1] = pt[1];\n      }\n    }\n  }\n\n  return {\n    min: smoothConstraint ? ptMin : ptMax,\n    max: smoothConstraint ? ptMax : ptMin\n  };\n}\n\nvar Polyline = Path.extend({\n  type: 'ec-polyline',\n  shape: {\n    points: [],\n    smooth: 0,\n    smoothConstraint: true,\n    smoothMonotone: null,\n    connectNulls: false\n  },\n  style: {\n    fill: null,\n    stroke: '#000'\n  },\n  brush: fixClipWithShadow(Path.prototype.brush),\n  buildPath: function buildPath(ctx, shape) {\n    var points = shape.points;\n    var i = 0;\n    var len = points.length;\n    var result = getBoundingBox(points, shape.smoothConstraint);\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      i += drawSegment(ctx, points, i, len, len, 1, result.min, result.max, shape.smooth, shape.smoothMonotone, shape.connectNulls) + 1;\n    }\n  }\n});\nvar Polygon = Path.extend({\n  type: 'ec-polygon',\n  shape: {\n    points: [],\n    // Offset between stacked base points and points\n    stackedOnPoints: [],\n    smooth: 0,\n    stackedOnSmooth: 0,\n    smoothConstraint: true,\n    smoothMonotone: null,\n    connectNulls: false\n  },\n  brush: fixClipWithShadow(Path.prototype.brush),\n  buildPath: function buildPath(ctx, shape) {\n    var points = shape.points;\n    var stackedOnPoints = shape.stackedOnPoints;\n    var i = 0;\n    var len = points.length;\n    var smoothMonotone = shape.smoothMonotone;\n    var bbox = getBoundingBox(points, shape.smoothConstraint);\n    var stackedOnBBox = getBoundingBox(stackedOnPoints, shape.smoothConstraint);\n\n    if (shape.connectNulls) {\n      // Must remove first and last null values avoid draw error in polygon\n      for (; len > 0; len--) {\n        if (!isPointNull(points[len - 1])) {\n          break;\n        }\n      }\n\n      for (; i < len; i++) {\n        if (!isPointNull(points[i])) {\n          break;\n        }\n      }\n    }\n\n    while (i < len) {\n      var k = drawSegment(ctx, points, i, len, len, 1, bbox.min, bbox.max, shape.smooth, smoothMonotone, shape.connectNulls);\n      drawSegment(ctx, stackedOnPoints, i + k - 1, k, len, -1, stackedOnBBox.min, stackedOnBBox.max, shape.stackedOnSmooth, smoothMonotone, shape.connectNulls);\n      i += k + 1;\n      ctx.closePath();\n    }\n  }\n});\nexports.Polyline = Polyline;\nexports.Polygon = Polygon;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar samplers = {\n  average: function average(frame) {\n    var sum = 0;\n    var count = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      if (!isNaN(frame[i])) {\n        sum += frame[i];\n        count++;\n      }\n    } // Return NaN if count is 0\n\n\n    return count === 0 ? NaN : sum / count;\n  },\n  sum: function sum(frame) {\n    var sum = 0;\n\n    for (var i = 0; i < frame.length; i++) {\n      // Ignore NaN\n      sum += frame[i] || 0;\n    }\n\n    return sum;\n  },\n  max: function max(frame) {\n    var max = -Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] > max && (max = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(max) ? max : NaN;\n  },\n  min: function min(frame) {\n    var min = Infinity;\n\n    for (var i = 0; i < frame.length; i++) {\n      frame[i] < min && (min = frame[i]);\n    } // NaN will cause illegal axis extent.\n\n\n    return isFinite(min) ? min : NaN;\n  },\n  // TODO\n  // Median\n  nearest: function nearest(frame) {\n    return frame[0];\n  }\n};\n\nvar indexSampler = function indexSampler(frame, value) {\n  return Math.round(frame.length / 2);\n};\n\nfunction _default(seriesType) {\n  return {\n    seriesType: seriesType,\n    modifyOutputEnd: true,\n    reset: function reset(seriesModel, ecModel, api) {\n      var data = seriesModel.getData();\n      var sampling = seriesModel.get('sampling');\n      var coordSys = seriesModel.coordinateSystem; // Only cartesian2d support down sampling\n\n      if (coordSys.type === 'cartesian2d' && sampling) {\n        var baseAxis = coordSys.getBaseAxis();\n        var valueAxis = coordSys.getOtherAxis(baseAxis);\n        var extent = baseAxis.getExtent(); // Coordinste system has been resized\n\n        var size = extent[1] - extent[0];\n        var rate = Math.round(data.count() / size);\n\n        if (rate > 1) {\n          var sampler;\n\n          if (typeof sampling === 'string') {\n            sampler = samplers[sampling];\n          } else if (typeof sampling === 'function') {\n            sampler = sampling;\n          }\n\n          if (sampler) {\n            // Only support sample the first dim mapped from value axis.\n            seriesModel.setData(data.downSample(data.mapDimension(valueAxis.dim), 1 / rate, sampler, indexSampler));\n          }\n        }\n      }\n    }\n  };\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../echarts\");\n\nrequire(\"./scatter/ScatterSeries\");\n\nrequire(\"./scatter/ScatterView\");\n\nvar visualSymbol = require(\"../visual/symbol\");\n\nvar layoutPoints = require(\"../layout/points\");\n\nrequire(\"../component/gridSimple\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// import * as zrUtil from 'zrender/src/core/util';\n// In case developer forget to include grid component\n\n\necharts.registerVisual(visualSymbol('scatter', 'circle'));\necharts.registerLayout(layoutPoints('scatter')); // echarts.registerProcessor(function (ecModel, api) {\n//     ecModel.eachSeriesByType('scatter', function (seriesModel) {\n//         var data = seriesModel.getData();\n//         var coordSys = seriesModel.coordinateSystem;\n//         if (coordSys.type !== 'geo') {\n//             return;\n//         }\n//         var startPt = coordSys.pointToData([0, 0]);\n//         var endPt = coordSys.pointToData([api.getWidth(), api.getHeight()]);\n//         var dims = zrUtil.map(coordSys.dimensions, function (dim) {\n//             return data.mapDimension(dim);\n//         });\n//         var range = {};\n//         range[dims[0]] = [Math.min(startPt[0], endPt[0]), Math.max(startPt[0], endPt[0])];\n//         range[dims[1]] = [Math.min(startPt[1], endPt[1]), Math.max(startPt[1], endPt[1])];\n//         data.selectRange(range);\n//     });\n// });","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar createListFromArray = require(\"../helper/createListFromArray\");\n\nvar SeriesModel = require(\"../../model/Series\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar _default = SeriesModel.extend({\n  type: 'series.scatter',\n  dependencies: ['grid', 'polar', 'geo', 'singleAxis', 'calendar'],\n  getInitialData: function getInitialData(option, ecModel) {\n    return createListFromArray(this.getSource(), this);\n  },\n  brushSelector: 'point',\n  getProgressive: function getProgressive() {\n    var progressive = this.option.progressive;\n\n    if (progressive == null) {\n      // PENDING\n      return this.option.large ? 5e3 : this.get('progressive');\n    }\n\n    return progressive;\n  },\n  getProgressiveThreshold: function getProgressiveThreshold() {\n    var progressiveThreshold = this.option.progressiveThreshold;\n\n    if (progressiveThreshold == null) {\n      // PENDING\n      return this.option.large ? 1e4 : this.get('progressiveThreshold');\n    }\n\n    return progressiveThreshold;\n  },\n  defaultOption: {\n    coordinateSystem: 'cartesian2d',\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    hoverAnimation: true,\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // Polar coordinate system\n    // polarIndex: 0,\n    // Geo coordinate system\n    // geoIndex: 0,\n    // symbol: null,        // \n    symbolSize: 10,\n    // symbolSize * 2\n    // symbolRotate: null,  // \n    large: false,\n    // Available when large is true\n    largeThreshold: 2000,\n    // cursor: null,\n    // label: {\n    // show: false\n    // distance: 5,\n    // formatter: Tooltip.formatter\n    // position: 'top''right'\n    //           'inside'|'left'|'right'|'top'|'bottom'\n    // TEXTSTYLE\n    // },\n    itemStyle: {\n      opacity: 0.8 // color: \n\n    },\n    // If clip the overflow graphics\n    // Works on cartesian / polar series\n    clip: true // progressive: null\n\n  }\n});\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../../echarts\");\n\nvar SymbolDraw = require(\"../helper/SymbolDraw\");\n\nvar LargeSymbolDraw = require(\"../helper/LargeSymbolDraw\");\n\nvar pointsLayout = require(\"../../layout/points\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\necharts.extendChartView({\n  type: 'scatter',\n  render: function render(seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n\n    symbolDraw.updateData(data, {\n      // TODO\n      // If this parameter should be a shape or a bounding volume\n      // shape will be more general.\n      // But bounding volume like bounding rect will be much faster in the contain calculation\n      clipShape: this._getClipShape(seriesModel)\n    });\n    this._finished = true;\n  },\n  incrementalPrepareRender: function incrementalPrepareRender(seriesModel, ecModel, api) {\n    var data = seriesModel.getData();\n\n    var symbolDraw = this._updateSymbolDraw(data, seriesModel);\n\n    symbolDraw.incrementalPrepareUpdate(data);\n    this._finished = false;\n  },\n  incrementalRender: function incrementalRender(taskParams, seriesModel, ecModel) {\n    this._symbolDraw.incrementalUpdate(taskParams, seriesModel.getData(), {\n      clipShape: this._getClipShape(seriesModel)\n    });\n\n    this._finished = taskParams.end === seriesModel.getData().count();\n  },\n  updateTransform: function updateTransform(seriesModel, ecModel, api) {\n    var data = seriesModel.getData(); // Must mark group dirty and make sure the incremental layer will be cleared\n    // PENDING\n\n    this.group.dirty();\n\n    if (!this._finished || data.count() > 1e4 || !this._symbolDraw.isPersistent()) {\n      return {\n        update: true\n      };\n    } else {\n      var res = pointsLayout().reset(seriesModel);\n\n      if (res.progress) {\n        res.progress({\n          start: 0,\n          end: data.count()\n        }, data);\n      }\n\n      this._symbolDraw.updateLayout(data);\n    }\n  },\n  _getClipShape: function _getClipShape(seriesModel) {\n    var coordSys = seriesModel.coordinateSystem;\n    var clipArea = coordSys && coordSys.getArea && coordSys.getArea();\n    return seriesModel.get('clip', true) ? clipArea : null;\n  },\n  _updateSymbolDraw: function _updateSymbolDraw(data, seriesModel) {\n    var symbolDraw = this._symbolDraw;\n    var pipelineContext = seriesModel.pipelineContext;\n    var isLargeDraw = pipelineContext.large;\n\n    if (!symbolDraw || isLargeDraw !== this._isLargeDraw) {\n      symbolDraw && symbolDraw.remove();\n      symbolDraw = this._symbolDraw = isLargeDraw ? new LargeSymbolDraw() : new SymbolDraw();\n      this._isLargeDraw = isLargeDraw;\n      this.group.removeAll();\n    }\n\n    this.group.add(symbolDraw.group);\n    return symbolDraw;\n  },\n  remove: function remove(ecModel, api) {\n    this._symbolDraw && this._symbolDraw.remove(true);\n    this._symbolDraw = null;\n  },\n  dispose: function dispose() {}\n});","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar graphic = require(\"../../util/graphic\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar IncrementalDisplayable = require(\"zrender/lib/graphic/IncrementalDisplayable\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global Float32Array */\n// TODO Batch by color\n\n\nvar BOOST_SIZE_THRESHOLD = 4;\nvar LargeSymbolPath = graphic.extendShape({\n  shape: {\n    points: null\n  },\n  symbolProxy: null,\n  softClipShape: null,\n  buildPath: function buildPath(path, shape) {\n    var points = shape.points;\n    var size = shape.size;\n    var symbolProxy = this.symbolProxy;\n    var symbolProxyShape = symbolProxy.shape;\n    var ctx = path.getContext ? path.getContext() : path;\n    var canBoost = ctx && size[0] < BOOST_SIZE_THRESHOLD; // Do draw in afterBrush.\n\n    if (canBoost) {\n      return;\n    }\n\n    for (var i = 0; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n\n      if (this.softClipShape && !this.softClipShape.contain(x, y)) {\n        continue;\n      }\n\n      symbolProxyShape.x = x - size[0] / 2;\n      symbolProxyShape.y = y - size[1] / 2;\n      symbolProxyShape.width = size[0];\n      symbolProxyShape.height = size[1];\n      symbolProxy.buildPath(path, symbolProxyShape, true);\n    }\n  },\n  afterBrush: function afterBrush(ctx) {\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var canBoost = size[0] < BOOST_SIZE_THRESHOLD;\n\n    if (!canBoost) {\n      return;\n    }\n\n    this.setTransform(ctx); // PENDING If style or other canvas status changed?\n\n    for (var i = 0; i < points.length;) {\n      var x = points[i++];\n      var y = points[i++];\n\n      if (isNaN(x) || isNaN(y)) {\n        continue;\n      }\n\n      if (this.softClipShape && !this.softClipShape.contain(x, y)) {\n        continue;\n      } // fillRect is faster than building a rect path and draw.\n      // And it support light globalCompositeOperation.\n\n\n      ctx.fillRect(x - size[0] / 2, y - size[1] / 2, size[0], size[1]);\n    }\n\n    this.restoreTransform(ctx);\n  },\n  findDataIndex: function findDataIndex(x, y) {\n    // TODO ???\n    // Consider transform\n    var shape = this.shape;\n    var points = shape.points;\n    var size = shape.size;\n    var w = Math.max(size[0], 4);\n    var h = Math.max(size[1], 4); // Not consider transform\n    // Treat each element as a rect\n    // top down traverse\n\n    for (var idx = points.length / 2 - 1; idx >= 0; idx--) {\n      var i = idx * 2;\n      var x0 = points[i] - w / 2;\n      var y0 = points[i + 1] - h / 2;\n\n      if (x >= x0 && y >= y0 && x <= x0 + w && y <= y0 + h) {\n        return idx;\n      }\n    }\n\n    return -1;\n  }\n});\n\nfunction LargeSymbolDraw() {\n  this.group = new graphic.Group();\n}\n\nvar largeSymbolProto = LargeSymbolDraw.prototype;\n\nlargeSymbolProto.isPersistent = function () {\n  return !this._incremental;\n};\n/**\n * Update symbols draw by new data\n * @param {module:echarts/data/List} data\n * @param {Object} opt\n * @param {Object} [opt.clipShape]\n */\n\n\nlargeSymbolProto.updateData = function (data, opt) {\n  this.group.removeAll();\n  var symbolEl = new LargeSymbolPath({\n    rectHover: true,\n    cursor: 'default'\n  });\n  symbolEl.setShape({\n    points: data.getLayout('symbolPoints')\n  });\n\n  this._setCommon(symbolEl, data, false, opt);\n\n  this.group.add(symbolEl);\n  this._incremental = null;\n};\n\nlargeSymbolProto.updateLayout = function (data) {\n  if (this._incremental) {\n    return;\n  }\n\n  var points = data.getLayout('symbolPoints');\n  this.group.eachChild(function (child) {\n    if (child.startIndex != null) {\n      var len = (child.endIndex - child.startIndex) * 2;\n      var byteOffset = child.startIndex * 4 * 2;\n      points = new Float32Array(points.buffer, byteOffset, len);\n    }\n\n    child.setShape('points', points);\n  });\n};\n\nlargeSymbolProto.incrementalPrepareUpdate = function (data) {\n  this.group.removeAll();\n\n  this._clearIncremental(); // Only use incremental displayables when data amount is larger than 2 million.\n  // PENDING Incremental data?\n\n\n  if (data.count() > 2e6) {\n    if (!this._incremental) {\n      this._incremental = new IncrementalDisplayable({\n        silent: true\n      });\n    }\n\n    this.group.add(this._incremental);\n  } else {\n    this._incremental = null;\n  }\n};\n\nlargeSymbolProto.incrementalUpdate = function (taskParams, data, opt) {\n  var symbolEl;\n\n  if (this._incremental) {\n    symbolEl = new LargeSymbolPath();\n\n    this._incremental.addDisplayable(symbolEl, true);\n  } else {\n    symbolEl = new LargeSymbolPath({\n      rectHover: true,\n      cursor: 'default',\n      startIndex: taskParams.start,\n      endIndex: taskParams.end\n    });\n    symbolEl.incremental = true;\n    this.group.add(symbolEl);\n  }\n\n  symbolEl.setShape({\n    points: data.getLayout('symbolPoints')\n  });\n\n  this._setCommon(symbolEl, data, !!this._incremental, opt);\n};\n\nlargeSymbolProto._setCommon = function (symbolEl, data, isIncremental, opt) {\n  var hostModel = data.hostModel;\n  opt = opt || {}; // TODO\n  // if (data.hasItemVisual.symbolSize) {\n  //     // TODO typed array?\n  //     symbolEl.setShape('sizes', data.mapArray(\n  //         function (idx) {\n  //             var size = data.getItemVisual(idx, 'symbolSize');\n  //             return (size instanceof Array) ? size : [size, size];\n  //         }\n  //     ));\n  // }\n  // else {\n\n  var size = data.getVisual('symbolSize');\n  symbolEl.setShape('size', size instanceof Array ? size : [size, size]); // }\n\n  symbolEl.softClipShape = opt.clipShape || null; // Create symbolProxy to build path for each data\n\n  symbolEl.symbolProxy = createSymbol(data.getVisual('symbol'), 0, 0, 0, 0); // Use symbolProxy setColor method\n\n  symbolEl.setColor = symbolEl.symbolProxy.setColor;\n  var extrudeShadow = symbolEl.shape.size[0] < BOOST_SIZE_THRESHOLD;\n  symbolEl.useStyle( // Draw shadow when doing fillRect is extremely slow.\n  hostModel.getModel('itemStyle').getItemStyle(extrudeShadow ? ['color', 'shadowBlur', 'shadowColor'] : ['color']));\n  var visualColor = data.getVisual('color');\n\n  if (visualColor) {\n    symbolEl.setColor(visualColor);\n  }\n\n  if (!isIncremental) {\n    // Enable tooltip\n    // PENDING May have performance issue when path is extremely large\n    symbolEl.seriesIndex = hostModel.seriesIndex;\n    symbolEl.on('mousemove', function (e) {\n      symbolEl.dataIndex = null;\n      var dataIndex = symbolEl.findDataIndex(e.offsetX, e.offsetY);\n\n      if (dataIndex >= 0) {\n        // Provide dataIndex for tooltip\n        symbolEl.dataIndex = dataIndex + (symbolEl.startIndex || 0);\n      }\n    });\n  }\n};\n\nlargeSymbolProto.remove = function () {\n  this._clearIncremental();\n\n  this._incremental = null;\n  this.group.removeAll();\n};\n\nlargeSymbolProto._clearIncremental = function () {\n  var incremental = this._incremental;\n\n  if (incremental) {\n    incremental.clearDisplaybles();\n  }\n};\n\nvar _default = LargeSymbolDraw;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nrequire(\"../coord/cartesian/Grid\");\n\nrequire(\"./bar/PictorialBarSeries\");\n\nrequire(\"./bar/PictorialBarView\");\n\nvar _barGrid = require(\"../layout/barGrid\");\n\nvar layout = _barGrid.layout;\n\nvar visualSymbol = require(\"../visual/symbol\");\n\nrequire(\"../component/gridSimple\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// In case developer forget to include grid component\n\n\necharts.registerLayout(zrUtil.curry(layout, 'pictorialBar'));\necharts.registerVisual(visualSymbol('pictorialBar', 'roundRect'));","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar BaseBarSeries = require(\"./BaseBarSeries\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar PictorialBarSeries = BaseBarSeries.extend({\n  type: 'series.pictorialBar',\n  dependencies: ['grid'],\n  defaultOption: {\n    symbol: 'circle',\n    // Customized bar shape\n    symbolSize: null,\n    // Can be ['100%', '100%'], null means auto.\n    symbolRotate: null,\n    symbolPosition: null,\n    // 'start' or 'end' or 'center', null means auto.\n    symbolOffset: null,\n    symbolMargin: null,\n    // start margin and end margin. Can be a number or a percent string.\n    // Auto margin by defualt.\n    symbolRepeat: false,\n    // false/null/undefined, means no repeat.\n    // Can be true, means auto calculate repeat times and cut by data.\n    // Can be a number, specifies repeat times, and do not cut by data.\n    // Can be 'fixed', means auto calculate repeat times but do not cut by data.\n    symbolRepeatDirection: 'end',\n    // 'end' means from 'start' to 'end'.\n    symbolClip: false,\n    symbolBoundingData: null,\n    // Can be 60 or -40 or [-40, 60]\n    symbolPatternSize: 400,\n    // 400 * 400 px\n    barGap: '-100%',\n    // In most case, overlap is needed.\n    // z can be set in data item, which is z2 actually.\n    // Disable progressive\n    progressive: 0,\n    hoverAnimation: false // Open only when needed.\n\n  },\n  getInitialData: function getInitialData(option) {\n    // Disable stack.\n    option.stack = null;\n    return PictorialBarSeries.superApply(this, 'getInitialData', arguments);\n  }\n});\nvar _default = PictorialBarSeries;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\nvar isNumeric = _number.isNumeric;\n\nvar _helper = require(\"./helper\");\n\nvar setLabel = _helper.setLabel;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar BAR_BORDER_WIDTH_QUERY = ['itemStyle', 'borderWidth']; // index: +isHorizontal\n\nvar LAYOUT_ATTRS = [{\n  xy: 'x',\n  wh: 'width',\n  index: 0,\n  posDesc: ['left', 'right']\n}, {\n  xy: 'y',\n  wh: 'height',\n  index: 1,\n  posDesc: ['top', 'bottom']\n}];\nvar pathForLineWidth = new graphic.Circle();\nvar BarView = echarts.extendChartView({\n  type: 'pictorialBar',\n  render: function render(seriesModel, ecModel, api) {\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var cartesian = seriesModel.coordinateSystem;\n    var baseAxis = cartesian.getBaseAxis();\n    var isHorizontal = !!baseAxis.isHorizontal();\n    var coordSysRect = cartesian.grid.getRect();\n    var opt = {\n      ecSize: {\n        width: api.getWidth(),\n        height: api.getHeight()\n      },\n      seriesModel: seriesModel,\n      coordSys: cartesian,\n      coordSysExtent: [[coordSysRect.x, coordSysRect.x + coordSysRect.width], [coordSysRect.y, coordSysRect.y + coordSysRect.height]],\n      isHorizontal: isHorizontal,\n      valueDim: LAYOUT_ATTRS[+isHorizontal],\n      categoryDim: LAYOUT_ATTRS[1 - isHorizontal]\n    };\n    data.diff(oldData).add(function (dataIndex) {\n      if (!data.hasValue(dataIndex)) {\n        return;\n      }\n\n      var itemModel = getItemModel(data, dataIndex);\n      var symbolMeta = getSymbolMeta(data, dataIndex, itemModel, opt);\n      var bar = createBar(data, opt, symbolMeta);\n      data.setItemGraphicEl(dataIndex, bar);\n      group.add(bar);\n      updateCommon(bar, opt, symbolMeta);\n    }).update(function (newIndex, oldIndex) {\n      var bar = oldData.getItemGraphicEl(oldIndex);\n\n      if (!data.hasValue(newIndex)) {\n        group.remove(bar);\n        return;\n      }\n\n      var itemModel = getItemModel(data, newIndex);\n      var symbolMeta = getSymbolMeta(data, newIndex, itemModel, opt);\n      var pictorialShapeStr = getShapeStr(data, symbolMeta);\n\n      if (bar && pictorialShapeStr !== bar.__pictorialShapeStr) {\n        group.remove(bar);\n        data.setItemGraphicEl(newIndex, null);\n        bar = null;\n      }\n\n      if (bar) {\n        updateBar(bar, opt, symbolMeta);\n      } else {\n        bar = createBar(data, opt, symbolMeta, true);\n      }\n\n      data.setItemGraphicEl(newIndex, bar);\n      bar.__pictorialSymbolMeta = symbolMeta; // Add back\n\n      group.add(bar);\n      updateCommon(bar, opt, symbolMeta);\n    }).remove(function (dataIndex) {\n      var bar = oldData.getItemGraphicEl(dataIndex);\n      bar && removeBar(oldData, dataIndex, bar.__pictorialSymbolMeta.animationModel, bar);\n    }).execute();\n    this._data = data;\n    return this.group;\n  },\n  dispose: zrUtil.noop,\n  remove: function remove(ecModel, api) {\n    var group = this.group;\n    var data = this._data;\n\n    if (ecModel.get('animation')) {\n      if (data) {\n        data.eachItemGraphicEl(function (bar) {\n          removeBar(data, bar.dataIndex, ecModel, bar);\n        });\n      }\n    } else {\n      group.removeAll();\n    }\n  }\n}); // Set or calculate default value about symbol, and calculate layout info.\n\nfunction getSymbolMeta(data, dataIndex, itemModel, opt) {\n  var layout = data.getItemLayout(dataIndex);\n  var symbolRepeat = itemModel.get('symbolRepeat');\n  var symbolClip = itemModel.get('symbolClip');\n  var symbolPosition = itemModel.get('symbolPosition') || 'start';\n  var symbolRotate = itemModel.get('symbolRotate');\n  var rotation = (symbolRotate || 0) * Math.PI / 180 || 0;\n  var symbolPatternSize = itemModel.get('symbolPatternSize') || 2;\n  var isAnimationEnabled = itemModel.isAnimationEnabled();\n  var symbolMeta = {\n    dataIndex: dataIndex,\n    layout: layout,\n    itemModel: itemModel,\n    symbolType: data.getItemVisual(dataIndex, 'symbol') || 'circle',\n    color: data.getItemVisual(dataIndex, 'color'),\n    symbolClip: symbolClip,\n    symbolRepeat: symbolRepeat,\n    symbolRepeatDirection: itemModel.get('symbolRepeatDirection'),\n    symbolPatternSize: symbolPatternSize,\n    rotation: rotation,\n    animationModel: isAnimationEnabled ? itemModel : null,\n    hoverAnimation: isAnimationEnabled && itemModel.get('hoverAnimation'),\n    z2: itemModel.getShallow('z', true) || 0\n  };\n  prepareBarLength(itemModel, symbolRepeat, layout, opt, symbolMeta);\n  prepareSymbolSize(data, dataIndex, layout, symbolRepeat, symbolClip, symbolMeta.boundingLength, symbolMeta.pxSign, symbolPatternSize, opt, symbolMeta);\n  prepareLineWidth(itemModel, symbolMeta.symbolScale, rotation, opt, symbolMeta);\n  var symbolSize = symbolMeta.symbolSize;\n  var symbolOffset = itemModel.get('symbolOffset');\n\n  if (zrUtil.isArray(symbolOffset)) {\n    symbolOffset = [parsePercent(symbolOffset[0], symbolSize[0]), parsePercent(symbolOffset[1], symbolSize[1])];\n  }\n\n  prepareLayoutInfo(itemModel, symbolSize, layout, symbolRepeat, symbolClip, symbolOffset, symbolPosition, symbolMeta.valueLineWidth, symbolMeta.boundingLength, symbolMeta.repeatCutLength, opt, symbolMeta);\n  return symbolMeta;\n} // bar length can be negative.\n\n\nfunction prepareBarLength(itemModel, symbolRepeat, layout, opt, output) {\n  var valueDim = opt.valueDim;\n  var symbolBoundingData = itemModel.get('symbolBoundingData');\n  var valueAxis = opt.coordSys.getOtherAxis(opt.coordSys.getBaseAxis());\n  var zeroPx = valueAxis.toGlobalCoord(valueAxis.dataToCoord(0));\n  var pxSignIdx = 1 - +(layout[valueDim.wh] <= 0);\n  var boundingLength;\n\n  if (zrUtil.isArray(symbolBoundingData)) {\n    var symbolBoundingExtent = [convertToCoordOnAxis(valueAxis, symbolBoundingData[0]) - zeroPx, convertToCoordOnAxis(valueAxis, symbolBoundingData[1]) - zeroPx];\n    symbolBoundingExtent[1] < symbolBoundingExtent[0] && symbolBoundingExtent.reverse();\n    boundingLength = symbolBoundingExtent[pxSignIdx];\n  } else if (symbolBoundingData != null) {\n    boundingLength = convertToCoordOnAxis(valueAxis, symbolBoundingData) - zeroPx;\n  } else if (symbolRepeat) {\n    boundingLength = opt.coordSysExtent[valueDim.index][pxSignIdx] - zeroPx;\n  } else {\n    boundingLength = layout[valueDim.wh];\n  }\n\n  output.boundingLength = boundingLength;\n\n  if (symbolRepeat) {\n    output.repeatCutLength = layout[valueDim.wh];\n  }\n\n  output.pxSign = boundingLength > 0 ? 1 : boundingLength < 0 ? -1 : 0;\n}\n\nfunction convertToCoordOnAxis(axis, value) {\n  return axis.toGlobalCoord(axis.dataToCoord(axis.scale.parse(value)));\n} // Support ['100%', '100%']\n\n\nfunction prepareSymbolSize(data, dataIndex, layout, symbolRepeat, symbolClip, boundingLength, pxSign, symbolPatternSize, opt, output) {\n  var valueDim = opt.valueDim;\n  var categoryDim = opt.categoryDim;\n  var categorySize = Math.abs(layout[categoryDim.wh]);\n  var symbolSize = data.getItemVisual(dataIndex, 'symbolSize');\n\n  if (zrUtil.isArray(symbolSize)) {\n    symbolSize = symbolSize.slice();\n  } else {\n    if (symbolSize == null) {\n      symbolSize = '100%';\n    }\n\n    symbolSize = [symbolSize, symbolSize];\n  } // Note: percentage symbolSize (like '100%') do not consider lineWidth, because it is\n  // to complicated to calculate real percent value if considering scaled lineWidth.\n  // So the actual size will bigger than layout size if lineWidth is bigger than zero,\n  // which can be tolerated in pictorial chart.\n\n\n  symbolSize[categoryDim.index] = parsePercent(symbolSize[categoryDim.index], categorySize);\n  symbolSize[valueDim.index] = parsePercent(symbolSize[valueDim.index], symbolRepeat ? categorySize : Math.abs(boundingLength));\n  output.symbolSize = symbolSize; // If x or y is less than zero, show reversed shape.\n\n  var symbolScale = output.symbolScale = [symbolSize[0] / symbolPatternSize, symbolSize[1] / symbolPatternSize]; // Follow convention, 'right' and 'top' is the normal scale.\n\n  symbolScale[valueDim.index] *= (opt.isHorizontal ? -1 : 1) * pxSign;\n}\n\nfunction prepareLineWidth(itemModel, symbolScale, rotation, opt, output) {\n  // In symbols are drawn with scale, so do not need to care about the case that width\n  // or height are too small. But symbol use strokeNoScale, where acture lineWidth should\n  // be calculated.\n  var valueLineWidth = itemModel.get(BAR_BORDER_WIDTH_QUERY) || 0;\n\n  if (valueLineWidth) {\n    pathForLineWidth.attr({\n      scale: symbolScale.slice(),\n      rotation: rotation\n    });\n    pathForLineWidth.updateTransform();\n    valueLineWidth /= pathForLineWidth.getLineScale();\n    valueLineWidth *= symbolScale[opt.valueDim.index];\n  }\n\n  output.valueLineWidth = valueLineWidth;\n}\n\nfunction prepareLayoutInfo(itemModel, symbolSize, layout, symbolRepeat, symbolClip, symbolOffset, symbolPosition, valueLineWidth, boundingLength, repeatCutLength, opt, output) {\n  var categoryDim = opt.categoryDim;\n  var valueDim = opt.valueDim;\n  var pxSign = output.pxSign;\n  var unitLength = Math.max(symbolSize[valueDim.index] + valueLineWidth, 0);\n  var pathLen = unitLength; // Note: rotation will not effect the layout of symbols, because user may\n  // want symbols to rotate on its center, which should not be translated\n  // when rotating.\n\n  if (symbolRepeat) {\n    var absBoundingLength = Math.abs(boundingLength);\n    var symbolMargin = zrUtil.retrieve(itemModel.get('symbolMargin'), '15%') + '';\n    var hasEndGap = false;\n\n    if (symbolMargin.lastIndexOf('!') === symbolMargin.length - 1) {\n      hasEndGap = true;\n      symbolMargin = symbolMargin.slice(0, symbolMargin.length - 1);\n    }\n\n    symbolMargin = parsePercent(symbolMargin, symbolSize[valueDim.index]);\n    var uLenWithMargin = Math.max(unitLength + symbolMargin * 2, 0); // When symbol margin is less than 0, margin at both ends will be subtracted\n    // to ensure that all of the symbols will not be overflow the given area.\n\n    var endFix = hasEndGap ? 0 : symbolMargin * 2; // Both final repeatTimes and final symbolMargin area calculated based on\n    // boundingLength.\n\n    var repeatSpecified = isNumeric(symbolRepeat);\n    var repeatTimes = repeatSpecified ? symbolRepeat : toIntTimes((absBoundingLength + endFix) / uLenWithMargin); // Adjust calculate margin, to ensure each symbol is displayed\n    // entirely in the given layout area.\n\n    var mDiff = absBoundingLength - repeatTimes * unitLength;\n    symbolMargin = mDiff / 2 / (hasEndGap ? repeatTimes : repeatTimes - 1);\n    uLenWithMargin = unitLength + symbolMargin * 2;\n    endFix = hasEndGap ? 0 : symbolMargin * 2; // Update repeatTimes when not all symbol will be shown.\n\n    if (!repeatSpecified && symbolRepeat !== 'fixed') {\n      repeatTimes = repeatCutLength ? toIntTimes((Math.abs(repeatCutLength) + endFix) / uLenWithMargin) : 0;\n    }\n\n    pathLen = repeatTimes * uLenWithMargin - endFix;\n    output.repeatTimes = repeatTimes;\n    output.symbolMargin = symbolMargin;\n  }\n\n  var sizeFix = pxSign * (pathLen / 2);\n  var pathPosition = output.pathPosition = [];\n  pathPosition[categoryDim.index] = layout[categoryDim.wh] / 2;\n  pathPosition[valueDim.index] = symbolPosition === 'start' ? sizeFix : symbolPosition === 'end' ? boundingLength - sizeFix : boundingLength / 2; // 'center'\n\n  if (symbolOffset) {\n    pathPosition[0] += symbolOffset[0];\n    pathPosition[1] += symbolOffset[1];\n  }\n\n  var bundlePosition = output.bundlePosition = [];\n  bundlePosition[categoryDim.index] = layout[categoryDim.xy];\n  bundlePosition[valueDim.index] = layout[valueDim.xy];\n  var barRectShape = output.barRectShape = zrUtil.extend({}, layout);\n  barRectShape[valueDim.wh] = pxSign * Math.max(Math.abs(layout[valueDim.wh]), Math.abs(pathPosition[valueDim.index] + sizeFix));\n  barRectShape[categoryDim.wh] = layout[categoryDim.wh];\n  var clipShape = output.clipShape = {}; // Consider that symbol may be overflow layout rect.\n\n  clipShape[categoryDim.xy] = -layout[categoryDim.xy];\n  clipShape[categoryDim.wh] = opt.ecSize[categoryDim.wh];\n  clipShape[valueDim.xy] = 0;\n  clipShape[valueDim.wh] = layout[valueDim.wh];\n}\n\nfunction createPath(symbolMeta) {\n  var symbolPatternSize = symbolMeta.symbolPatternSize;\n  var path = createSymbol( // Consider texture img, make a big size.\n  symbolMeta.symbolType, -symbolPatternSize / 2, -symbolPatternSize / 2, symbolPatternSize, symbolPatternSize, symbolMeta.color);\n  path.attr({\n    culling: true\n  });\n  path.type !== 'image' && path.setStyle({\n    strokeNoScale: true\n  });\n  return path;\n}\n\nfunction createOrUpdateRepeatSymbols(bar, opt, symbolMeta, isUpdate) {\n  var bundle = bar.__pictorialBundle;\n  var symbolSize = symbolMeta.symbolSize;\n  var valueLineWidth = symbolMeta.valueLineWidth;\n  var pathPosition = symbolMeta.pathPosition;\n  var valueDim = opt.valueDim;\n  var repeatTimes = symbolMeta.repeatTimes || 0;\n  var index = 0;\n  var unit = symbolSize[opt.valueDim.index] + valueLineWidth + symbolMeta.symbolMargin * 2;\n  eachPath(bar, function (path) {\n    path.__pictorialAnimationIndex = index;\n    path.__pictorialRepeatTimes = repeatTimes;\n\n    if (index < repeatTimes) {\n      updateAttr(path, null, makeTarget(index), symbolMeta, isUpdate);\n    } else {\n      updateAttr(path, null, {\n        scale: [0, 0]\n      }, symbolMeta, isUpdate, function () {\n        bundle.remove(path);\n      });\n    }\n\n    updateHoverAnimation(path, symbolMeta);\n    index++;\n  });\n\n  for (; index < repeatTimes; index++) {\n    var path = createPath(symbolMeta);\n    path.__pictorialAnimationIndex = index;\n    path.__pictorialRepeatTimes = repeatTimes;\n    bundle.add(path);\n    var target = makeTarget(index);\n    updateAttr(path, {\n      position: target.position,\n      scale: [0, 0]\n    }, {\n      scale: target.scale,\n      rotation: target.rotation\n    }, symbolMeta, isUpdate); // FIXME\n    // If all emphasis/normal through action.\n\n    path.on('mouseover', onMouseOver).on('mouseout', onMouseOut);\n    updateHoverAnimation(path, symbolMeta);\n  }\n\n  function makeTarget(index) {\n    var position = pathPosition.slice(); // (start && pxSign > 0) || (end && pxSign < 0): i = repeatTimes - index\n    // Otherwise: i = index;\n\n    var pxSign = symbolMeta.pxSign;\n    var i = index;\n\n    if (symbolMeta.symbolRepeatDirection === 'start' ? pxSign > 0 : pxSign < 0) {\n      i = repeatTimes - 1 - index;\n    }\n\n    position[valueDim.index] = unit * (i - repeatTimes / 2 + 0.5) + pathPosition[valueDim.index];\n    return {\n      position: position,\n      scale: symbolMeta.symbolScale.slice(),\n      rotation: symbolMeta.rotation\n    };\n  }\n\n  function onMouseOver() {\n    eachPath(bar, function (path) {\n      path.trigger('emphasis');\n    });\n  }\n\n  function onMouseOut() {\n    eachPath(bar, function (path) {\n      path.trigger('normal');\n    });\n  }\n}\n\nfunction createOrUpdateSingleSymbol(bar, opt, symbolMeta, isUpdate) {\n  var bundle = bar.__pictorialBundle;\n  var mainPath = bar.__pictorialMainPath;\n\n  if (!mainPath) {\n    mainPath = bar.__pictorialMainPath = createPath(symbolMeta);\n    bundle.add(mainPath);\n    updateAttr(mainPath, {\n      position: symbolMeta.pathPosition.slice(),\n      scale: [0, 0],\n      rotation: symbolMeta.rotation\n    }, {\n      scale: symbolMeta.symbolScale.slice()\n    }, symbolMeta, isUpdate);\n    mainPath.on('mouseover', onMouseOver).on('mouseout', onMouseOut);\n  } else {\n    updateAttr(mainPath, null, {\n      position: symbolMeta.pathPosition.slice(),\n      scale: symbolMeta.symbolScale.slice(),\n      rotation: symbolMeta.rotation\n    }, symbolMeta, isUpdate);\n  }\n\n  updateHoverAnimation(mainPath, symbolMeta);\n\n  function onMouseOver() {\n    this.trigger('emphasis');\n  }\n\n  function onMouseOut() {\n    this.trigger('normal');\n  }\n} // bar rect is used for label.\n\n\nfunction createOrUpdateBarRect(bar, symbolMeta, isUpdate) {\n  var rectShape = zrUtil.extend({}, symbolMeta.barRectShape);\n  var barRect = bar.__pictorialBarRect;\n\n  if (!barRect) {\n    barRect = bar.__pictorialBarRect = new graphic.Rect({\n      z2: 2,\n      shape: rectShape,\n      silent: true,\n      style: {\n        stroke: 'transparent',\n        fill: 'transparent',\n        lineWidth: 0\n      }\n    });\n    bar.add(barRect);\n  } else {\n    updateAttr(barRect, null, {\n      shape: rectShape\n    }, symbolMeta, isUpdate);\n  }\n}\n\nfunction createOrUpdateClip(bar, opt, symbolMeta, isUpdate) {\n  // If not clip, symbol will be remove and rebuilt.\n  if (symbolMeta.symbolClip) {\n    var clipPath = bar.__pictorialClipPath;\n    var clipShape = zrUtil.extend({}, symbolMeta.clipShape);\n    var valueDim = opt.valueDim;\n    var animationModel = symbolMeta.animationModel;\n    var dataIndex = symbolMeta.dataIndex;\n\n    if (clipPath) {\n      graphic.updateProps(clipPath, {\n        shape: clipShape\n      }, animationModel, dataIndex);\n    } else {\n      clipShape[valueDim.wh] = 0;\n      clipPath = new graphic.Rect({\n        shape: clipShape\n      });\n\n      bar.__pictorialBundle.setClipPath(clipPath);\n\n      bar.__pictorialClipPath = clipPath;\n      var target = {};\n      target[valueDim.wh] = symbolMeta.clipShape[valueDim.wh];\n      graphic[isUpdate ? 'updateProps' : 'initProps'](clipPath, {\n        shape: target\n      }, animationModel, dataIndex);\n    }\n  }\n}\n\nfunction getItemModel(data, dataIndex) {\n  var itemModel = data.getItemModel(dataIndex);\n  itemModel.getAnimationDelayParams = getAnimationDelayParams;\n  itemModel.isAnimationEnabled = isAnimationEnabled;\n  return itemModel;\n}\n\nfunction getAnimationDelayParams(path) {\n  // The order is the same as the z-order, see `symbolRepeatDiretion`.\n  return {\n    index: path.__pictorialAnimationIndex,\n    count: path.__pictorialRepeatTimes\n  };\n}\n\nfunction isAnimationEnabled() {\n  // `animation` prop can be set on itemModel in pictorial bar chart.\n  return this.parentModel.isAnimationEnabled() && !!this.getShallow('animation');\n}\n\nfunction updateHoverAnimation(path, symbolMeta) {\n  path.off('emphasis').off('normal');\n  var scale = symbolMeta.symbolScale.slice();\n  symbolMeta.hoverAnimation && path.on('emphasis', function () {\n    this.animateTo({\n      scale: [scale[0] * 1.1, scale[1] * 1.1]\n    }, 400, 'elasticOut');\n  }).on('normal', function () {\n    this.animateTo({\n      scale: scale.slice()\n    }, 400, 'elasticOut');\n  });\n}\n\nfunction createBar(data, opt, symbolMeta, isUpdate) {\n  // bar is the main element for each data.\n  var bar = new graphic.Group(); // bundle is used for location and clip.\n\n  var bundle = new graphic.Group();\n  bar.add(bundle);\n  bar.__pictorialBundle = bundle;\n  bundle.attr('position', symbolMeta.bundlePosition.slice());\n\n  if (symbolMeta.symbolRepeat) {\n    createOrUpdateRepeatSymbols(bar, opt, symbolMeta);\n  } else {\n    createOrUpdateSingleSymbol(bar, opt, symbolMeta);\n  }\n\n  createOrUpdateBarRect(bar, symbolMeta, isUpdate);\n  createOrUpdateClip(bar, opt, symbolMeta, isUpdate);\n  bar.__pictorialShapeStr = getShapeStr(data, symbolMeta);\n  bar.__pictorialSymbolMeta = symbolMeta;\n  return bar;\n}\n\nfunction updateBar(bar, opt, symbolMeta) {\n  var animationModel = symbolMeta.animationModel;\n  var dataIndex = symbolMeta.dataIndex;\n  var bundle = bar.__pictorialBundle;\n  graphic.updateProps(bundle, {\n    position: symbolMeta.bundlePosition.slice()\n  }, animationModel, dataIndex);\n\n  if (symbolMeta.symbolRepeat) {\n    createOrUpdateRepeatSymbols(bar, opt, symbolMeta, true);\n  } else {\n    createOrUpdateSingleSymbol(bar, opt, symbolMeta, true);\n  }\n\n  createOrUpdateBarRect(bar, symbolMeta, true);\n  createOrUpdateClip(bar, opt, symbolMeta, true);\n}\n\nfunction removeBar(data, dataIndex, animationModel, bar) {\n  // Not show text when animating\n  var labelRect = bar.__pictorialBarRect;\n  labelRect && (labelRect.style.text = null);\n  var pathes = [];\n  eachPath(bar, function (path) {\n    pathes.push(path);\n  });\n  bar.__pictorialMainPath && pathes.push(bar.__pictorialMainPath); // I do not find proper remove animation for clip yet.\n\n  bar.__pictorialClipPath && (animationModel = null);\n  zrUtil.each(pathes, function (path) {\n    graphic.updateProps(path, {\n      scale: [0, 0]\n    }, animationModel, dataIndex, function () {\n      bar.parent && bar.parent.remove(bar);\n    });\n  });\n  data.setItemGraphicEl(dataIndex, null);\n}\n\nfunction getShapeStr(data, symbolMeta) {\n  return [data.getItemVisual(symbolMeta.dataIndex, 'symbol') || 'none', !!symbolMeta.symbolRepeat, !!symbolMeta.symbolClip].join(':');\n}\n\nfunction eachPath(bar, cb, context) {\n  // Do not use Group#eachChild, because it do not support remove.\n  zrUtil.each(bar.__pictorialBundle.children(), function (el) {\n    el !== bar.__pictorialBarRect && cb.call(context, el);\n  });\n}\n\nfunction updateAttr(el, immediateAttrs, animationAttrs, symbolMeta, isUpdate, cb) {\n  immediateAttrs && el.attr(immediateAttrs); // when symbolCip used, only clip path has init animation, otherwise it would be weird effect.\n\n  if (symbolMeta.symbolClip && !isUpdate) {\n    animationAttrs && el.attr(animationAttrs);\n  } else {\n    animationAttrs && graphic[isUpdate ? 'updateProps' : 'initProps'](el, animationAttrs, symbolMeta.animationModel, symbolMeta.dataIndex, cb);\n  }\n}\n\nfunction updateCommon(bar, opt, symbolMeta) {\n  var color = symbolMeta.color;\n  var dataIndex = symbolMeta.dataIndex;\n  var itemModel = symbolMeta.itemModel; // Color must be excluded.\n  // Because symbol provide setColor individually to set fill and stroke\n\n  var normalStyle = itemModel.getModel('itemStyle').getItemStyle(['color']);\n  var hoverStyle = itemModel.getModel('emphasis.itemStyle').getItemStyle();\n  var cursorStyle = itemModel.getShallow('cursor');\n  eachPath(bar, function (path) {\n    // PENDING setColor should be before setStyle!!!\n    path.setColor(color);\n    path.setStyle(zrUtil.defaults({\n      fill: color,\n      opacity: symbolMeta.opacity\n    }, normalStyle));\n    graphic.setHoverStyle(path, hoverStyle);\n    cursorStyle && (path.cursor = cursorStyle);\n    path.z2 = symbolMeta.z2;\n  });\n  var barRectHoverStyle = {};\n  var barPositionOutside = opt.valueDim.posDesc[+(symbolMeta.boundingLength > 0)];\n  var barRect = bar.__pictorialBarRect;\n  setLabel(barRect.style, barRectHoverStyle, itemModel, color, opt.seriesModel, dataIndex, barPositionOutside);\n  graphic.setHoverStyle(barRect, barRectHoverStyle);\n}\n\nfunction toIntTimes(times) {\n  var roundedTimes = Math.round(times); // Escapse accurate error\n\n  return Math.abs(times - roundedTimes) < 1e-4 ? roundedTimes : Math.ceil(times);\n}\n\nvar _default = BarView;\nmodule.exports = _default;","import '../../style/index.css'; // style dependencies\n// deps-lint-skip: grid\n\nimport '../../grid/style/css';","import '../../style/index.css'; // style dependencies\n// deps-lint-skip: grid\n\nimport '../../grid/style/css';","import { Row } from '../grid';\nexport default Row;","import { Col } from '../grid';\nexport default Col;"],"sourceRoot":""}